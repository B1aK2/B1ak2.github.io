<!DOCTYPE html>
<html lang="en">

<!-- Head tag -->
<head><meta name="generator" content="Hexo 3.9.0">

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!--Description-->
    
        <meta name="description" content="3 变量3.12 字符串类型：string">
    

    <!--Author-->
    
        <meta name="author" content="John Doe">
    

    <!--Open Graph Title-->
    
        <meta property="og:title" content="go语言笔记">
    

    <!--Open Graph Description-->
    

    <!--Open Graph Site Name-->
    <meta property="og:site_name" content="B1aK2&#39;s Blog">

    <!--Type page-->
    
        <meta property="og:type" content="article">
    

    <!--Page Cover-->
    

    <meta name="twitter:card" content="summary">
    

    <!-- Title -->
    
    <title>go语言笔记 - B1aK2&#39;s Blog</title>

    <!-- Bootstrap Core CSS -->
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.2/css/bootstrap.min.css" integrity="sha384-y3tfxAZXuh4HwSYylfB+J125MxIs6mR5FOHamPBG064zB+AFeWH94NdvaCBm8qnd" crossorigin="anonymous">

    <!-- Custom Fonts -->
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="//oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="//oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- Gallery -->
    <link href="//cdnjs.cloudflare.com/ajax/libs/featherlight/1.3.5/featherlight.min.css" type="text/css" rel="stylesheet">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/style.css">

    <!-- Google Analytics -->
    


</head>


<body>

<div class="bg-gradient"></div>
<div class="bg-pattern"></div>

<!-- Menu -->
<!--Menu Links and Overlay-->
<div class="menu-bg">
    <div class="menu-container">
        <ul>
            
            <li class="menu-item">
                <a href="/">
                    主页
                </a>
            </li>
            
            <li class="menu-item">
                <a href="/archives">
                    归档
                </a>
            </li>
            
            <li class="menu-item">
                <a href="/categories">
                    分类
                </a>
            </li>
            
        </ul>
    </div>
</div>

<!--Hamburger Icon-->
<nav>
    <a href="#menu"></a>
</nav>

<div class="container">

    <!-- Main Content -->
    <div class="row">
    <div class="col-sm-12">

        <!--Title and Logo-->
        <header>
    <div class="logo">
        <a href="/"><i class="logo-icon fa fa-cube" aria-hidden="true"></i></a>
        
    </div>
</header>

        <section class="main">
            
<div class="post">

    <div class="post-header">
        <h1 class="title">
            <a href="/2019/05/30/Go语言笔记/">
                go语言笔记
            </a>
        </h1>
        <div class="post-info">
            
                <span class="date">2019-05-30</span>
            
            
            
        </div>
    </div>

    <div class="content">

        <!-- Gallery -->
        

        <!-- Post Content -->
        <h1 id="3-变量"><a href="#3-变量" class="headerlink" title="3 变量"></a>3 变量</h1><h2 id="3-12-字符串类型：string"><a href="#3-12-字符串类型：string" class="headerlink" title="3.12 字符串类型：string"></a>3.12 字符串类型：string</h2><a id="more"></a>
<ol>
<li><p>Go语言的字符串的字节使用UTF-8编码表示Unicode文本，这样Golang统一使用UTF-8编码，中文乱码问题不会困扰程序员</p>
</li>
<li><p>字符串一旦赋值了，字符串就不能修改了：在Go中字符串是不可变的</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">"fmt"</span></span><br><span class="line">	)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> address <span class="keyword">string</span> = <span class="string">"北京长城 110 hello world"</span></span><br><span class="line">	fmt.Println(address)</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 字符串一旦赋值了，字符串就不能修改了：在Go中字符串是不可变的</span></span><br><span class="line">	<span class="keyword">var</span> str = <span class="string">"hello"</span></span><br><span class="line">	str[<span class="number">0</span>] = <span class="string">'a'</span> <span class="comment">// 这里就不能去修改str的内容，即go中的字符串是不可变的。</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>字符串的两种形式<br>（1）双引号，会识别转义字符<br>（2）反应号，以字符串的原生形式输出，包括换行和特殊字符，可以实现防止攻击、输出源代码等</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">"fmt"</span></span><br><span class="line">	)</span><br><span class="line">	</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> address <span class="keyword">string</span> = <span class="string">"北京长城 110 hello world"</span></span><br><span class="line">	fmt.Println(address)</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 字符串一旦赋值了，字符串就不能修改了：在Go中字符串是不可变的</span></span><br><span class="line">	</span><br><span class="line">	str2 := <span class="string">"abc/nabc"</span></span><br><span class="line">	fmt.Println(str2)</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 使用反引号“``”示例</span></span><br><span class="line">	str3 := <span class="string">`</span></span><br><span class="line"><span class="string">package main</span></span><br><span class="line"><span class="string">import (</span></span><br><span class="line"><span class="string">	"fmt"</span></span><br><span class="line"><span class="string">	)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">	func main() &#123;</span></span><br><span class="line"><span class="string">	var address string = "北京长城 110 hello world"</span></span><br><span class="line"><span class="string">	fmt.Println(address)</span></span><br><span class="line"><span class="string">		// 字符串一旦赋值了，字符串就不能修改了：在Go中字符串是不可变的</span></span><br><span class="line"><span class="string">	var str = "hello"</span></span><br><span class="line"><span class="string">	str[0] = 'a' // 这里就不能去修改str的内容，即go中的字符串是不可变的。</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string">`</span></span><br><span class="line">	fmt.Println(str3)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>字符串的拼接方式</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">"fmt"</span></span><br><span class="line">	)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 字符串的拼接操作，使用加号拼接</span></span><br><span class="line">	<span class="keyword">var</span> str = <span class="string">"hello"</span> + <span class="string">"world"</span></span><br><span class="line">	str += <span class="string">" haha!"</span></span><br><span class="line"></span><br><span class="line">	fmt.Println(str)</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 当一个拼接的操作很长时，怎么办，可以分行写，但加号要保留在上一行末尾</span></span><br><span class="line">	<span class="keyword">var</span> str2 = <span class="string">"hello"</span> + <span class="string">"world"</span> + <span class="string">"hello"</span> + <span class="string">"world"</span> + <span class="string">"hello"</span> + <span class="string">"world"</span> +<span class="string">"hello"</span> + <span class="string">"world"</span> + </span><br><span class="line">	<span class="string">"hello"</span> + <span class="string">"world"</span><span class="string">"hello"</span> + <span class="string">"world"</span> +</span><br><span class="line">	<span class="string">"hello"</span> + <span class="string">"world"</span></span><br><span class="line"></span><br><span class="line">	fmt.Println(str2)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h2 id="3-13-基本数据类型默认值"><a href="#3-13-基本数据类型默认值" class="headerlink" title="3.13 基本数据类型默认值"></a>3.13 基本数据类型默认值</h2><h3 id="3-13-1-基本介绍"><a href="#3-13-1-基本介绍" class="headerlink" title="3.13.1 基本介绍"></a>3.13.1 基本介绍</h3><p>&emsp;&emsp;在Go中，数据类型都有一个默认值，当程序员没有赋值时，就会保留默认值，在go中，默认值又叫零值</p>
<h3 id="3-13-2-基本类型的默认值如下"><a href="#3-13-2-基本类型的默认值如下" class="headerlink" title="3.13.2 基本类型的默认值如下"></a>3.13.2 基本类型的默认值如下</h3><ul>
<li>整型 -&gt; 0</li>
<li>浮点型 -&gt; 0</li>
<li>字符型 -&gt; “”</li>
<li>布尔型 -&gt; false</li>
</ul>
<h2 id="3-14-基本数据类型的相互转换"><a href="#3-14-基本数据类型的相互转换" class="headerlink" title="3.14 基本数据类型的相互转换"></a>3.14 基本数据类型的相互转换</h2><h3 id="3-14-1-基本介绍"><a href="#3-14-1-基本介绍" class="headerlink" title="3.14.1 基本介绍"></a>3.14.1 基本介绍</h3><p>&emsp;&emsp;Golang和Java/C不同，Go在不同类型的变量之间赋值时需要<code>显示转换</code>。也就是说Golang中数据类型不能自动转换。</p>
<h3 id="3-14-2-基本语法"><a href="#3-14-2-基本语法" class="headerlink" title="3.14.2 基本语法"></a>3.14.2 基本语法</h3><ul>
<li>表达式T(v)将值v转换为类型T</li>
<li>T：就是数据类型，比如int32，int64，float32等等</li>
<li>v：就是需要转换的变量</li>
</ul>
<h3 id="3-14-3-案例演示"><a href="#3-14-3-案例演示" class="headerlink" title="3.14.3 案例演示"></a>3.14.3 案例演示</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">"fmt"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 演示golang中的基本数据类型的转换</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> i <span class="keyword">int32</span> = <span class="number">100</span></span><br><span class="line">	<span class="comment">// 希望i =&gt; float</span></span><br><span class="line">	<span class="keyword">var</span> n1 <span class="keyword">float32</span> = <span class="keyword">float32</span>(i)</span><br><span class="line">	<span class="keyword">var</span> n2 <span class="keyword">int8</span> = <span class="keyword">int8</span>(i)</span><br><span class="line">	<span class="keyword">var</span> n3 <span class="keyword">int64</span> = <span class="keyword">int64</span>(i) <span class="comment">// 低精度-&gt;高精度</span></span><br><span class="line"></span><br><span class="line">	fmt.Printf(<span class="string">"i = %v n1 = %v n2 = %v n3 = %v"</span>, i, n1, n2, n3)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>输出：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">i = <span class="number">100</span> n1 = <span class="number">100</span> n2 = <span class="number">100</span> n3 = <span class="number">100</span></span><br></pre></td></tr></table></figure>

<h3 id="3-14-4-基本数据类型相互转换的注意事项"><a href="#3-14-4-基本数据类型相互转换的注意事项" class="headerlink" title="3.14.4 基本数据类型相互转换的注意事项"></a>3.14.4 基本数据类型相互转换的注意事项</h3><ol>
<li><p>Go中，数据类型的转换可以是从<code>表示范围小-&gt;表示范围大</code>,也可以<code>范围大-&gt;范围小</code></p>
</li>
<li><p>被转换的事变量存储的数据（即值），变量本身的数据类型并没有变化</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">"fmt"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 演示golang中的基本数据类型的转换</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> i <span class="keyword">int32</span> = <span class="number">100</span></span><br><span class="line">	<span class="comment">// 希望i =&gt; float</span></span><br><span class="line">	<span class="keyword">var</span> n1 <span class="keyword">float32</span> = <span class="keyword">float32</span>(i)</span><br><span class="line">	<span class="keyword">var</span> n2 <span class="keyword">int8</span> = <span class="keyword">int8</span>(i)</span><br><span class="line">	<span class="keyword">var</span> n3 <span class="keyword">int64</span> = <span class="keyword">int64</span>(i) <span class="comment">// 低精度-&gt;高精度</span></span><br><span class="line"></span><br><span class="line">	fmt.Printf(<span class="string">"i = %v n1 = %v n2 = %v n3 = %v\n"</span>, i, n1, n2, n3)</span><br><span class="line">	fmt.Printf(<span class="string">"i type is %T\n"</span>, i)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ol>
<p>输出：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">i = <span class="number">100</span> n1 = <span class="number">100</span> n2 = <span class="number">100</span> n3 = <span class="number">100</span></span><br><span class="line">i <span class="keyword">type</span> is <span class="keyword">int32</span></span><br></pre></td></tr></table></figure>

<p>3）在转换中，比如讲int64转换成int8【-128——127】，编译时不会报错，只是转换的结果是按照溢出处理，和我们希望的结果不一样。因此在转换时，需要考虑数据范围。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">"fmt"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 演示golang中的基本数据类型的转换</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> num1 <span class="keyword">int64</span> = <span class="number">99999</span></span><br><span class="line">	<span class="keyword">var</span> num2 <span class="keyword">int8</span> = <span class="keyword">int8</span>(num1)</span><br><span class="line">	fmt.Println(<span class="string">"num2="</span>, num2)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>输出</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">num2 = <span class="number">-97</span></span><br></pre></td></tr></table></figure>

<h3 id="3-14-5-练习题"><a href="#3-14-5-练习题" class="headerlink" title="3.14.5 练习题"></a>3.14.5 练习题</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> n1 <span class="keyword">int32</span> = <span class="number">12</span></span><br><span class="line"><span class="keyword">var</span> n3 <span class="keyword">int8</span></span><br><span class="line"><span class="keyword">var</span> n4 <span class="keyword">int8</span></span><br><span class="line">n4 = <span class="keyword">int8</span>(n1) + <span class="number">127</span></span><br><span class="line">n3 = <span class="keyword">int8</span>(n1) + <span class="number">128</span></span><br></pre></td></tr></table></figure>

<p>解答：<br>n4编译能够通过，但结果会上溢<br>n3编译无法通过，编译器在编译时会检测出128已经超过了int8的数据范围</p>
<h2 id="3-15-基本数据类型和string的转换"><a href="#3-15-基本数据类型和string的转换" class="headerlink" title="3.15 基本数据类型和string的转换"></a>3.15 基本数据类型和string的转换</h2><h3 id="3-15-1-基本介绍"><a href="#3-15-1-基本介绍" class="headerlink" title="3.15.1 基本介绍"></a>3.15.1 基本介绍</h3><p>&emsp;&emsp;在程序开发中，我们经常讲基本数据类型转成string，或者将string转成基本数据类型。</p>
<h3 id="3-15-2-基本数据类型转string类型"><a href="#3-15-2-基本数据类型转string类型" class="headerlink" title="3.15.2 基本数据类型转string类型"></a>3.15.2 基本数据类型转string类型</h3><ul>
<li>方式1：<code>fmt.Sprintf(&quot;%参数&quot;, 表达式)【个人习惯这个，灵活】</code><br>函数的介绍：<br>Springf根据formate参数生成格式化字符串并返回该字符串。<br>参数需要和表达式的数据类型相匹配<br>fmt.Sprintf()会返回转换后的字符串</li>
</ul>
<p><strong>演示案例</strong></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">"fmt"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> num1 <span class="keyword">int</span> = <span class="number">99</span></span><br><span class="line">	<span class="keyword">var</span> num2 <span class="keyword">float64</span> = <span class="number">23.456</span></span><br><span class="line">	<span class="keyword">var</span> b <span class="keyword">bool</span> = <span class="literal">true</span></span><br><span class="line">	<span class="keyword">var</span> mychar <span class="keyword">byte</span> = <span class="string">'h'</span></span><br><span class="line">	<span class="keyword">var</span> str <span class="keyword">string</span> <span class="comment">//空的str</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">// 使用第一种方式来转换 fmt.Sprintf方法</span></span><br><span class="line"></span><br><span class="line">	str = fmt.Sprintf(<span class="string">"%d"</span>, num1)</span><br><span class="line">	fmt.Printf(<span class="string">"str tyep %T str = %q\n"</span>, str, str)</span><br><span class="line"></span><br><span class="line">	str = fmt.Sprintf(<span class="string">"%f"</span>, num2)</span><br><span class="line">	fmt.Printf(<span class="string">"str tyep %T str = %q\n"</span>, str, str)</span><br><span class="line"></span><br><span class="line">	str = fmt.Sprintf(<span class="string">"%t"</span>, b)</span><br><span class="line">	fmt.Printf(<span class="string">"str tyep %T str = %q\n"</span>, str, str)</span><br><span class="line"></span><br><span class="line">	str = fmt.Sprintf(<span class="string">"%c"</span>, mychar)</span><br><span class="line">	fmt.Printf(<span class="string">"str tyep %T str = %q\n"</span>, str, str)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>输出：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">str tyep <span class="keyword">string</span> str = <span class="string">"99"</span></span><br><span class="line">str tyep <span class="keyword">string</span> str = <span class="string">"23.456000"</span></span><br><span class="line">str tyep <span class="keyword">string</span> str = <span class="string">"true"</span></span><br><span class="line">str tyep <span class="keyword">string</span> str = <span class="string">"h"</span></span><br></pre></td></tr></table></figure>

<ul>
<li><p>方式2：<code>使用strconv包的函数</code><br><code>func FormatBool(b bool) string</code></p>
<p>  <code>func FormatFloat(f float64, fmt byte, prec, bitSize int) string</code></p>
<p>  <code>func FormatBool(i int64, base int) string</code></p>
<p>  <code>func FormatBool(i unint64, base int) string</code></p>
<p>  <code>func Itoa(i int) string</code></p>
</li>
</ul>
<p><strong>案例演示</strong></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">"fmt"</span></span><br><span class="line">	<span class="string">"strconv"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> num1 <span class="keyword">int</span> = <span class="number">99</span></span><br><span class="line">	<span class="keyword">var</span> num2 <span class="keyword">float64</span> = <span class="number">23.456</span></span><br><span class="line">	<span class="keyword">var</span> b <span class="keyword">bool</span> = <span class="literal">true</span></span><br><span class="line">	<span class="keyword">var</span> str <span class="keyword">string</span> <span class="comment">//空的str</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">// 使用第二种方式来转换 strconv 函数</span></span><br><span class="line"></span><br><span class="line">	str = strconv.FormatInt(<span class="keyword">int64</span>(num1), <span class="number">10</span>)</span><br><span class="line">	fmt.Printf(<span class="string">"str tyep %T str = %q\n"</span>, str, str)</span><br><span class="line"></span><br><span class="line">	<span class="comment">// strconv.FormatFloat(num64, 'f', 10, 64)</span></span><br><span class="line">	<span class="comment">// 说明：'f'：格式 10：表示小数点后保留10位 64：表示这个小数是float64</span></span><br><span class="line">	str = strconv.FormatFloat(num2, <span class="string">'f'</span>, <span class="number">10</span>, <span class="number">64</span>)</span><br><span class="line">	fmt.Printf(<span class="string">"str tyep %T str = %q\n"</span>, str, str)</span><br><span class="line"></span><br><span class="line">	str = strconv.FormatBool(b)</span><br><span class="line">	fmt.Printf(<span class="string">"str tyep %T str = %q\n"</span>, str, str)</span><br><span class="line"></span><br><span class="line">	<span class="comment">// strconv包中有一个函数Itoa</span></span><br><span class="line">	<span class="keyword">var</span> num3 <span class="keyword">int</span> = <span class="number">4567</span></span><br><span class="line">	str = strconv.Itoa(num3)</span><br><span class="line">	fmt.Printf(<span class="string">"str tyep %T str = %q\n"</span>, str, str)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>输出：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">str tyep <span class="keyword">string</span> str = <span class="string">"99"</span></span><br><span class="line">str tyep <span class="keyword">string</span> str = <span class="string">"23.4560000000"</span></span><br><span class="line">str tyep <span class="keyword">string</span> str = <span class="string">"true"</span></span><br><span class="line">str tyep <span class="keyword">string</span> str = <span class="string">"4567"</span></span><br></pre></td></tr></table></figure>

<h3 id="3-15-3-string类转换基本数据类型"><a href="#3-15-3-string类转换基本数据类型" class="headerlink" title="3.15.3 string类转换基本数据类型"></a>3.15.3 string类转换基本数据类型</h3><ul>
<li><p>使用strconv包的函数<br><code>func ParseBool(str string)(value bool, err error)</code></p>
<p>  <code>func ParseFloat(s string, bitSize int)(f float64, err error)</code></p>
<p>  <code>func ParseInt(s string, base int, bitSize int)(i int64, err error)</code></p>
<p>  <code>func ParseUint(s string, b int, bitSize int)(n uint64, err error)</code></p>
</li>
<li><p>案例演示</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">"fmt"</span></span><br><span class="line">	<span class="string">"strconv"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> str <span class="keyword">string</span> = <span class="string">"true"</span></span><br><span class="line">	<span class="keyword">var</span> b <span class="keyword">bool</span></span><br><span class="line">	<span class="comment">// b, _ = strconv.ParseBool(str)</span></span><br><span class="line">	<span class="comment">// 说明</span></span><br><span class="line">	<span class="comment">// 1. strconv.ParseBool(str)函数会返回两个值（varlue bool, err error）</span></span><br><span class="line">	<span class="comment">// 2. 因为我只想获取到value bool，不想获取err所以我使用_忽略</span></span><br><span class="line">	b, _ = strconv.ParseBool(str)</span><br><span class="line">	fmt.Printf(<span class="string">"b type %T b = %v\n"</span>, b, b)</span><br><span class="line"></span><br><span class="line">	<span class="keyword">var</span> str2 <span class="keyword">string</span> = <span class="string">"1234590"</span></span><br><span class="line">	<span class="keyword">var</span> n1 <span class="keyword">int64</span></span><br><span class="line">	<span class="keyword">var</span> n2 <span class="keyword">int</span></span><br><span class="line">	n1, _ = strconv.ParseInt(str2, <span class="number">10</span>, <span class="number">64</span>)</span><br><span class="line">	n2 = <span class="keyword">int</span>(n1)</span><br><span class="line">	fmt.Printf(<span class="string">"n1 type %T n1 = %v\n"</span>, n1, n1)</span><br><span class="line">	fmt.Printf(<span class="string">"n1 type %T n2 = %v\n"</span>, n2, n2)</span><br><span class="line"></span><br><span class="line">	<span class="keyword">var</span> str3 <span class="keyword">string</span> = <span class="string">"123.456"</span></span><br><span class="line">	<span class="keyword">var</span> f1 <span class="keyword">float64</span></span><br><span class="line">	f1, _ = strconv.ParseFloat(str3, <span class="number">64</span>)</span><br><span class="line">	fmt.Printf(<span class="string">"f1 type %T f1 = %v\n"</span>, f1, f1)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>  输出：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">b <span class="keyword">type</span> <span class="keyword">bool</span> b = <span class="literal">true</span></span><br><span class="line">n1 <span class="keyword">type</span> <span class="keyword">int64</span> n1 = <span class="number">1234590</span></span><br><span class="line">n1 <span class="keyword">type</span> <span class="keyword">int</span> n2 = <span class="number">1234590</span></span><br><span class="line">f1 <span class="keyword">type</span> <span class="keyword">float64</span> f1 = <span class="number">123.456</span></span><br></pre></td></tr></table></figure>

<p>  说明：因为返回的事int64或者float64，如希望得到int32,float32等，需如下处理</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> num5 <span class="keyword">int</span> <span class="number">32</span></span><br><span class="line">num5 = <span class="keyword">int32</span>(num)</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h3 id="3-15-4-string转基本数据类型的注意事项"><a href="#3-15-4-string转基本数据类型的注意事项" class="headerlink" title="3.15.4 string转基本数据类型的注意事项"></a>3.15.4 string转基本数据类型的注意事项</h3><p>&emsp;&emsp;在将string类型转成基本数据类型时，要确保string类型能够转成有效的数据，比如 我们可以把“123”，转成一个整数，但不能把“hello”转成一个整数，如果这样，Golang直接将其转成0，其他类型也是一样的道理，float-&gt;0 bool-&gt;false</p>
<ul>
<li><p>案例说明</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"><span class="keyword">import</span>(</span><br><span class="line">	<span class="string">"fmt"</span></span><br><span class="line">	<span class="string">"strconv"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> str4 <span class="keyword">string</span> = <span class="string">"hello"</span></span><br><span class="line">	<span class="keyword">var</span> n3 <span class="keyword">int64</span></span><br><span class="line">	n3, _ = strconv.ParseInt(str4, <span class="number">10</span>, <span class="number">64</span>)</span><br><span class="line">	fmt.Printf(<span class="string">"f1 type %T f1 = %v\n"</span>, n3, n3)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>  输出：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">f1 <span class="keyword">type</span> <span class="keyword">int64</span> f1 = <span class="number">0</span></span><br></pre></td></tr></table></figure>

</li>
</ul>
<h2 id="3-16-指针"><a href="#3-16-指针" class="headerlink" title="3.16 指针"></a>3.16 指针</h2><h3 id="3-16-1-基本介绍"><a href="#3-16-1-基本介绍" class="headerlink" title="3.16.1 基本介绍"></a>3.16.1 基本介绍</h3><ol>
<li><p>基本数据类型，变量存的就是值，也叫值类型</p>
</li>
<li><p>获取变量的地址，用<code>&amp;</code>，比如var num int，获取num的地址：&amp;num</p>
</li>
<li><p>指针类型，指针变量存的是一个地址，这个地址指向的空间存的才是值。<br>比如：var ptr *int = &amp;num </p>
</li>
<li><p>获取指针类似说指向的值，使用：<code>*</code><br>var ptr *int，使用<code>*ptr</code>获取p指向的值</p>
</li>
</ol>
<h2 id="3-17-值类型和引用类型"><a href="#3-17-值类型和引用类型" class="headerlink" title="3.17 值类型和引用类型"></a>3.17 值类型和引用类型</h2><h3 id="3-17-1-常见的值类型和引用类型"><a href="#3-17-1-常见的值类型和引用类型" class="headerlink" title="3.17.1 常见的值类型和引用类型"></a>3.17.1 常见的值类型和引用类型</h3><ol>
<li><p><strong>值类型：</strong>基本数据类型int系列，float系列，bool，string、数组和结构体struct</p>
</li>
<li><p><strong>引用类型：</strong>指针、slice切片、map、管道chan、interface等都是引用类型</p>
</li>
</ol>
<h3 id="3-17-2-值类型和引用类型的特点"><a href="#3-17-2-值类型和引用类型的特点" class="headerlink" title="3.17.2 值类型和引用类型的特点"></a>3.17.2 值类型和引用类型的特点</h3><ol>
<li><p><strong>值类型：</strong>变量直接存储，内存通常在<code>栈中分配</code></p>
</li>
<li><p><strong>引用类型：</strong>变量存储的事一个地址，这个的地址对应的空间才真正存储数据（值），内存通常在<code>堆上分配</code>，当没有任何变量引用这个地址时，该地址对应的数据空间就成为一个<code>垃圾</code>，由<code>GC</code>来回收。</p>
</li>
</ol>
<h2 id="3-18-标识符的命名规范"><a href="#3-18-标识符的命名规范" class="headerlink" title="3.18 标识符的命名规范"></a>3.18 标识符的命名规范</h2><h3 id="3-18-1-标识符概念"><a href="#3-18-1-标识符概念" class="headerlink" title="3.18.1 标识符概念"></a>3.18.1 标识符概念</h3><ol>
<li><p>Golang中对各种变量、方法、函数等命名时使用的字符序列成为标识符</p>
</li>
<li><p>凡是自己可以起名字的地方都叫标识符</p>
</li>
</ol>
<h3 id="3-18-2-标识符的命名规则（重要）"><a href="#3-18-2-标识符的命名规则（重要）" class="headerlink" title="3.18.2 标识符的命名规则（重要）"></a>3.18.2 标识符的命名规则（重要）</h3><ol>
<li><p>由26个英文字母大小写，0-9，_ 组成</p>
</li>
<li><p>数字不可以开头</p>
</li>
<li><p>Golang中严格区分大小写</p>
</li>
<li><p>标识符不能包含空格</p>
</li>
<li><p>下划线<code>_</code>本身在Go中是一个特殊的标识符，称为空标识符。可以代表任何其他的标识符，但是他对应的值会被忽略（比如，忽略某个返回值）。所以<code>仅能被作为占位符使用。不能作为标识符使用。</code></p>
</li>
<li><p>不能以系统保留关键字作为标识符，比如break，if等等</p>
</li>
</ol>
<h3 id="3-18-3-标识符命名注意事项"><a href="#3-18-3-标识符命名注意事项" class="headerlink" title="3.18.3 标识符命名注意事项"></a>3.18.3 标识符命名注意事项</h3><ol>
<li><p><strong>包名</strong>：保持package的命名和目录保持一致，尽量采用有意义的包名，简短、有意义、不要和标准库冲突</p>
</li>
<li><p><strong>变量名、函数名、常量名</strong>：采用驼峰命名法</p>
</li>
<li><p>如果变量名、函数名、常量名首字母大写，则可以被其他的包访问；如果首字母小写则只能在本包中使用（注：可简单的理解成，首字母大写是共有的，首字母小写是私有的）。在golang中<strong>没有</strong><code>public</code>、<code>private</code>关键字</p>
</li>
</ol>
<h1 id="4-运算符"><a href="#4-运算符" class="headerlink" title="4 运算符"></a>4 运算符</h1><h2 id="4-1-运算符的基本介绍"><a href="#4-1-运算符的基本介绍" class="headerlink" title="4.1 运算符的基本介绍"></a>4.1 运算符的基本介绍</h2><ol>
<li><p>算数运算符</p>
</li>
<li><p>赋值运算符</p>
</li>
<li><p>比较运算符/关系运算符</p>
</li>
<li><p>逻辑运算符</p>
</li>
<li><p>位运算符</p>
</li>
<li><p>其他运算符</p>
</li>
</ol>
<h2 id="4-2-算数运算符"><a href="#4-2-算数运算符" class="headerlink" title="4.2 算数运算符"></a>4.2 算数运算符</h2><p>常见加减乘除、自增、自减、取余、字符串相加，不作过多介绍。</p>
<p>取余本质：<code>a mod b = a - a / b * b</code><br>eg:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">-10 mod 3 </span><br><span class="line">= (-10) - (-10) / 3 * 3 </span><br><span class="line">= (-10) - (-3) * 3	// 整型之间运算结果为整型</span><br><span class="line">= -10 - (-9) </span><br><span class="line">= -1</span><br></pre></td></tr></table></figure>

<h3 id="4-2-3-算数运算符使用细节"><a href="#4-2-3-算数运算符使用细节" class="headerlink" title="4.2.3 算数运算符使用细节"></a>4.2.3 算数运算符使用细节</h3><p>在golang中<code>++</code>和<code>--</code>只能独立使用</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">a = i++		<span class="comment">// 错误，i++只能独立使用</span></span><br><span class="line">a = i--		<span class="comment">// 错误，i--只能独立使用</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> i++ &gt; <span class="number">0</span> &#123;	<span class="comment">// 错误，i++只能独立使用</span></span><br><span class="line">	pass</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">++i 		<span class="comment">// 错误，在golang中没有前++</span></span><br></pre></td></tr></table></figure>

<h2 id="4-9-运算符的优先级"><a href="#4-9-运算符的优先级" class="headerlink" title="4.9 运算符的优先级"></a>4.9 运算符的优先级</h2><h3 id="4-9-1-运算符优先级一览表"><a href="#4-9-1-运算符优先级一览表" class="headerlink" title="4.9.1 运算符优先级一览表"></a>4.9.1 运算符优先级一览表</h3><h3 id="4-9-2-总结："><a href="#4-9-2-总结：" class="headerlink" title="4.9.2 总结："></a>4.9.2 总结：</h3><ol>
<li><p>运算符有不同的优先级，所谓优先级就是表达式运算中的运算顺序。</p>
</li>
<li><p>只有单目运算符、赋值运算符是右向左运算的</p>
</li>
<li><p>大致的顺序：<br>&emsp;1:括号，++，–<br>&emsp;2:单目运算<br>&emsp;3:算数运算符<br>&emsp;4:移位运算<br>&emsp;5:关系运算符<br>&emsp;6:位运算符<br>&emsp;7:逻辑运算符<br>&emsp;8:赋值运算符<br>&emsp;9:逗号</p>
</li>
</ol>
<h2 id="4-12-位运算"><a href="#4-12-位运算" class="headerlink" title="4.12 位运算"></a>4.12 位运算</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a <span class="keyword">int</span> = <span class="number">1</span> &gt;&gt; <span class="number">2</span></span><br><span class="line"><span class="keyword">var</span> b <span class="keyword">int</span> = <span class="number">-1</span> &gt;&gt; <span class="number">2</span></span><br><span class="line"><span class="keyword">var</span> c <span class="keyword">int</span> = <span class="number">1</span> &lt;&lt; <span class="number">2</span></span><br><span class="line"><span class="keyword">var</span> d <span class="keyword">int</span> = <span class="number">-1</span> &lt;&lt; <span class="number">2</span></span><br><span class="line">求a、b、c、d的结果是多少？</span><br></pre></td></tr></table></figure>

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">a = <span class="number">0000</span> <span class="number">0001</span> -&gt; <span class="number">0000</span> <span class="number">0000</span> = <span class="number">0</span></span><br><span class="line">b = <span class="number">1111</span> <span class="number">1111</span>（补码） -&gt; <span class="number">1111</span> <span class="number">1111</span> -&gt; <span class="number">1111</span> <span class="number">1110</span> -&gt; <span class="number">1000</span> <span class="number">0001</span> = <span class="number">-1</span></span><br><span class="line">c = <span class="number">0000</span> <span class="number">0001</span> -&gt; <span class="number">0000</span> <span class="number">0100</span> = <span class="number">4</span></span><br><span class="line">d = <span class="number">1111</span> <span class="number">1111</span>（补码） -&gt; <span class="number">1111</span> <span class="number">1100</span> -&gt; <span class="number">1111</span> <span class="number">1011</span> -&gt; <span class="number">1000</span> <span class="number">0100</span> = <span class="number">-4</span></span><br></pre></td></tr></table></figure>

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a <span class="keyword">int</span> = <span class="number">-2</span> ^ <span class="number">2</span></span><br><span class="line">求a等于多少？</span><br></pre></td></tr></table></figure>

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">-2</span> ^ <span class="number">2</span> = <span class="number">-4</span></span><br><span class="line"></span><br><span class="line">过程：</span><br><span class="line"><span class="number">-2</span>的原码：<span class="number">1000</span> <span class="number">0010</span> -&gt; 反码：<span class="number">1111</span> <span class="number">1101</span> -&gt; 补码：<span class="number">1111</span> <span class="number">1110</span></span><br><span class="line"><span class="number">2</span>的补码： <span class="number">0000</span> <span class="number">0010</span></span><br><span class="line"></span><br><span class="line"><span class="number">-2</span> ^ <span class="number">2</span>：</span><br><span class="line">	<span class="number">1111</span> <span class="number">1110</span></span><br><span class="line">	<span class="number">0000</span> <span class="number">0010</span></span><br><span class="line">	---------</span><br><span class="line">	<span class="number">1111</span> <span class="number">1100</span>（任为补码）</span><br><span class="line"><span class="number">1111</span> <span class="number">1100</span> -&gt; 反码：<span class="number">1111</span> <span class="number">1011</span> -&gt; 原码：<span class="number">1000</span> <span class="number">0100</span> -&gt; <span class="number">-4</span></span><br></pre></td></tr></table></figure>

<h3 id="4-12-2-原码、反码、补码"><a href="#4-12-2-原码、反码、补码" class="headerlink" title="4.12.2 原码、反码、补码"></a>4.12.2 原码、反码、补码</h3><ol>
<li><p>正数原码、反码、补码都一样</p>
</li>
<li><p>负数的反码为符号位不变，其他位取反</p>
</li>
<li><p>负数的补码为反码+1</p>
</li>
<li><p>0的反码、补码都是0</p>
</li>
<li><p>在计算机运行时都是以补码的方式来运算的</p>
</li>
</ol>
<h3 id="4-12-3-移位运算"><a href="#4-12-3-移位运算" class="headerlink" title="4.12.3 移位运算"></a>4.12.3 移位运算</h3><p>计算均用补码<br>右移运算：低位溢出，符号位不变，并用符号位补溢出的高位<br>左移运算：符号位不变，低位补0</p>
<h1 id="5-程序流程"><a href="#5-程序流程" class="headerlink" title="5 程序流程"></a>5 程序流程</h1><h3 id="5-3-3-单分支的细节说明"><a href="#5-3-3-单分支的细节说明" class="headerlink" title="5.3.3 单分支的细节说明"></a>5.3.3 单分支的细节说明</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// golang支持在if中，直接定义一个变量，比如下面</span></span><br><span class="line"><span class="keyword">if</span> age := <span class="number">20</span>; age &gt; <span class="number">28</span> &#123;</span><br><span class="line">	fmt.Println(<span class="string">"你年龄大于18，要对自己的行为负责！"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="5-3-4-多分支的细节说明"><a href="#5-3-4-多分支的细节说明" class="headerlink" title="5.3.4 多分支的细节说明"></a>5.3.4 多分支的细节说明</h3><p>多分支最多只能有一个执行入口</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> b <span class="keyword">bool</span> = <span class="literal">true</span></span><br><span class="line"><span class="keyword">if</span> b = <span class="literal">false</span> &#123; <span class="comment">// 错误，只能是条件表达式</span></span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="5-4-switch分支控制"><a href="#5-4-switch分支控制" class="headerlink" title="5.4 switch分支控制"></a>5.4 switch分支控制</h2><h3 id="5-4-1-基本的介绍"><a href="#5-4-1-基本的介绍" class="headerlink" title="5.4.1 基本的介绍"></a>5.4.1 基本的介绍</h3><ol>
<li><p>switch语句用于基于不同条件不同动作，没一个case分支都是唯一的，从上到下逐一测试，直到匹配为止。</p>
</li>
<li><p>匹配项后面也不需要添加break</p>
</li>
</ol>
<h3 id="5-4-2-基本语法"><a href="#5-4-2-基本语法" class="headerlink" title="5.4.2 基本语法"></a>5.4.2 基本语法</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">switch</span> 表达式 &#123;</span><br><span class="line">	<span class="keyword">case</span> 表达式<span class="number">1</span>, 表达式<span class="number">2</span>, ...:</span><br><span class="line">		语句块<span class="number">1</span></span><br><span class="line">	<span class="keyword">case</span> 表达式<span class="number">3</span>, 表达式<span class="number">4</span>, ...:</span><br><span class="line">	<span class="comment">// 这里可以有多个case语句</span></span><br><span class="line">		语句块<span class="number">2</span></span><br><span class="line">	<span class="keyword">default</span>:</span><br><span class="line">		语句块</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="5-4-3-总结"><a href="#5-4-3-总结" class="headerlink" title="5.4.3 总结"></a>5.4.3 总结</h3><ol>
<li><p>golang里case后的表达式可以有多个，使用<code>,</code>间隔</p>
</li>
<li><p>golang中的case语句块不需要写break，即每个case后默认添加了case语句块。</p>
</li>
<li><p>表达式之间的数据类型要相同</p>
</li>
<li><p>表达式中的常量要求不能重复</p>
</li>
<li><p>switch后也可以不带表达式，类似if–else分支来使用</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> age <span class="keyword">int</span> = <span class="number">10</span></span><br><span class="line"><span class="keyword">switch</span> &#123;</span><br><span class="line">	<span class="keyword">case</span> age == <span class="number">10</span>:</span><br><span class="line">		fmt.Println(<span class="string">"1.1"</span>)</span><br><span class="line">	<span class="keyword">case</span> age == <span class="number">20</span>:</span><br><span class="line">		fmt.Println(<span class="string">"1.2"</span>)</span><br><span class="line">	<span class="keyword">default</span>:</span><br><span class="line">		fmt.Println(<span class="string">"1.3"</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// case中也可以对age的范围进行判断</span></span><br><span class="line"><span class="keyword">switch</span> &#123;</span><br><span class="line">	<span class="keyword">case</span> age &gt; <span class="number">90</span>:</span><br><span class="line">		fmt.Println(<span class="string">"2.1"</span>)</span><br><span class="line">	<span class="keyword">case</span> age &gt;= <span class="number">70</span> &amp;&amp; age &lt;= <span class="number">90</span></span><br><span class="line">		fmt.Println(<span class="string">"2.2"</span>)</span><br><span class="line">	<span class="keyword">default</span>:</span><br><span class="line">		fmt.Println(<span class="string">"2.3"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>switch后面也可以之间声明/定义一个变量，分号结束，不推荐</p>
</li>
<li><p>switch穿透 fallthrought</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> num <span class="keyword">int</span> = <span class="number">10</span></span><br><span class="line"><span class="keyword">switch</span> num &#123;</span><br><span class="line">	<span class="keyword">case</span> <span class="number">10</span>:</span><br><span class="line">		fmt.Println(<span class="string">"1"</span>)</span><br><span class="line">		<span class="keyword">fallthrough</span> <span class="comment">// 默认只穿透一层</span></span><br><span class="line">	<span class="keyword">case</span> <span class="number">20</span>:</span><br><span class="line">		fmt.Println(<span class="string">"2"</span>)</span><br><span class="line">	<span class="keyword">default</span>:</span><br><span class="line">		fmt.Println(<span class="string">"没有匹配到"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p> 输出：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span></span><br><span class="line"><span class="number">2</span></span><br></pre></td></tr></table></figure>

</li>
</ol>
<h2 id="5-5-for循环"><a href="#5-5-for循环" class="headerlink" title="5.5 for循环"></a>5.5 for循环</h2><h3 id="5-字符串遍历方式"><a href="#5-字符串遍历方式" class="headerlink" title="5. 字符串遍历方式"></a>5. 字符串遍历方式</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str <span class="keyword">string</span> = <span class="string">"hello, world"</span></span><br><span class="line"><span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="built_in">len</span>(str); i++ &#123;</span><br><span class="line">	fmt.Println(<span class="string">"%c \n"</span>, str[i])</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 字符串遍历方式2-for-range方式 </span></span><br><span class="line">str = <span class="string">"abc~ok"</span></span><br><span class="line"><span class="keyword">for</span> index, val := <span class="keyword">range</span> str &#123;</span><br><span class="line">	fmt.Printf(<span class="string">"index = %d, val = %c \n"</span>, index, val)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="5-6-while和do……while的实现"><a href="#5-6-while和do……while的实现" class="headerlink" title="5.6 while和do……while的实现"></a>5.6 while和do……while的实现</h2><h3 id="5-6-1-for循环实现while的效果"><a href="#5-6-1-for循环实现while的效果" class="headerlink" title="5.6.1 for循环实现while的效果"></a>5.6.1 for循环实现while的效果</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 循环变量初始化</span></span><br><span class="line"><span class="keyword">for</span> &#123;</span><br><span class="line">	<span class="keyword">if</span> 循环条件表达式 &#123;</span><br><span class="line">		<span class="keyword">break</span> <span class="comment">// 跳出for循环</span></span><br><span class="line">	&#125;</span><br><span class="line">	循环操作（语句）</span><br><span class="line">	循环变量迭代</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="5-6-2-for循环实现do……while循环"><a href="#5-6-2-for循环实现do……while循环" class="headerlink" title="5.6.2 for循环实现do……while循环"></a>5.6.2 for循环实现do……while循环</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> &#123;</span><br><span class="line">	循环操作（语句）</span><br><span class="line">	循环变量迭代</span><br><span class="line">	<span class="keyword">if</span> 循环条件表达式 &#123;</span><br><span class="line">		<span class="keyword">break</span> <span class="comment">// 跳出for循环</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="5-8-跳转控制语句-break"><a href="#5-8-跳转控制语句-break" class="headerlink" title="5.8 跳转控制语句-break"></a>5.8 跳转控制语句-break</h2><h3 id="5-8-1-看一个具体需求，引出break"><a href="#5-8-1-看一个具体需求，引出break" class="headerlink" title="5.8.1 看一个具体需求，引出break"></a>5.8.1 看一个具体需求，引出break</h3><p>随机数的生成</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">"fmt"</span></span><br><span class="line">	<span class="string">"math/rand"</span></span><br><span class="line">	)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 我们为了生成一个随机数，还需要设置一个种子</span></span><br><span class="line">	<span class="comment">// time.Now().Unix()：返回一个1970.1.1 0分0秒到现在的秒数</span></span><br><span class="line">	<span class="comment">// time.Now().UnixNano()：返回纳秒</span></span><br><span class="line">	rand.Seed(time.Now().Unix())</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 如何随机生成1-100的整数</span></span><br><span class="line">	<span class="comment">// rand.Intn(100)生成[0, 100)的整数</span></span><br><span class="line"></span><br><span class="line">	n := rand.Intn(<span class="number">100</span>) + <span class="number">1</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="5-8-6-break的注意事项和使用细节"><a href="#5-8-6-break的注意事项和使用细节" class="headerlink" title="5.8.6 break的注意事项和使用细节"></a>5.8.6 break的注意事项和使用细节</h3><ol>
<li>break语句出现在多层嵌套的语句块中是，可以决定跳出到哪一层<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">lable2:</span><br><span class="line"><span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="number">4</span>; i++ &#123;</span><br><span class="line">	<span class="keyword">for</span> j := <span class="number">0</span>; j &lt; <span class="number">10</span>; j++ &#123;</span><br><span class="line">		<span class="keyword">if</span> j == <span class="number">2</span> &#123;</span><br><span class="line">			<span class="keyword">break</span> lable2</span><br><span class="line">		&#125;</span><br><span class="line">		fmt.Println(<span class="string">"j="</span>, j) </span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h2 id="6-函数"><a href="#6-函数" class="headerlink" title="6 函数"></a>6 函数</h2><h3 id="6-1-函数注意事项"><a href="#6-1-函数注意事项" class="headerlink" title="6.1 函数注意事项"></a>6.1 函数注意事项</h3><ol>
<li><p>公有函数或变量首字母需要大写</p>
</li>
<li><p>包名过长可以给包起别名，若这样做原包名则无法使用</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">packaga main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">"fmt"</span></span><br><span class="line">	haha <span class="string">".../.../.../xixi"</span></span><br><span class="line">	)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">// haha即为xixi文件夹下包的别名</span></span><br><span class="line">	haha.Func1()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>相同包下不能有相同的变量名以及全局变量名</p>
</li>
<li><p>要编译成可执行文件，必须将包名声明为mian。否则只编译成库文件的话，则可自定义包名</p>
</li>
<li><p>Go语言函数不支持重载</p>
</li>
<li><p>基本数据类型和数组默认都是值传递，即进行值的拷贝，内部修改无法影响到外部的变量。</p>
</li>
<li><p>函数可作为型参进行传递</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">myFun</span><span class="params">(funvar <span class="keyword">func</span>(<span class="keyword">int</span>, <span class="keyword">int</span>)</span> <span class="title">int</span>, <span class="title">num1</span> <span class="title">int</span>, <span class="title">num2</span> <span class="title">int</span>) <span class="title">int</span></span> &#123;</span><br><span class="line">	<span class="keyword">return</span> funvar(num1, num2)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>go可自定义数据类型<br>基本语法：<code>type</code>自定义数据类型名 数据类型<br>&emsp;&emsp;&emsp;&emsp;&emsp;相当于一个别名<br>案例1 ：<code>type myInt int</code><br>&emsp;&emsp;&emsp;&emsp;这时<code>myInt</code>就等价于<code>int</code>来使用<br>案例2 ：<code>type mySum func(int, int) int</code><br>&emsp;&emsp;&emsp;&emsp;这时<code>mySum</code>就等价于一个函数类型<code>func(int, int) int</code></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">// 给int取了别名，在go中myInt和int虽然都是int类型</span></span><br><span class="line">	<span class="comment">// 但是go认为myInt和int是两个类型</span></span><br><span class="line">	<span class="keyword">type</span> myInt <span class="keyword">int</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">var</span> num1 myInt</span><br><span class="line">	<span class="keyword">var</span> num2 <span class="keyword">int</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">// num1和num2类型不同，相互赋值需强制转换</span></span><br><span class="line">	num1 = <span class="number">40</span></span><br><span class="line">	num2 = <span class="keyword">int</span>(num1)</span><br><span class="line"></span><br><span class="line">	fmt.Println(num1, num2)</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 这时myFun就是这个类型func(int, int) int</span></span><br><span class="line">	<span class="keyword">type</span> myFunType <span class="function"><span class="keyword">func</span><span class="params">(<span class="keyword">int</span>, <span class="keyword">int</span>)</span> <span class="title">int</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">&#125;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>支持对函数返回值命名</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">getSumAndSub</span><span class="params">(n1 <span class="keyword">int</span>, n2 <span class="keyword">int</span>)</span> <span class="params">(sum <span class="keyword">int</span>, sub <span class="keyword">int</span>)</span></span> &#123;</span><br><span class="line">	sum = n1 + n2</span><br><span class="line">	sub = n1 - n2</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 不写变量也会默认按照sum, sub的顺序进行返回</span></span><br><span class="line">	<span class="keyword">return</span> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>Go支持可变参数</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 支持0到多个参数</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">sum</span><span class="params">(args... <span class="keyword">int</span>)</span> <span class="title">sum</span> <span class="title">int</span></span> &#123;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 支持1到多个参数</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">sum</span><span class="params">(n1 <span class="keyword">int</span>, args... <span class="keyword">int</span>)</span> <span class="title">sum</span> <span class="title">int</span></span> &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ol>
<p>说明：<br>（1）args是slice切片，通过args[index]可以访问到各个值。<br>（2）如果一个函数的形参列表中有可变参数，则可变参数要放在形参之后<br>案例演示：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 可变参数的使用</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">sum</span><span class="params">(n1 <span class="keyword">int</span>, args ...<span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line">	sum := n1</span><br><span class="line">	<span class="comment">// 遍历args</span></span><br><span class="line">	<span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="built_in">len</span>(args); i++ &#123;</span><br><span class="line">		sum += args[i]</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> sum</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	res := sum(<span class="number">10</span>, <span class="number">0</span>, <span class="number">-1</span>, <span class="number">90</span>, <span class="number">10</span>)</span><br><span class="line">	fmt.Println(res)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="6-16-init函数"><a href="#6-16-init函数" class="headerlink" title="6.16 init函数"></a>6.16 init函数</h2><h3 id="6-16-1-函数说明"><a href="#6-16-1-函数说明" class="headerlink" title="6.16.1 函数说明"></a>6.16.1 函数说明</h3><p>init函数会在main函数调用前被程序调用。<br>通常可以在init函数中完成初始化工作</p>
<h3 id="6-16-2-细节说明"><a href="#6-16-2-细节说明" class="headerlink" title="6.16.2 细节说明"></a>6.16.2 细节说明</h3><ol>
<li><p>如果一个文件中包含去全局变量定义，init函数和main函数，则执行的流程是：<br>变量定义<code>-&gt;</code>init函数<code>-&gt;</code>main函数<br>案例演示：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> age = test()</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">test</span><span class="params">()</span> <span class="title">int</span></span> &#123;</span><br><span class="line">	fmt.Println(<span class="string">"test()..."</span>)</span><br><span class="line">	<span class="keyword">return</span> <span class="number">90</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">init</span><span class="params">()</span></span> &#123;</span><br><span class="line">	fmt.Println(<span class="string">"init()..."</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	fmt.Println(<span class="string">"main()...\nage="</span>, age)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 程序输出</span></span><br><span class="line">test()...</span><br><span class="line">init()...</span><br><span class="line">main()...</span><br><span class="line">age= <span class="number">90</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>init函数最要的工作是完成初始化工作<br>具有init函数的包，在包被import的时候，即执行了init函数</p>
</li>
<li><p>思考：如果mian.go和import1.go都含有变量定义、init函数时，执行的流程是怎么样的？<br>&emsp;&emsp;过程：import1的变量定义<code>-&gt;</code>import1的init函数<code>-&gt;</code>main中的变量定义<code>-&gt;</code>main中的init函数<code>-&gt;</code>main中的main()函数<br>&emsp;&emsp;如果import1包中也引用其他的包，则两包之间的执行流程同理。</p>
</li>
</ol>
<h2 id="6-17-匿名函数"><a href="#6-17-匿名函数" class="headerlink" title="6.17 匿名函数"></a>6.17 匿名函数</h2><h3 id="6-17-2-匿名函数使用方式1"><a href="#6-17-2-匿名函数使用方式1" class="headerlink" title="6.17.2 匿名函数使用方式1"></a>6.17.2 匿名函数使用方式1</h3><p>在定义匿名函数时就直接调用，这种方式匿名函数只能使用一次</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">// 案例演示，求两个数的和，使用匿名函数的方式完成</span></span><br><span class="line">	result1 := <span class="function"><span class="keyword">func</span><span class="params">(n1 <span class="keyword">int</span>, n2 <span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line">		<span class="keyword">return</span> n1 + n2</span><br><span class="line">	&#125;(<span class="number">10</span>, <span class="number">20</span>)</span><br><span class="line"></span><br><span class="line">	fmt.Println(result1)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 输出</span></span><br><span class="line"><span class="number">30</span></span><br></pre></td></tr></table></figure>

<h3 id="6-17-3-匿名函数使用方式2"><a href="#6-17-3-匿名函数使用方式2" class="headerlink" title="6.17.3 匿名函数使用方式2"></a>6.17.3 匿名函数使用方式2</h3><p>将匿名函数赋给一个变量（函数变量），在通过该变量来调用匿名函数</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">// 案例演示，将匿名函数赋给变量</span></span><br><span class="line">	a := <span class="function"><span class="keyword">func</span><span class="params">(n1, n2 <span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line">		<span class="keyword">return</span> n1 - n2</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	result := a(<span class="number">10</span>, <span class="number">20</span>)</span><br><span class="line">	fmt.Println(result)</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 输出</span></span><br><span class="line"><span class="number">-10</span></span><br></pre></td></tr></table></figure>

<h3 id="6-17-3-全局匿名函数"><a href="#6-17-3-全局匿名函数" class="headerlink" title="6.17.3 全局匿名函数"></a>6.17.3 全局匿名函数</h3><p>若果将匿名函数赋给一个全局便令，那么这个匿名函数，就成为一个全局变量，可以在程序有效。</p>
<h2 id="6-18-闭包"><a href="#6-18-闭包" class="headerlink" title="6.18 闭包"></a>6.18 闭包</h2><h3 id="6-18-1-介绍"><a href="#6-18-1-介绍" class="headerlink" title="6.18.1 介绍"></a>6.18.1 介绍</h3><p>闭包就是一个<code>函数</code>与其<code>相关的引用环境</code>组合的一个整体（实体）</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 累加器</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">AddUpper</span><span class="params">()</span> <span class="title">func</span><span class="params">(<span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> n <span class="keyword">int</span> = <span class="number">10</span></span><br><span class="line">	<span class="keyword">return</span> <span class="function"><span class="keyword">func</span><span class="params">(x <span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line">		n = n + x</span><br><span class="line">		<span class="keyword">return</span> n</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">//使用前面的代码</span></span><br><span class="line">	f := AddUpper()</span><br><span class="line">	fmt.Println(f(<span class="number">1</span>)) <span class="comment">// 11</span></span><br><span class="line">	fmt.Println(f(<span class="number">2</span>)) <span class="comment">// 12</span></span><br><span class="line">	fmt.Println(f(<span class="number">3</span>)) <span class="comment">// 13</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>对上面代码的总结和说明</p>
<ol>
<li><p>AddUpper是一个函数，返回的数据类型是func (int) int</p>
</li>
<li><p>闭包的说明</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> n <span class="keyword">int</span> = <span class="number">10</span></span><br><span class="line"><span class="keyword">return</span> <span class="function"><span class="keyword">func</span><span class="params">(x <span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line">	n = n + x</span><br><span class="line">	<span class="keyword">return</span> n</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p> 返回的是一个匿名函数，但是这个匿名函数引用到函数外的n，因此这个匿名函数就和n形成一个整体，构成闭包。</p>
</li>
<li><p>可以这样理解：闭包是类，函数是操作，n是字段。函数和它使用到n构成闭包。</p>
</li>
<li><p>当我们反复的调用f函数时，因为n是初始化一次，因此每调用一次就进行累计</p>
</li>
<li><p>我们要搞清楚闭包的关键，就是要分析出返回的函数它使用（引用）到哪些变量，因为和函数和他引用到的变量共同构成闭包</p>
</li>
</ol>
<h2 id="6-19-函数的defer"><a href="#6-19-函数的defer" class="headerlink" title="6.19 函数的defer"></a>6.19 函数的defer</h2><h3 id="6-19-1-快速入门案例"><a href="#6-19-1-快速入门案例" class="headerlink" title="6.19.1 快速入门案例"></a>6.19.1 快速入门案例</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">sum</span><span class="params">(n1 <span class="keyword">int</span>, n2 <span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line">	<span class="comment">// 当执行到defer时，暂时不执行，会将defer后面的语句压入到独立的栈（defer栈）</span></span><br><span class="line">	<span class="comment">// 当函数执行完成后，在从defer栈，按照陷入后出的方式出栈、执行</span></span><br><span class="line">	<span class="keyword">defer</span> fmt.Println(<span class="string">"ok1 n1 = "</span>, n1) <span class="comment">// 3</span></span><br><span class="line">	<span class="keyword">defer</span> fmt.Println(<span class="string">"ok2 n2 = "</span>, n2) <span class="comment">// 2</span></span><br><span class="line">	res := n1 + n2</span><br><span class="line">	fmt.Println(<span class="string">"ok3 res = "</span>, res) <span class="comment">// 1</span></span><br><span class="line">	<span class="keyword">return</span> res</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	res := sum(<span class="number">10</span>, <span class="number">20</span>)</span><br><span class="line">	fmt.Println(<span class="string">"res = "</span>, res) <span class="comment">// 4</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 输出</span></span><br><span class="line">ok3 res =  <span class="number">30</span></span><br><span class="line">ok2 n2 =  <span class="number">20</span></span><br><span class="line">ok1 n1 =  <span class="number">10</span></span><br><span class="line">res =  <span class="number">30</span></span><br></pre></td></tr></table></figure>

<h3 id="6-19-2-defer的细节说明"><a href="#6-19-2-defer的细节说明" class="headerlink" title="6.19.2 defer的细节说明"></a>6.19.2 defer的细节说明</h3><ol start="3">
<li>在defer将语句放入到栈是，也会将相关的值拷贝同时入栈。<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">sum</span><span class="params">(n1 <span class="keyword">int</span>, n2 <span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line">	<span class="comment">// 当执行到defer时，暂时不执行，会将defer后面的语句压入到独立的栈（defer栈）</span></span><br><span class="line">	<span class="comment">// 当函数执行完成后，在从defer栈，按照陷入后出的方式出栈、执行</span></span><br><span class="line">	<span class="keyword">defer</span> fmt.Println(<span class="string">"ok1 n1 = "</span>, n1) <span class="comment">// 3</span></span><br><span class="line">	<span class="keyword">defer</span> fmt.Println(<span class="string">"ok2 n2 = "</span>, n2) <span class="comment">// 2</span></span><br><span class="line">	n1++ <span class="comment">// 输出：n1 = 10</span></span><br><span class="line">	n2++ <span class="comment">// 输出：n2 = 20</span></span><br><span class="line">	res := n1 + n2</span><br><span class="line">	fmt.Println(<span class="string">"ok3 res = "</span>, res) <span class="comment">// 1 输出：res = 32</span></span><br><span class="line">	<span class="keyword">return</span> res</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	res := sum(<span class="number">10</span>, <span class="number">20</span>)</span><br><span class="line">	fmt.Println(<span class="string">"res = "</span>, res) <span class="comment">// 4 res = 32</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 输出</span></span><br><span class="line">ok3 res =  <span class="number">32</span></span><br><span class="line">ok2 n2 =  <span class="number">20</span></span><br><span class="line">ok1 n1 =  <span class="number">10</span></span><br><span class="line">res =  <span class="number">32</span></span><br></pre></td></tr></table></figure>

</li>
</ol>
<h3 id="6-19-3-defer的最佳实践"><a href="#6-19-3-defer的最佳实践" class="headerlink" title="6.19.3 defer的最佳实践"></a>6.19.3 defer的最佳实践</h3><p>defer最主要的价值是在，当函数执行完毕后，可以及时的释放函数创建的资源。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">test</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">// 关闭资源</span></span><br><span class="line">	file = openfile(文件名)</span><br><span class="line">	<span class="keyword">defer</span> file.<span class="built_in">close</span>()</span><br><span class="line">	<span class="comment">// 其他代码</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">test</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">// 释放数据库资源</span></span><br><span class="line">	connect = openDatabase()</span><br><span class="line">	<span class="keyword">defer</span> connect.<span class="built_in">close</span>()</span><br><span class="line">	<span class="comment">// 其他代码</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol>
<li><p>在golang编程中的通常做法是，创建资源后，比如（打开了文件，获取了数据库的连接，或者是锁资源），可以执行defer file.close() defer connect.close()</p>
</li>
<li><p>在defer后，可以继续使用创建资源</p>
</li>
<li><p>当函数完毕后，系统会一次从defer栈中，取出语句，关闭资源</p>
</li>
<li><p>这种机制，非常简洁，程序员不用再为在什么时候关闭资源而烦心</p>
</li>
</ol>
<h2 id="6-20-值传递和引用传递"><a href="#6-20-值传递和引用传递" class="headerlink" title="6.20 值传递和引用传递"></a>6.20 值传递和引用传递</h2><h3 id="6-20-3-值类型和引用类型的分类"><a href="#6-20-3-值类型和引用类型的分类" class="headerlink" title="6.20.3 值类型和引用类型的分类"></a>6.20.3 值类型和引用类型的分类</h3><ol>
<li><p>值类型：基本数据类型 <code>int系列</code>、<code>float系列</code>、<code>bool</code>、<code>string</code>、<code>数组和结构体struct</code></p>
</li>
<li><p>引用类型：<code>指针</code>、<code>slice切片</code>、<code>map</code>、<code>管道channel</code>、<code>interface</code>等都是引用类型</p>
</li>
</ol>
<h2 id="6-21-变量作用域"><a href="#6-21-变量作用域" class="headerlink" title="6.21 变量作用域"></a>6.21 变量作用域</h2><ol>
<li><p>函数内部声明/定义的变量就是局部变量</p>
</li>
<li><p>函数外部声明/定义的变量叫全局变量，作用域在整个包都有效，如果其首字母答谢，则作用在整个程序有效</p>
</li>
<li><p>如果变量是在一个代码块，比如for/if中，那么这个变量是在这个代码块中有效</p>
</li>
<li><p>编译器采用就近原则，选取最小的定义的变量执行</p>
</li>
<li><p>全局变量不可在函数体外赋值<br>代码陷阱：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> Age <span class="keyword">int</span> = <span class="number">20</span></span><br><span class="line">Name := <span class="string">"tom"</span>	<span class="comment">// 错误！</span></span><br><span class="line"><span class="comment">// "Name := "tom" "等价于var Name string Name = "tom"</span></span><br><span class="line"><span class="comment">// 变量定义与初始化可以在函数体外执行，赋值不行</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	fmt.Println(<span class="string">"name"</span>, Name)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h2 id="6-23-字符串中常用的系统函数"><a href="#6-23-字符串中常用的系统函数" class="headerlink" title="6.23 字符串中常用的系统函数"></a>6.23 字符串中常用的系统函数</h2><ol>
<li><p>统计字符串的长度，按字节<code>len(str)</code><br>utf-8编码中，字母和数字占一个字节，汉字占三个字节</p>
</li>
<li><p>字符串遍历，同时处理中文的问题<code>r := []rune(str)</code><br>将字符串转换成rune的切片可解决</p>
</li>
<li><p>字符串 转 整数<code>n,err := strconv.Atoi(&quot;12&quot;)</code></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">n, err := strconv.Atoi(<span class="string">"123"</span>)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">	fmt.Println(<span class="string">"转换错误"</span>, err)</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">	fmt.Println(<span class="string">"转成的结果是"</span>, n)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>整数 转 字符串：<code>strconv.Itoa(12345)</code></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">str = strconv.Itoa(<span class="number">12345</span>)</span><br><span class="line">fmt.Printf(<span class="string">"str = %v, str = %T"</span>, str, str)</span><br></pre></td></tr></table></figure>
</li>
<li><p>字符串 转 <code>[]byte</code>：<code>[]byte(&quot;hello go&quot;)</code></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> bytes = []<span class="keyword">byte</span>(<span class="string">"hello go"</span>)</span><br><span class="line">fmt.Printf(<span class="string">"bytes=%v\n"</span>, bytes)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 输出</span></span><br><span class="line">bytes=[<span class="number">104</span> <span class="number">101</span> <span class="number">108</span> <span class="number">108</span> <span class="number">111</span> <span class="number">32</span> <span class="number">103</span> <span class="number">111</span>]</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>[]byte</code> 转 字符串：<code>str = string([byte{97, 98, 99}])</code></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">str = <span class="keyword">string</span>([]<span class="keyword">byte</span>&#123;<span class="number">97</span>, <span class="number">98</span>, <span class="number">99</span>&#125;)</span><br><span class="line">fmt.Printf(<span class="string">"str=%v\n"</span>, str)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 输出</span></span><br><span class="line">str=abc</span><br></pre></td></tr></table></figure>
</li>
<li><p>10进制 转 2、8、16进制：<code>str = strconv.FormatInt(123, 2)</code>，返回对应的字符串 2可更换为8、16</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">str = strconv.FormatInt(123, 2)</span><br><span class="line">fmt.Printf(&quot;123对应的2进制是=%v\n&quot;, str)</span><br><span class="line">str = strconv.FormatInt(123, 16)</span><br><span class="line">fmt.Printf(&quot;123对应的16进制是=%v\n&quot;, str)</span><br><span class="line"></span><br><span class="line">// 输出</span><br><span class="line">123对应的2进制是=1111011</span><br><span class="line">123对应的16进制是=7b</span><br></pre></td></tr></table></figure>
</li>
<li><p>查找子串是否在指定的字符串中：<code>strings.Contains(&quot;seafood&quot;, &quot;foo&quot;)</code>返回<code>bool</code></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">b := strings.Contains(<span class="string">"seafood"</span>, <span class="string">"foo"</span>)</span><br><span class="line">fmt.Printf(<span class="string">"b=%v\n"</span>, b)</span><br><span class="line">b = strings.Contains(<span class="string">"seafood"</span>, <span class="string">"foo"</span>)</span><br><span class="line">fmt.Printf(<span class="string">"b=%v\n"</span>, b)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 输出</span></span><br><span class="line">b=<span class="literal">true</span></span><br><span class="line">b=<span class="literal">false</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>统计一个字符串中有几个指定的子串：<code>strings.Count(&quot;ceheese&quot;, &quot;e&quot;)</code>返回<code>int</code></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">num := strings.Count(<span class="string">"ceheese"</span>, <span class="string">"e"</span>)</span><br><span class="line">fmt.Printf(<span class="string">"num=%v"</span>, num)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 输出</span></span><br><span class="line">num=<span class="number">4</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>不区分大小写的字符串比较（==是区分字母大小写的）：<code>strings.EqualFold(&quot;abc&quot;, &quot;Abc&quot;)</code> 返回<code>bool</code></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">b := strings.EqualFold(<span class="string">"abc"</span>, <span class="string">"Abc"</span>)</span><br><span class="line">fmt.Println(<span class="string">"b="</span>, b)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 输出</span></span><br><span class="line">b= <span class="literal">true</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>返回子串在字符串中第一次出现的index值，如果没有返回-1：<code>stirngs.Index(&quot;NLT_abc&quot;, &quot;abc&quot;)</code>返回<code>int</code></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">index := strings.Index(<span class="string">"NLT_abc"</span>, <span class="string">"abc"</span>)</span><br><span class="line">fmt.Printf(<span class="string">"index=%v\n"</span>, index)</span><br><span class="line">index = strings.Index(<span class="string">"NLT_abc"</span>, <span class="string">"hello"</span>)</span><br><span class="line">fmt.Printf(<span class="string">"index=%v\n"</span>, index)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 输出</span></span><br><span class="line">index=<span class="number">4</span></span><br><span class="line">index=<span class="number">-1</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>返回子串在字符串最后出现的index，如果没有返回-1：<code>strings.LastIndex(&quot;go golang&quot;, &quot;go&quot;)</code>返回<code>int</code></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">index = strings.LastIndex(<span class="string">"go golang"</span>, <span class="keyword">go</span>)</span><br><span class="line">fmt.Printf(<span class="string">"index=%v"</span>, index)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 输出</span></span><br><span class="line">index=<span class="number">3</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>将指定的子串替换成另一个子串：<code>strings.Replace(&quot;go go hello&quot;, &quot;go&quot;, &quot;北京&quot;, n)</code>可以指定替换几个，如果n=-1表示全部替换</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">str := strings.Replace(<span class="string">"go go hello"</span>, <span class="string">"go"</span>，<span class="string">"北京"</span>, <span class="number">1</span>)</span><br><span class="line">fmt.Printf(<span class="string">"str=%v\n"</span>, str)</span><br><span class="line">str = strings.Replace(<span class="string">"go go hello"</span>, <span class="string">"go"</span>，<span class="string">"北京"</span>, <span class="number">-1</span>)</span><br><span class="line">fmt.Printf(<span class="string">"str=%v\n"</span>, str)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 输出</span></span><br><span class="line">str=北京 <span class="keyword">go</span> hello</span><br><span class="line">str=北京 北京 hello</span><br></pre></td></tr></table></figure>
</li>
<li><p>按照指定的某个字符，为分割标识，将一个字符串拆分成字符串数组：<code>strings.Split(&quot;hello,world,ok&quot;, &quot;,&quot;)</code></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">strArr := strings.Split(<span class="string">"hello,world,ok"</span>, <span class="string">","</span>)</span><br><span class="line">fmt.Printf(<span class="string">"strArr=%v\n"</span>, strArr)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 输出</span></span><br><span class="line">strArr=[hello world ok]</span><br></pre></td></tr></table></figure>
</li>
<li><p>将字符串的字母进行大小写的转换：<br>(1)&ensp;<code>strings.ToLower(&quot;Go&quot;)</code>-&gt;<code>go</code></p>
<p>(2)&ensp;<code>strings.ToUpper(&quot;Go&quot;)</code>-&gt;<code>GO</code></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">str := strings.ToLower(<span class="string">"GolAnG hEllo"</span>)</span><br><span class="line">fmt.Printf(<span class="string">"str=%v\n"</span>, str)</span><br><span class="line">str = strings.ToUpper(<span class="string">"GolAnG hEllo"</span>)</span><br><span class="line">fmt.Printf(<span class="string">"str=%v\n"</span>, str)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 输出</span></span><br><span class="line">str=golang hello</span><br><span class="line">str=GOLANG HELLO</span><br></pre></td></tr></table></figure>
</li>
<li><p>将字符串左右两边的空格去掉：<code>strings.TrimSpace(&quot;  tn a lone gopher ntrn   &quot;)</code></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">str := strings.TrimSpace(<span class="string">"  tn a lone gopher ntrn   "</span>)</span><br><span class="line">fmt.Printf(<span class="string">"str=%v\n"</span>, str)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 输出</span></span><br><span class="line">str=<span class="string">"tn a lone gopher ntrn"</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>将字符串左右两边指定的字符串去掉：<code>strings.Trim(&quot;! hello! &quot;, &quot; !&quot;)</code><br>这里是将左右两边的空格和叹号去掉</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">str := strings.Trim(<span class="string">"! hello! "</span>, <span class="string">" !"</span>)</span><br><span class="line">fmt.Printf(<span class="string">"str=%q\n"</span>, str)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 输出</span></span><br><span class="line">str=<span class="string">"hello"</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>将左边的指定字符去掉：<code>strings.TrimLeft(&quot;! hello! &quot;, &quot; !&quot;)</code><br>这里是将左两边的空格和叹号去掉</p>
</li>
<li><p>将右边的指定字符去掉：<code>strings.TrimRight(&quot;! hello! &quot;, &quot; !&quot;)</code><br>这里是将右两边的空格和叹号去掉</p>
</li>
<li><p>判断字符串是否以指定的字符串开头：<br><code>strings.HasPrefix(&quot;ftp://192.168.10.1&quot;, &quot;ftp&quot;)</code></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">b := strings.HasPrefix(<span class="string">"ftp://192.168.10.1"</span>, <span class="string">"ftp"</span>)</span><br><span class="line">fmt.Printf(<span class="string">"b=%v\n"</span>, b)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 输出</span></span><br><span class="line">b=<span class="literal">true</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>判断字符串是否以指定的字符串结束：<br><code>strings.HasSuffix(&quot;NLT_abc.jpg&quot;, &quot;abc&quot;)</code></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">b := strings.HasSuffix(<span class="string">"NLT_abc.jpg"</span>, <span class="string">"abc"</span>)</span><br><span class="line">fmt.Printf(<span class="string">"b=%v\n"</span>, b)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 输出</span></span><br><span class="line">b=<span class="literal">false</span></span><br></pre></td></tr></table></figure>

</li>
</ol>
<h2 id="6-24-时间和日期相关的函数"><a href="#6-24-时间和日期相关的函数" class="headerlink" title="6.24 时间和日期相关的函数"></a>6.24 时间和日期相关的函数</h2><h3 id="6-24-1-基本的介绍"><a href="#6-24-1-基本的介绍" class="headerlink" title="6.24.1 基本的介绍"></a>6.24.1 基本的介绍</h3><p>说明：在编程中，程序员会经常使用到日期相关的函数，比如：统计某段代码执行花费的时间等等。</p>
<ol>
<li><p>时间和日期相关的函数需要导入time包</p>
</li>
<li><p><code>time.Time</code>类型，用于表示时间</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">now := time.Now()</span><br><span class="line">fmt.Printf(<span class="string">"now=%v\nnow type = %T"</span>, now, now)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 输出</span></span><br><span class="line">now=<span class="number">2019</span><span class="number">-09</span><span class="number">-26</span> <span class="number">16</span>:<span class="number">21</span>:<span class="number">33.5572177</span> +<span class="number">0800</span> CST m=+<span class="number">0.003990301</span></span><br><span class="line">now <span class="keyword">type</span> = time.Time</span><br></pre></td></tr></table></figure>
</li>
<li><p>如何获取到其它相关日期</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 通过之前的now可以获取到年月日，时分秒</span></span><br><span class="line">fmt.Printf(<span class="string">"年=%v\n"</span>, now.Year())</span><br><span class="line">fmt.Printf(<span class="string">"月=%v\n"</span>, now.Month())</span><br><span class="line">fmt.Printf(<span class="string">"月=%v\n"</span>, <span class="keyword">int</span>(now.Month())) <span class="comment">// 将月份转换成数字</span></span><br><span class="line">fmt.Printf(<span class="string">"日=%v\n"</span>, now.Day())</span><br><span class="line">fmt.Printf(<span class="string">"时=%v\n"</span>, now.Hour())</span><br><span class="line">fmt.Printf(<span class="string">"分=%v\n"</span>, now.Minute())</span><br><span class="line">fmt.Printf(<span class="string">"秒=%v\n"</span>, now.Second())</span><br><span class="line"></span><br><span class="line"><span class="comment">// 输出</span></span><br><span class="line">年=<span class="number">2019</span></span><br><span class="line">月=September</span><br><span class="line">月=<span class="number">9</span></span><br><span class="line">日=<span class="number">26</span></span><br><span class="line">时=<span class="number">16</span></span><br><span class="line">分=<span class="number">38</span></span><br><span class="line">秒=<span class="number">18</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>格式化日期时间<br>（1）使用Printf或者Sprintf()</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 格式化时间</span></span><br><span class="line">fmt.Printf(<span class="string">"当前年月日 %d-%d-%d %d:%d:%d\n"</span>, now.Year(),</span><br><span class="line">	now.Month(), now.Day(), now.Hour(), now.Minute(), now.Second())</span><br><span class="line"></span><br><span class="line">dateStr := fmt.Sprintf(<span class="string">"当前年月日 %d-%d-%d %d:%d:%d\n"</span>, now.Year(),</span><br><span class="line">	now.Month(), now.Day(), now.Hour(), now.Minute(), now.Second())</span><br><span class="line">fmt.Printf(<span class="string">"dateStr = %v\n"</span>, dateStr)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 输出</span></span><br><span class="line">当前年月日 <span class="number">2019</span><span class="number">-9</span><span class="number">-26</span> <span class="number">16</span>:<span class="number">38</span>:<span class="number">18</span></span><br><span class="line">当前年月日 <span class="number">2019</span><span class="number">-9</span><span class="number">-26</span> <span class="number">16</span>:<span class="number">38</span>:<span class="number">18</span></span><br></pre></td></tr></table></figure>

<p> （2）使用time.Format()方法完成<br> <code>2006-01-02 15:04:05</code>这个字符串的各个<code>数字是固定的</code>，<code>必须这样写</code><br> <code>2006-01-02 15:04:05</code>这个字符串中的各个数字可以<code>自由组合</code>，这样可以<code>按照程序需求来返回时间、日期</code></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">fmt.Printf(now.Format(<span class="string">"2006-01-02 15:04:05"</span>))</span><br><span class="line">fmt.Println()</span><br><span class="line">fmt.Printf(now.Format(<span class="string">"2006-01-02"</span>))</span><br><span class="line">fmt.Println()</span><br><span class="line">fmt.Printf(now.Format(<span class="string">"15:04:05"</span>))</span><br><span class="line">fmt.Println()</span><br><span class="line"></span><br><span class="line"><span class="comment">// 输出</span></span><br><span class="line"><span class="number">2019</span><span class="number">-09</span><span class="number">-26</span> <span class="number">16</span>:<span class="number">48</span>:<span class="number">38</span></span><br><span class="line"><span class="number">2019</span><span class="number">-09</span><span class="number">-26</span></span><br><span class="line"><span class="number">16</span>:<span class="number">48</span>:<span class="number">38</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>时间的常量</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">cnost &#123;</span><br><span class="line">	Nanosecond Duration = <span class="number">1</span> <span class="comment">// 纳秒 </span></span><br><span class="line">	Microsecond	= <span class="number">1000</span> * Nanosecond <span class="comment">// 微妙</span></span><br><span class="line">	Millsecond	= <span class="number">1000</span> * Microsecond <span class="comment">// 毫秒</span></span><br><span class="line">	Second 		= <span class="number">1000</span> * Millsecond <span class="comment">// 秒</span></span><br><span class="line">	Minute 		= <span class="number">60</span> * Second <span class="comment">// 分</span></span><br><span class="line">	Hour 		= <span class="number">60</span> * Minute <span class="comment">// 时</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p> 常量的作用是：<strong>在程序货获取指定时间单位的时间，比如想得到100毫秒</strong><br> 100 * time.Millsecond</p>
</li>
<li><p>结合Sleep来使用以下时间常量</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 需求： 每隔1秒钟打印一个数字，打印到100时就退出</span></span><br><span class="line">	<span class="comment">// 需求2：每隔0.1秒钟打印一个数字，打印到100时就退出</span></span><br><span class="line">	now := time.Now()</span><br><span class="line">	fmt.Printf(<span class="string">"now=%v\nnow type = %T\n"</span>, now, now)</span><br><span class="line"></span><br><span class="line">	i := <span class="number">0</span></span><br><span class="line">	<span class="keyword">for</span> &#123;</span><br><span class="line">		i++</span><br><span class="line">		fmt.Println(i)</span><br><span class="line">		<span class="comment">// 休眠</span></span><br><span class="line">		time.Sleep(<span class="number">100</span> * time.Millisecond)</span><br><span class="line">		<span class="keyword">if</span> i == <span class="number">100</span> &#123;</span><br><span class="line">			<span class="keyword">break</span></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	i = <span class="number">0</span></span><br><span class="line">	<span class="keyword">for</span> &#123;</span><br><span class="line">		i++</span><br><span class="line">		fmt.Println(i)</span><br><span class="line">		<span class="comment">// 休眠</span></span><br><span class="line">		time.Sleep(time.Second)</span><br><span class="line">		<span class="keyword">if</span> i == <span class="number">100</span> &#123;</span><br><span class="line">			<span class="keyword">break</span></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>time的Unix和UnixNano的方法<br>（1）<code>func (Time)Unix</code></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(t time)</span> <span class="title">Unix</span><span class="params">()</span> <span class="title">int64</span></span></span><br><span class="line"><span class="function"><span class="title">Unix</span>将<span class="title">t</span>表示为<span class="title">Unix</span>时间，即从时间点<span class="title">January</span> 1,1970 <span class="title">UTC</span></span></span><br><span class="line"><span class="function">到时间点<span class="title">t</span>所经过的时间（单位秒）</span></span><br></pre></td></tr></table></figure>

<p> （2）<code>func (Time)UnixNano</code></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(t time)</span> <span class="title">UnixNano</span><span class="params">()</span> <span class="title">int64</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">UnixNano</span>将<span class="title">t</span>表示为<span class="title">Unix</span>时间，即从时间点<span class="title">January</span> 1,1970 <span class="title">UTC</span></span></span><br><span class="line"><span class="function">到时间点<span class="title">t</span>所经过的时间（单位纳秒）。如果纳秒为单位的<span class="title">Unix</span>时间</span></span><br><span class="line"><span class="function">超出了<span class="title">int64</span>能表示的范围，结果是未定义的。主义这就意味着<span class="title">Time</span></span></span><br><span class="line"><span class="function">零值调用<span class="title">UnixNano</span>方法的话，结果是未定义的。</span></span><br></pre></td></tr></table></figure>

 <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Unix和Unixnano的使用</span></span><br><span class="line">fmt.Printf(<span class="string">"Unix时间戳=%v unixnano时间戳=%v"</span>, now.Unix(), now.UnixNano())</span><br><span class="line"></span><br><span class="line"><span class="comment">// 输出</span></span><br><span class="line">Unix时间戳=<span class="number">1569496994</span> unixnano时间戳=<span class="number">1569496994357472600</span></span><br></pre></td></tr></table></figure>

</li>
</ol>
<h3 id="6-24-2-编写一段代码来统计函数test03-执行的时间"><a href="#6-24-2-编写一段代码来统计函数test03-执行的时间" class="headerlink" title="6.24.2 编写一段代码来统计函数test03()执行的时间"></a>6.24.2 编写一段代码来统计函数test03()执行的时间</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">"fmt"</span></span><br><span class="line">	<span class="string">"strconv"</span></span><br><span class="line">	<span class="string">"time"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">test03</span><span class="params">()</span></span> &#123;</span><br><span class="line">	str := <span class="string">""</span></span><br><span class="line">	<span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="number">100000</span>; i++ &#123;</span><br><span class="line">		str += <span class="string">"hello"</span> + strconv.Itoa(i)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	start := time.Now().Unix()</span><br><span class="line">	test03()</span><br><span class="line">	end := time.Now().Unix()</span><br><span class="line">	fmt.Printf(<span class="string">"执行test03（）耗费时间为%v秒\n"</span>, end-start)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 输出</span></span><br><span class="line">执行test03（）耗费时间为<span class="number">6</span>秒</span><br></pre></td></tr></table></figure>

<h2 id="6-25-内置函数"><a href="#6-25-内置函数" class="headerlink" title="6.25 内置函数"></a>6.25 内置函数</h2><p>说明：Golang本身内置的函数，可以直接调用。在官方文档中的builtin包当中。</p>
<ol>
<li><p><code>len()</code>：用来求长度，比如string、array、slice、map、channel</p>
</li>
<li><p><code>new()</code>：用来分配内存，主要用来分配值类型，比如int、float32、struct… 返回的是指针<br>举例说明new()的使用</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">"fmt"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	num1 := <span class="number">100</span></span><br><span class="line">	fmt.Printf(<span class="string">"num1的类型%T，num1的值%v，num1的地址%v\n"</span>,</span><br><span class="line">		num1, num1, &amp;num1)</span><br><span class="line"></span><br><span class="line">	num2 := <span class="built_in">new</span>(<span class="keyword">int</span>)</span><br><span class="line">	*num2 = <span class="number">100</span></span><br><span class="line">	fmt.Printf(<span class="string">"num2的类型%T，num2的值%v，num2的地址%v，num2指针指向的值%v\n"</span>,</span><br><span class="line">		num2, num2, &amp;num2, *num2)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 输出</span></span><br><span class="line">num1的类型<span class="keyword">int</span>，num1的值<span class="number">100</span>，num1的地址<span class="number">0xc000064058</span></span><br><span class="line">num2的类型*<span class="keyword">int</span>，num2的值<span class="number">0xc0000640a0</span>，</span><br><span class="line">	num2的地址<span class="number">0xc00008a020</span>，num2指针指向的值<span class="number">100</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><code>make()</code>：用来分配内存，主要用来分配引用类型，比如chan、map、slice</p>
</li>
</ol>
<h2 id="6-26-错误处理"><a href="#6-26-错误处理" class="headerlink" title="6.26 错误处理"></a>6.26 错误处理</h2><p>Go中错误处理的方式为：defer、panic、recover</p>
<h3 id="6-26-3-使用defer加recover的形式来处理错误"><a href="#6-26-3-使用defer加recover的形式来处理错误" class="headerlink" title="6.26.3 使用defer加recover的形式来处理错误"></a>6.26.3 使用defer加recover的形式来处理错误</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">"fmt"</span></span><br><span class="line">	<span class="string">"time"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">test</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">// 使用defer + recover来捕获和处理异常</span></span><br><span class="line">	<span class="keyword">defer</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">		err := <span class="built_in">recover</span>() <span class="comment">// 内置函数，可以捕获到异常</span></span><br><span class="line">		<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;  <span class="comment">// 说明捕获到错误 </span></span><br><span class="line">		<span class="comment">// if err := recover(); err != nil &#123;同时定义、赋值、判断</span></span><br><span class="line">			fmt.Println(<span class="string">"err="</span>, err)</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;()</span><br><span class="line"></span><br><span class="line">	num1 := <span class="number">10</span></span><br><span class="line">	num2 := <span class="number">0</span></span><br><span class="line">	res := num1 / num2</span><br><span class="line">	fmt.Println(<span class="string">"res="</span>, res)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">// 测试</span></span><br><span class="line">	test()</span><br><span class="line"></span><br><span class="line">	fmt.Println(<span class="string">"test()下面的代码"</span>)</span><br><span class="line">	time.Sleep(time.Second)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 输出</span></span><br><span class="line">err= runtime error: integer divide by zero</span><br><span class="line">test()下面的代码</span><br></pre></td></tr></table></figure>

<h3 id="6-26-4-自定义错误"><a href="#6-26-4-自定义错误" class="headerlink" title="6.26.4 自定义错误"></a>6.26.4 自定义错误</h3><p>使用errors.New和panic内置函数</p>
<ol>
<li><p>errors.New(“错误说明”)，会返回一个error类型的值，表示一个错误</p>
</li>
<li><p>panic内置函数，接收一个Interface{}类型的值（也就是任何值了）作为参数。可以接收error类型的变量，输出错误，并退出程序</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 函数去读取一个配置文件init.conf的信息</span></span><br><span class="line"><span class="comment">// 如果文件名传入不正确，我们就返回一个自定义的错误</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">readConf</span><span class="params">(name <span class="keyword">string</span>)</span> <span class="params">(err error)</span></span> &#123;</span><br><span class="line">	<span class="keyword">if</span> name == <span class="string">"config.ini"</span> &#123;</span><br><span class="line">		<span class="comment">// 读取</span></span><br><span class="line">		<span class="keyword">return</span> <span class="literal">nil</span></span><br><span class="line">	&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">		<span class="comment">// 返回一个自定义错误</span></span><br><span class="line">		<span class="keyword">return</span> errors.New(<span class="string">"读取文件错误.."</span>)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">test02</span><span class="params">()</span></span> &#123;</span><br><span class="line">	err := readConf(<span class="string">"config2.ini"</span>)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		<span class="comment">//如果读文件发送错误，就输出这个错误，并且终止程序</span></span><br><span class="line">		<span class="built_in">panic</span>(err)</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	fmt.Println(<span class="string">"test02()继续执行。。。"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">// 测试自定义错误的使用</span></span><br><span class="line">	test02()</span><br><span class="line">	fmt.Println(<span class="string">"test02()下面的代码"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 输出</span></span><br><span class="line"><span class="comment">// 不报错</span></span><br><span class="line">test02()继续执行。。。</span><br><span class="line">test02()下面的代码</span><br><span class="line"></span><br><span class="line"><span class="comment">// 报错</span></span><br><span class="line"><span class="built_in">panic</span>: 读取文件错误..</span><br><span class="line"></span><br><span class="line">goroutine <span class="number">1</span> [running]:</span><br><span class="line">main.test02()</span><br><span class="line">        .../project06/error/main.<span class="keyword">go</span>:<span class="number">39</span> +<span class="number">0x79</span></span><br><span class="line">main.main()</span><br><span class="line">        .../project06/error/main.<span class="keyword">go</span>:<span class="number">47</span> +<span class="number">0x29</span></span><br></pre></td></tr></table></figure>

</li>
</ol>
<h1 id="7-数组与切片"><a href="#7-数组与切片" class="headerlink" title="7 数组与切片"></a>7 数组与切片</h1><h2 id="7-1-数组"><a href="#7-1-数组" class="headerlink" title="7.1 数组"></a>7.1 数组</h2><p>在Go中，数组是值类型</p>
<h2 id="7-2-使用示例"><a href="#7-2-使用示例" class="headerlink" title="7.2 使用示例"></a>7.2 使用示例</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> hens [<span class="number">6</span>]<span class="keyword">float64</span></span><br><span class="line"></span><br><span class="line">	hens[<span class="number">0</span>] = <span class="number">3.0</span></span><br><span class="line">	hens[<span class="number">1</span>] = <span class="number">5.0</span></span><br><span class="line">	hens[<span class="number">2</span>] = <span class="number">1.0</span></span><br><span class="line">	hens[<span class="number">3</span>] = <span class="number">3.4</span></span><br><span class="line">	hens[<span class="number">4</span>] = <span class="number">2.0</span></span><br><span class="line">	hens[<span class="number">5</span>] = <span class="number">50.0</span></span><br><span class="line">	totalWeight := <span class="number">0.0</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="built_in">len</span>(hens); i++ &#123;</span><br><span class="line">		totalWeight += hens[i]</span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Println(<span class="string">"总体重："</span>, totalWeight)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 输出</span></span><br><span class="line">总体重： <span class="number">64.4</span></span><br></pre></td></tr></table></figure>

<h3 id="7-2-1-四种初始化数组的方法"><a href="#7-2-1-四种初始化数组的方法" class="headerlink" title="7.2.1 四种初始化数组的方法"></a>7.2.1 四种初始化数组的方法</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> numArr01 [<span class="number">3</span>]<span class="keyword">int</span> = [<span class="number">3</span>]<span class="keyword">int</span>&#123;<span class="number">1</span>, <span class="number">3</span>, <span class="number">5</span>&#125;</span><br><span class="line"><span class="keyword">var</span> numArr02 = [<span class="number">3</span>]<span class="keyword">int</span>&#123;<span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>&#125;</span><br><span class="line"><span class="keyword">var</span> numArr03 = [...]<span class="keyword">int</span>&#123;<span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>&#125;</span><br><span class="line"><span class="comment">// 按下标位置进行赋值</span></span><br><span class="line"><span class="keyword">var</span> numArr04 = [...]<span class="keyword">int</span>&#123;<span class="number">1</span>:<span class="number">800</span>, <span class="number">0</span>:<span class="number">900</span>, <span class="number">2</span>:<span class="number">999</span>&#125;</span><br></pre></td></tr></table></figure>

<h2 id="7-3-数组的遍历"><a href="#7-3-数组的遍历" class="headerlink" title="7.3 数组的遍历"></a>7.3 数组的遍历</h2><h3 id="7-3-2-for-range遍历"><a href="#7-3-2-for-range遍历" class="headerlink" title="7.3.2 for-range遍历"></a>7.3.2 for-range遍历</h3><p><strong>for-range的基本语法</strong></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> inde, value := <span class="keyword">range</span> array01 &#123;</span><br><span class="line">	...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>说明：</p>
<ol>
<li><p>第一个返回值index是数组的下标</p>
</li>
<li><p>第二个value是该下标位置的值</p>
</li>
<li><p>他们都是仅在for循环内部可见的局部变量</p>
</li>
<li><p>遍历数组元素的时候，如果不想使用下标index，可以直接把下标index标为下划线<code>_</code></p>
</li>
<li><p>index和value的名称不是固定的、即程序员可以自行制定，一般命为index和value</p>
</li>
</ol>
<p><strong>for-range的案例</strong></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> heroes [<span class="number">3</span>]<span class="keyword">string</span> = [<span class="number">3</span>]<span class="keyword">string</span>&#123;<span class="string">"宋江"</span>, <span class="string">"吴用"</span>, <span class="string">"卢俊义"</span>&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> index, value := <span class="keyword">range</span> heroes &#123;</span><br><span class="line">		fmt.Printf(<span class="string">"i=%v v=%v\n"</span>, index, value)</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> _, value := <span class="keyword">range</span> heroes &#123;</span><br><span class="line">		fmt.Printf(<span class="string">"元素的值=%v\n"</span>, value)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 输出</span></span><br><span class="line">i=<span class="number">0</span> v=宋江</span><br><span class="line">i=<span class="number">1</span> v=吴用</span><br><span class="line">i=<span class="number">2</span> v=卢俊义</span><br><span class="line">元素的值=宋江</span><br><span class="line">元素的值=吴用</span><br><span class="line">元素的值=卢俊义</span><br></pre></td></tr></table></figure>

<h2 id="7-7-数组使用的注意事项和细节"><a href="#7-7-数组使用的注意事项和细节" class="headerlink" title="7.7 数组使用的注意事项和细节"></a>7.7 数组使用的注意事项和细节</h2><ol>
<li><p>数组是多个相同类型数据的组合，一个数组一旦声明/定义了，其长度是固定的，不能动态变化</p>
</li>
<li><p>var arr []int 这时arr是一个slice切片，并不是数组</p>
</li>
<li><p>数组中的元素可以是任意数据类型，包括是值类型和引用类型，但不能混用</p>
</li>
<li><p>数组创建之后如果没有赋值，有默认值（零值）<br>数值类型数组：    默认值为0<br>字符串数组：        默认值为””<br>bool数组：        默认值为false</p>
</li>
<li><p>使用数组的步骤<br>（1）声明数组并开辟空间<br>（2）给数组各个元素赋值（默认零值）<br>（3）使用数组</p>
</li>
<li><p>数组的下标是从0开始的</p>
</li>
<li><p>数组下标必须在指定范围内使用，否则报<code>painc</code>数组越界，比如<code>var arr[5]int</code>，则有效下标为0-4</p>
</li>
<li><p>Go的数组属于值类型，在默认情况下是值传递，因此会进行值拷贝。<strong>数组间不会互相影响。</strong></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 函数参数中数组必须写为[n]&lt;type&gt;</span></span><br><span class="line"><span class="comment">// n为数组长度，type为数组值类型</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">test</span><span class="params">(arr [3]<span class="keyword">int</span>)</span></span> &#123; </span><br><span class="line">	arr[<span class="number">0</span>] = <span class="number">300</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 传递数组地址时同样要遵循该原则</span></span><br><span class="line"><span class="comment">// 例如：*[n]&lt;type&gt;</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">test02</span><span class="params">(arr *[3]<span class="keyword">int</span>)</span></span> &#123;</span><br><span class="line">	arr[<span class="number">0</span>] = <span class="number">300</span></span><br><span class="line">	<span class="comment">// (*arr)[0] = 300等价</span></span><br><span class="line">	<span class="comment">// 原理待解决</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	arr := [<span class="number">3</span>]<span class="keyword">int</span>&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>&#125;</span><br><span class="line">	test(arr)</span><br><span class="line">	fmt.Printf(<span class="string">"arr=%v"</span>, arr)</span><br><span class="line"></span><br><span class="line">	fmt.Println()</span><br><span class="line"></span><br><span class="line">	test02(&amp;arr)</span><br><span class="line">	fmt.Printf(<span class="string">"arr=%v"</span>, arr)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 输出</span></span><br><span class="line">arr=[<span class="number">1</span> <span class="number">2</span> <span class="number">3</span>]</span><br><span class="line">arr=[<span class="number">300</span> <span class="number">2</span> <span class="number">3</span>]</span><br></pre></td></tr></table></figure>
</li>
<li><p>如果想在其他函数中，修改原数组的值，可以使用引用传递（指针）</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 传递数组地址时同样要遵循该原则</span></span><br><span class="line"><span class="comment">// 例如：*[n]&lt;type&gt;</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">test02</span><span class="params">(arr *[3]<span class="keyword">int</span>)</span></span> &#123;</span><br><span class="line">	arr[<span class="number">0</span>] = <span class="number">300</span></span><br><span class="line">	<span class="comment">// (*arr)[0] = 300等价</span></span><br><span class="line">	<span class="comment">// 原理待解决</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	arr := [<span class="number">3</span>]<span class="keyword">int</span>&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>&#125;</span><br><span class="line">	test02(&amp;arr)</span><br><span class="line">	fmt.Printf(<span class="string">"arr=%v"</span>, arr)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 输出</span></span><br><span class="line">arr=[<span class="number">300</span> <span class="number">2</span> <span class="number">3</span>]</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>长度是数组类型的一部分</strong>，在传递函数参数是需要考虑数组的长度</p>
</li>
</ol>
<h3 id="7-8-数组应用案例"><a href="#7-8-数组应用案例" class="headerlink" title="7.8 数组应用案例"></a>7.8 数组应用案例</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 求一个数组的和和平均值，用for-range</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> intArray = [...]<span class="keyword">int</span>&#123;<span class="number">1</span>, <span class="number">-1</span>, <span class="number">9</span>, <span class="number">90</span>, <span class="number">12</span>&#125;</span><br><span class="line">	<span class="keyword">var</span> sumArray <span class="keyword">int</span> = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> _, value := <span class="keyword">range</span> intArray &#123;</span><br><span class="line">		sumArray += value</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// go语言不能自动转换类型</span></span><br><span class="line">	<span class="comment">// 这里计算平均值需要显示的转换为浮点型</span></span><br><span class="line">	fmt.Println(<span class="string">"和为："</span>, sumArray, <span class="string">"平均值为："</span>, </span><br><span class="line">		<span class="keyword">float32</span>(sumArray)/<span class="keyword">float32</span>(<span class="built_in">len</span>(intArray)))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="7-9-切片"><a href="#7-9-切片" class="headerlink" title="7.9 切片"></a>7.9 切片</h2><h3 id="7-9-1-切片的基本介绍"><a href="#7-9-1-切片的基本介绍" class="headerlink" title="7.9.1 切片的基本介绍"></a>7.9.1 切片的基本介绍</h3><ol>
<li><p>切片的英文是slice</p>
</li>
<li><p>切片是数组的一个引用，因此切片是引用类型，在进行传递时，遵守引用传递的机制</p>
</li>
<li><p>切片的使用和数组类型，遍历切片、访问切片的元素和求切片的长度<code>len(slice)</code>都一样</p>
</li>
<li><p>切片的长度是可以变化的，因此切片是一个可以动态变化的数组</p>
</li>
<li><p>切片定义的基本语法</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> 变量名 []类型</span><br><span class="line"><span class="keyword">var</span> a []<span class="keyword">int</span></span><br></pre></td></tr></table></figure>

</li>
</ol>
<h3 id="7-9-2-切片的使用示例"><a href="#7-9-2-切片的使用示例" class="headerlink" title="7.9.2 切片的使用示例"></a>7.9.2 切片的使用示例</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">// 演示切片的基本使用</span></span><br><span class="line">	<span class="keyword">var</span> intArr = [...]<span class="keyword">int</span>&#123;<span class="number">1</span>, <span class="number">22</span>, <span class="number">33</span>, <span class="number">66</span>, <span class="number">99</span>&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 声明/定义一个切片</span></span><br><span class="line">	<span class="comment">// slice := intArr[1:3]</span></span><br><span class="line">	<span class="comment">// 1. slice就是切片名</span></span><br><span class="line">	<span class="comment">// 2. intArr[1:3]表示slice引用到intArr这个数组</span></span><br><span class="line">	<span class="comment">// 3. 引用intArr数组的起始下标为1</span></span><br><span class="line">	<span class="comment">//    最后的下标为3（但不包含3）</span></span><br><span class="line">	slice := intArr[<span class="number">1</span>:<span class="number">3</span>]</span><br><span class="line">	fmt.Println(<span class="string">"intArr="</span>, intArr)</span><br><span class="line">	fmt.Println(<span class="string">"slice 的元素是 ="</span>, slice)</span><br><span class="line">	fmt.Println(<span class="string">"slice 的元素个数 ="</span>, <span class="built_in">len</span>(slice))</span><br><span class="line">	<span class="comment">// 切片的容量是可以动态变化 </span></span><br><span class="line">	fmt.Println(<span class="string">"slice 的容量 ="</span>, <span class="built_in">cap</span>(slice))</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 输出</span></span><br><span class="line">intArr= [<span class="number">1</span> <span class="number">22</span> <span class="number">33</span> <span class="number">66</span> <span class="number">99</span>]</span><br><span class="line">slice 的元素是 = [<span class="number">22</span> <span class="number">33</span>]</span><br><span class="line">slice 的元素个数 = <span class="number">2</span></span><br><span class="line">slice 的容量 = <span class="number">4</span></span><br></pre></td></tr></table></figure>

<h2 id="7-12-切片在内存中形式"><a href="#7-12-切片在内存中形式" class="headerlink" title="7.12 切片在内存中形式"></a>7.12 切片在内存中形式</h2><p>slice底层由三个部分构成，本质是一个结构体（struct）<br>第一个部分是引用部分（ptr），第二个部分是长度（len），第三个部分是容量（cap）</p>
<h2 id="7-13-切片的使用方式"><a href="#7-13-切片的使用方式" class="headerlink" title="7.13 切片的使用方式"></a>7.13 切片的使用方式</h2><h3 id="方式1"><a href="#方式1" class="headerlink" title="方式1"></a>方式1</h3><p>定义一个切片，然后让切片去引用一个已经创建好的数组。<br><code>array[b:e]</code>表示创建一个包含e-b个元素的切片，第一个元素是array[b]</p>
<h3 id="方式2"><a href="#方式2" class="headerlink" title="方式2"></a>方式2</h3><p>通过make()来创建切片<br>基本语法：<code>var 切片名 []type = make([]type, len, cap)</code><br>参数说明：<br>&emsp;<code>type</code>    数据类型<br>&emsp;<code>len</code>    &ensp;大小<br>&emsp;<code>cap</code>    &ensp;切片容量（可选，如果缺省则默认与<code>len</code>大小相同。若分配，则要求大于等于<code>len</code>）</p>
<p><strong>案例演示</strong></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> slice []<span class="keyword">float64</span> = <span class="built_in">make</span>([]<span class="keyword">float64</span>, <span class="number">5</span>, <span class="number">10</span>)</span><br><span class="line">	slice[<span class="number">1</span>] = <span class="number">10</span></span><br><span class="line">	slice[<span class="number">3</span>] = <span class="number">20</span></span><br><span class="line"></span><br><span class="line">	fmt.Println(slice)</span><br><span class="line">	fmt.Println(<span class="string">"slice的size="</span>, <span class="built_in">len</span>(slice))</span><br><span class="line">	fmt.Println(<span class="string">"slice的cap"</span>, <span class="built_in">cap</span>(slice))</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 输出</span></span><br><span class="line">[<span class="number">0</span> <span class="number">10</span> <span class="number">0</span> <span class="number">20</span> <span class="number">0</span>]</span><br><span class="line">slice的size= <span class="number">5</span></span><br><span class="line">slice的<span class="built_in">cap</span> <span class="number">10</span></span><br></pre></td></tr></table></figure>

<h3 id="方式3"><a href="#方式3" class="headerlink" title="方式3"></a>方式3</h3><p>定义一个切片，直接就指定具体数组，使用原理类似make()的方式</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> slice []<span class="keyword">string</span> = []<span class="keyword">string</span>&#123;<span class="string">"tom"</span>, <span class="string">"jack"</span>, <span class="string">"mary"</span>&#125;</span><br><span class="line">	fmt.Println(slice)</span><br><span class="line">	fmt.Println(<span class="built_in">len</span>(slice))</span><br><span class="line">	fmt.Println(<span class="built_in">cap</span>(slice))</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 输出</span></span><br><span class="line">[tom jack mary]</span><br><span class="line"><span class="number">3</span></span><br><span class="line"><span class="number">3</span></span><br></pre></td></tr></table></figure>

<h3 id="方式1与方式2的区别"><a href="#方式1与方式2的区别" class="headerlink" title="方式1与方式2的区别"></a>方式1与方式2的区别</h3><ol>
<li><p>方式1是直接引用数组，这个数组是事先存在的，程序员可见的</p>
</li>
<li><p>方式2是通过make来创建切片，make也会创建一个数组，是由切片在底层进行维护，程序员是看不见的。</p>
</li>
</ol>
<h2 id="7-14-切片的遍历"><a href="#7-14-切片的遍历" class="headerlink" title="7.14 切片的遍历"></a>7.14 切片的遍历</h2><h3 id="for循环实现切片遍历"><a href="#for循环实现切片遍历" class="headerlink" title="for循环实现切片遍历"></a>for循环实现切片遍历</h3><h3 id="for-range方式实现切片遍历"><a href="#for-range方式实现切片遍历" class="headerlink" title="for-range方式实现切片遍历"></a>for-range方式实现切片遍历</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">"fmt"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> arr [<span class="number">5</span>]<span class="keyword">int</span> = [...]<span class="keyword">int</span>&#123;<span class="number">10</span>, <span class="number">20</span>, <span class="number">30</span>, <span class="number">40</span>, <span class="number">50</span>&#125;</span><br><span class="line">	slice := arr[<span class="number">1</span>:<span class="number">4</span>]</span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="built_in">len</span>(slice); i++ &#123;</span><br><span class="line">		fmt.Printf(<span class="string">"slice[%v]=%v\n"</span>, i, slice[i])</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	fmt.Println()</span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> index, value := <span class="keyword">range</span> slice &#123;</span><br><span class="line">		fmt.Printf(<span class="string">"slice[%v]=%v\n"</span>, index, value)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 输出</span></span><br><span class="line">slice[<span class="number">0</span>]=<span class="number">20</span></span><br><span class="line">slice[<span class="number">1</span>]=<span class="number">30</span></span><br><span class="line">slice[<span class="number">2</span>]=<span class="number">40</span></span><br><span class="line"></span><br><span class="line">slice[<span class="number">0</span>]=<span class="number">20</span></span><br><span class="line">slice[<span class="number">1</span>]=<span class="number">30</span></span><br><span class="line">slice[<span class="number">2</span>]=<span class="number">40</span></span><br></pre></td></tr></table></figure>

<h2 id="7-15-切片注意事项和细节说明"><a href="#7-15-切片注意事项和细节说明" class="headerlink" title="7.15 切片注意事项和细节说明"></a>7.15 切片注意事项和细节说明</h2><ol>
<li><p>切片初始化是<code>var slice = arr[stratindex:endindex]</code><br>说明：从arr数组下标<code>arr[startindex]</code>开始，取<code>endindex</code>-<code>startindex</code>个元素作为切片的元素</p>
</li>
<li><p>切片初始化是，仍然不能约见。范围在[0, len(arr)]之间，但是可以动态增长<br>（1）<code>var slice = arr[0:end]</code>可以简写<code>var slice = arr[:end]</code></p>
<p> （2）<code>var slice = arr[strat:len(arr)]</code>可以简写<code>var slice = arr[start:]</code></p>
<p> （3）<code>var slice = arr[0:len(arr)]</code>可以简写<code>var slice = arr[:]</code></p>
</li>
<li><p>cap是一个内置函数，用于统计切片的容量，即最大可以存放多少元素</p>
</li>
<li><p>切片定义完成后，还不能使用，因为本身为空，需要让其引用到一个数组，或者通过make来分配一个空间供切片使用</p>
</li>
<li><p>切片可以继续切片</p>
</li>
<li><p>用append内置函数，可以对切片进行动态增加</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> slice []<span class="keyword">int</span> = []<span class="keyword">int</span>&#123;<span class="number">100</span>, <span class="number">200</span>, <span class="number">300</span>&#125;</span><br><span class="line">	<span class="comment">// 通过append给目标切片追加具体的元素</span></span><br><span class="line">	slice2 := <span class="built_in">append</span>(slice, <span class="number">400</span>, <span class="number">500</span>, <span class="number">600</span>)</span><br><span class="line">	fmt.Println(<span class="string">"slice"</span>, slice)</span><br><span class="line">	fmt.Println(<span class="string">"slice2"</span>, slice2)</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 通过append给目标追加切片</span></span><br><span class="line">	slice = <span class="built_in">append</span>(slice, slice...)</span><br><span class="line">	fmt.Println(<span class="string">"slice"</span>, slice)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 输出</span></span><br><span class="line">slice [<span class="number">100</span> <span class="number">200</span> <span class="number">300</span>]</span><br><span class="line">slice2 [<span class="number">100</span> <span class="number">200</span> <span class="number">300</span> <span class="number">400</span> <span class="number">500</span> <span class="number">600</span>]</span><br><span class="line">slice [<span class="number">100</span> <span class="number">200</span> <span class="number">300</span> <span class="number">100</span> <span class="number">200</span> <span class="number">300</span>]</span><br></pre></td></tr></table></figure>

<p> 对上面代码的小结：<br> （1）切片append操作的本质就是对数组扩容<br> （2）go底层会创建一下新的数组newArr（安装扩容后大小）<br> （3）将slice原本包含的元素拷贝到新的数组newArr<br> （4）slice重新引用到newArr<br> （5）注意newArr是在底层来维护的，程序员不可见</p>
</li>
<li><p>切片的拷贝操作<br>切片使用copy内置函数完成拷贝</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> slice []<span class="keyword">int</span> = []<span class="keyword">int</span>&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>&#125;</span><br><span class="line">	<span class="keyword">var</span> slice2 = <span class="built_in">make</span>([]<span class="keyword">int</span> ,<span class="number">10</span>)</span><br><span class="line"></span><br><span class="line">	<span class="built_in">copy</span>(slice2, slice)</span><br><span class="line">	fmt.Println(<span class="string">"slice="</span>, slice)</span><br><span class="line">	fmt.Println(<span class="string">"slice2="</span>, slice2)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p> 对上面代码的说明<br> (1)copy(para1, para2)参数的数据类型是切片<br> (2)按照上面的代码来看，slice和slice2的数据空间是独立、相互不影响。也就是说<code>slice[0]=999</code>,<code>slice2[0]</code>任然是1</p>
</li>
<li><p>关于拷贝的注意事项</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a[]<span class="keyword">int</span> = []<span class="keyword">int</span>&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>&#125;</span><br><span class="line"><span class="keyword">var</span> slice = <span class="built_in">make</span>([]<span class="keyword">int</span>, <span class="number">1</span>)</span><br><span class="line">fmt.Println(slice) <span class="comment">// 0</span></span><br><span class="line"><span class="built_in">copy</span>(slice, a)</span><br><span class="line">fmt.Println(slice) <span class="comment">// 1</span></span><br></pre></td></tr></table></figure>

<p> <code>copy()</code>进行的是无报错复制。</p>
</li>
<li><p>切片注意事项和细节说明<br>·切片是引用类型，所以在传递时，遵守引用传递机制。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> slice []<span class="keyword">int</span></span><br><span class="line">	<span class="keyword">var</span> arr[<span class="number">5</span>]<span class="keyword">int</span> = [...]<span class="keyword">int</span>&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>&#125;</span><br><span class="line">	slice = arr[:]</span><br><span class="line">	<span class="keyword">var</span> slice2 = slice</span><br><span class="line">	slice2[<span class="number">0</span>] = <span class="number">10</span></span><br><span class="line"></span><br><span class="line">	fmt.Println(<span class="string">"slice2"</span>, slice2)	<span class="comment">//[10, 2, 3, 4, 5]</span></span><br><span class="line">	fmt.Println(<span class="string">"slice"</span>, slice)	<span class="comment">//[10, 2, 3, 4, 5]</span></span><br><span class="line">	fmt.Println(<span class="string">"arr"</span>, arr)		<span class="comment">//[10, 2, 3, 4, 5]</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

 <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">test</span><span class="params">(slice []<span class="keyword">int</span>)</span></span> &#123; <span class="comment">// 传递的是地址值，会修改实参</span></span><br><span class="line">	slice[<span class="number">0</span>] = <span class="number">100</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> slice = []<span class="keyword">int</span>&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>&#125;</span><br><span class="line">	fmt.Println(<span class="string">"slice="</span>, slice)	<span class="comment">// [1, 2, 3, 4]</span></span><br><span class="line">	test(slice)</span><br><span class="line">	fmt.Println(<span class="string">"slice="</span>, slice)	<span class="comment">// [100, 2, 3, 4]</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h2 id="7-16string和slice"><a href="#7-16string和slice" class="headerlink" title="7.16string和slice"></a>7.16string和slice</h2><ol>
<li><p>string的底层是一个byte数组，因此string也可以进行切片处理</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">"fmt"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	str := <span class="string">"hello@atguigu"</span></span><br><span class="line">	<span class="comment">// 使用切片获得atguigu</span></span><br><span class="line">	slice := str[<span class="number">6</span>:]</span><br><span class="line">	fmt.Println(<span class="string">"slice="</span>, slice)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 输出</span></span><br><span class="line">slice= atguigu</span><br></pre></td></tr></table></figure>
</li>
<li><p>string和切片在内存的形式，以“abce”画出内存示意图<br>字符串底层实现和切片类似</p>
</li>
<li><p>string是不可变的，也就说不能通过str[0] = ‘z’的方式来修改字符串</p>
</li>
<li><p>如果需要修改字符串，可以先将<code>string</code>-&gt;<code>[]byte</code> || <code>[]rune</code> -&gt;<code>修改</code>-&gt;<code>重写转成string</code></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">arr1 := []<span class="keyword">byte</span>(str)</span><br><span class="line">arr1[<span class="number">0</span>] = <span class="string">'z'</span></span><br><span class="line">str = <span class="keyword">string</span>(arr1)</span><br><span class="line">fmt.Println(<span class="string">"str ="</span>, str)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 细节，我们转成[]byte后，可以处理英文和数字，但是不能处理中文</span></span><br><span class="line"><span class="comment">// 原因是[]byte按字节来处理，而一个汉字是三个字节，所以会乱码</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 解决方法是将 string 转成[]rune即可，因为[]rune是按字符处理</span></span><br><span class="line"><span class="comment">// 兼容汉字</span></span><br><span class="line">arr2 := []<span class="keyword">rune</span>(str)</span><br><span class="line">arr2[<span class="number">0</span>] = <span class="string">'西'</span></span><br><span class="line">str = <span class="keyword">string</span>(arr2)</span><br><span class="line">fmt.Println(<span class="string">"str2 = "</span>, str)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 输出</span></span><br><span class="line">str = zello@atguigu</span><br><span class="line">str2 =  西ello@atguigu</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h1 id="8-排序和查找"><a href="#8-排序和查找" class="headerlink" title="8 排序和查找"></a>8 排序和查找</h1><h2 id="8-1-排序的介绍"><a href="#8-1-排序的介绍" class="headerlink" title="8.1 排序的介绍"></a>8.1 排序的介绍</h2><h3 id="8-1-1-内部排序"><a href="#8-1-1-内部排序" class="headerlink" title="8.1.1 内部排序"></a>8.1.1 内部排序</h3><p>指将需要处理的所有数据都加载到内存进行排序。<br>包括（<code>交换式排序法</code>、<code>选择式排序法</code>和<code>插入式排序法</code>）</p>
<p>交换排序可分为两种：</p>
<ol>
<li>冒泡排序（Bubble sort）</li>
<li>选择排序（Quick sort）</li>
</ol>
<h3 id="8-1-2-外部排序"><a href="#8-1-2-外部排序" class="headerlink" title="8.1.2 外部排序"></a>8.1.2 外部排序</h3><p>数据量过大，无法全部加载到内存中，需要借助外部存储进行排序。<br>包括（合并培训法和直接合并排序法）</p>
<h2 id="8-2-冒泡排序的思路分析"><a href="#8-2-冒泡排序的思路分析" class="headerlink" title="8.2 冒泡排序的思路分析"></a>8.2 冒泡排序的思路分析</h2><p>·冒泡排序的实现</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">"fmt"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">BubbleSort</span><span class="params">(arr *[5]<span class="keyword">int</span>)</span></span> &#123;</span><br><span class="line">	fmt.Println(<span class="string">"排序前 = "</span>, (*arr))</span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="built_in">len</span>((*arr))<span class="number">-1</span>; i++ &#123;</span><br><span class="line">		<span class="keyword">for</span> j := <span class="number">0</span>; j &lt; <span class="built_in">len</span>(*arr)<span class="number">-1</span>-i; j++ &#123;</span><br><span class="line">			<span class="keyword">if</span> (*arr)[j] &gt; (*arr)[j+<span class="number">1</span>] &#123;</span><br><span class="line">				(*arr)[j], (*arr)[j+<span class="number">1</span>] = (*arr)[j+<span class="number">1</span>], (*arr)[j]</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		fmt.Printf(<span class="string">"第%d次循环arr=%v\n"</span>, i+<span class="number">1</span>, *arr)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	arr := [<span class="number">5</span>]<span class="keyword">int</span>&#123;<span class="number">24</span>, <span class="number">69</span>, <span class="number">80</span>, <span class="number">57</span>, <span class="number">13</span>&#125;</span><br><span class="line">	BubbleSort(&amp;arr)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 输出</span></span><br><span class="line">排序前 =  [<span class="number">24</span> <span class="number">69</span> <span class="number">80</span> <span class="number">57</span> <span class="number">13</span>]</span><br><span class="line">第<span class="number">1</span>次循环arr=[<span class="number">24</span> <span class="number">69</span> <span class="number">57</span> <span class="number">13</span> <span class="number">80</span>]</span><br><span class="line">第<span class="number">2</span>次循环arr=[<span class="number">24</span> <span class="number">57</span> <span class="number">13</span> <span class="number">69</span> <span class="number">80</span>]</span><br><span class="line">第<span class="number">3</span>次循环arr=[<span class="number">24</span> <span class="number">13</span> <span class="number">57</span> <span class="number">69</span> <span class="number">80</span>]</span><br><span class="line">第<span class="number">4</span>次循环arr=[<span class="number">13</span> <span class="number">24</span> <span class="number">57</span> <span class="number">69</span> <span class="number">80</span></span><br></pre></td></tr></table></figure>

<h2 id="8-3-查找"><a href="#8-3-查找" class="headerlink" title="8.3 查找"></a>8.3 查找</h2><ol>
<li><p>顺序查找</p>
</li>
<li><p>二分查找（前提：该数组有序）</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">"fmt"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">BinaryFind</span><span class="params">(arr [6]<span class="keyword">int</span>, leftIndex, rightIndex, findVal <span class="keyword">int</span>)</span></span> &#123;</span><br><span class="line">	<span class="keyword">if</span> leftIndex &gt; rightIndex &#123;</span><br><span class="line">		fmt.Println(<span class="string">"找不到"</span>)</span><br><span class="line">		<span class="keyword">return</span></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	middle := (leftIndex + rightIndex) / <span class="number">2</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> arr[middle] &gt; findVal &#123;</span><br><span class="line">		BinaryFind(arr, leftIndex, middle<span class="number">-1</span>, findVal)</span><br><span class="line">	&#125; <span class="keyword">else</span> <span class="keyword">if</span> arr[middle] &lt; findVal &#123;</span><br><span class="line">		BinaryFind(arr, middle+<span class="number">1</span>, rightIndex, findVal)</span><br><span class="line">	&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">		fmt.Println(<span class="string">"找到了，下标为"</span>, middle)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	arr := [<span class="number">6</span>]<span class="keyword">int</span>&#123;<span class="number">1</span>, <span class="number">8</span>, <span class="number">10</span>, <span class="number">89</span>, <span class="number">1000</span>, <span class="number">1234</span>&#125;</span><br><span class="line">	BinaryFind(arr, <span class="number">0</span>, <span class="built_in">len</span>(arr)<span class="number">-1</span>, <span class="number">10</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h2 id="8-4-二维数组的介绍"><a href="#8-4-二维数组的介绍" class="headerlink" title="8.4 二维数组的介绍"></a>8.4 二维数组的介绍</h2><h3 id="8-4-1-二维数组的遍历"><a href="#8-4-1-二维数组的遍历" class="headerlink" title="8.4.1 二维数组的遍历"></a>8.4.1 二维数组的遍历</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">"fmt"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> arr = [<span class="number">2</span>][<span class="number">3</span>]<span class="keyword">int</span>&#123;&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>&#125;, &#123;<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>&#125;&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// for循环进行遍历</span></span><br><span class="line">	<span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="built_in">len</span>(arr); i++ &#123;</span><br><span class="line">		<span class="keyword">for</span> j := <span class="number">0</span>; j &lt; <span class="built_in">len</span>(arr[i]); j++ &#123;</span><br><span class="line">			fmt.Printf(<span class="string">"%v\t"</span>, arr[i][j])</span><br><span class="line">		&#125;</span><br><span class="line">		fmt.Println()</span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Println()</span><br><span class="line">	<span class="comment">// for-range进行遍历</span></span><br><span class="line">	<span class="keyword">for</span> i, v := <span class="keyword">range</span> arr &#123;</span><br><span class="line">		fmt.Println(i, v)</span><br><span class="line">		<span class="keyword">for</span> j, v2 := <span class="keyword">range</span> v &#123;</span><br><span class="line">			fmt.Println(j, v2)</span><br><span class="line">		&#125;</span><br><span class="line">		fmt.Println()</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 输出</span></span><br><span class="line"><span class="number">1</span>       <span class="number">2</span>       <span class="number">3</span></span><br><span class="line"><span class="number">4</span>       <span class="number">5</span>       <span class="number">6</span></span><br><span class="line"></span><br><span class="line"><span class="number">0</span> [<span class="number">1</span> <span class="number">2</span> <span class="number">3</span>]</span><br><span class="line"><span class="number">0</span> <span class="number">1</span></span><br><span class="line"><span class="number">1</span> <span class="number">2</span></span><br><span class="line"><span class="number">2</span> <span class="number">3</span></span><br><span class="line"></span><br><span class="line"><span class="number">1</span> [<span class="number">4</span> <span class="number">5</span> <span class="number">6</span>]</span><br><span class="line"><span class="number">0</span> <span class="number">4</span></span><br><span class="line"><span class="number">1</span> <span class="number">5</span></span><br><span class="line"><span class="number">2</span> <span class="number">6</span></span><br></pre></td></tr></table></figure>

<h1 id="9-map"><a href="#9-map" class="headerlink" title="9 map"></a>9 map</h1><h2 id="9-1-map的基本介绍"><a href="#9-1-map的基本介绍" class="headerlink" title="9.1 map的基本介绍"></a>9.1 map的基本介绍</h2><p>map是key-value数据结构，又称为字段或者关联数组。</p>
<h2 id="9-2-map的声明"><a href="#9-2-map的声明" class="headerlink" title="9.2 map的声明"></a>9.2 map的声明</h2><h3 id="9-2-1-基本语法"><a href="#9-2-1-基本语法" class="headerlink" title="9.2.1 基本语法"></a>9.2.1 基本语法</h3><p><code>var map 变量名 map[keytype]valuetype</code></p>
<ol>
<li><p>key可以是什么类型<br>key可以为<code>bool</code>、<code>数字</code>、<code>string</code>、<code>指针</code>、<code>channel</code>还可以是<code>接口</code>、<code>结构体</code>、<code>数组</code><br>通常为<strong>int</strong>、<strong>string</strong><br>注：slice、map、func类型的不可以作为key</p>
</li>
<li><p>value可以是什么类型<br>value类型与key基本一致，通常为数字、stirng、map、struct</p>
</li>
</ol>
<h3 id="9-2-2-map声明的示例"><a href="#9-2-2-map声明的示例" class="headerlink" title="9.2.2 map声明的示例"></a>9.2.2 map声明的示例</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a <span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">string</span></span><br><span class="line"><span class="keyword">var</span> a <span class="keyword">map</span>[<span class="keyword">string</span>]in</span><br><span class="line"><span class="keyword">var</span> a <span class="keyword">map</span>[<span class="keyword">int</span>]<span class="keyword">string</span></span><br><span class="line"><span class="keyword">var</span> a <span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">map</span>[<span class="keyword">string</span>]sgring</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">声明是不会分配内存的，初始化需要make分配内存后才能赋值和使用</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<p>案例演示</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">"fmt"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">// map的声明和注意事项 key不能重复，value可以重复</span></span><br><span class="line">	<span class="keyword">var</span> a <span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">string</span></span><br><span class="line">	<span class="comment">// 值使用map前，需要先make</span></span><br><span class="line">	<span class="comment">// make的作用就是给map分配数据空间</span></span><br><span class="line">	a = <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">string</span>, <span class="number">10</span>)</span><br><span class="line">	a[<span class="string">"no1"</span>] = <span class="string">"宋江"</span></span><br><span class="line">	a[<span class="string">"no1"</span>] = <span class="string">"武松"</span></span><br><span class="line">	a[<span class="string">"no2"</span>] = <span class="string">"吴用"</span></span><br><span class="line">	a[<span class="string">"no3"</span>] = <span class="string">"吴用"</span></span><br><span class="line">	fmt.Println(a)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol>
<li><p>map前一定要使用make分配空间</p>
</li>
<li><p>map的key是不能重复的，如果重复了，则以最后这个key-value为准</p>
</li>
<li><p>map的value是可以相同的</p>
</li>
<li><p>map 的key-value是无序的</p>
</li>
<li><p>make内置函数</p>
</li>
</ol>
<h3 id="9-2-3-map的使用方式"><a href="#9-2-3-map的使用方式" class="headerlink" title="9.2.3 map的使用方式"></a>9.2.3 map的使用方式</h3><ol>
<li><p>方式1</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a <span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">string</span></span><br><span class="line"><span class="comment">// 需要手动分配空间才可添加键值对</span></span><br><span class="line">a = <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">string</span>, <span class="number">10</span>)</span><br></pre></td></tr></table></figure>
</li>
<li><p>方式2（推荐使用）</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">cities := <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">string</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 可以直接添加键值对</span></span><br><span class="line">cities[<span class="string">"no1"</span>] = <span class="string">"北京"</span></span><br><span class="line">cities[<span class="string">"no2"</span>] = <span class="string">"天津"</span></span><br><span class="line">cities[<span class="string">"no3"</span>] = <span class="string">"上海"</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>方式3</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">heros := <span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">string</span>&#123;</span><br><span class="line">	<span class="string">"hero1"</span>: <span class="string">"xixi"</span>,</span><br><span class="line">	<span class="string">"hero2"</span>: <span class="string">"haha"</span>,</span><br><span class="line">	<span class="string">"hero3"</span>: <span class="string">"meimei"</span>,</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 可以直接添加键值对</span></span><br><span class="line">heros[<span class="string">"hero4"</span>] = <span class="string">"hehe"</span></span><br></pre></td></tr></table></figure>

</li>
</ol>
<h3 id="9-2-4-使用示例"><a href="#9-2-4-使用示例" class="headerlink" title="9.2.4 使用示例"></a>9.2.4 使用示例</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">"fmt"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">// 存放3个学生信息，每个学生有name和sex信息</span></span><br><span class="line">	studentMap := <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">string</span>)</span><br><span class="line"></span><br><span class="line">	studentMap[<span class="string">"stu01"</span>] = <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">string</span>, <span class="number">3</span>)</span><br><span class="line">	studentMap[<span class="string">"stu01"</span>][<span class="string">"name"</span>] = <span class="string">"tom"</span></span><br><span class="line">	studentMap[<span class="string">"stu01"</span>][<span class="string">"sex"</span>] = <span class="string">"男"</span></span><br><span class="line">	studentMap[<span class="string">"stu01"</span>][<span class="string">"address"</span>] = <span class="string">"北京长安街"</span></span><br><span class="line"></span><br><span class="line">	studentMap[<span class="string">"stu02"</span>] = <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">string</span>, <span class="number">3</span>)</span><br><span class="line">	studentMap[<span class="string">"stu02"</span>][<span class="string">"name"</span>] = <span class="string">"mary"</span></span><br><span class="line">	studentMap[<span class="string">"stu02"</span>][<span class="string">"sex"</span>] = <span class="string">"女"</span></span><br><span class="line">	studentMap[<span class="string">"stu02"</span>][<span class="string">"address"</span>] = <span class="string">"上海黄浦江"</span></span><br><span class="line">	fmt.Println(studentMap[<span class="string">"stu01"</span>])</span><br><span class="line">	fmt.Println(studentMap[<span class="string">"stu02"</span>])</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 输出</span></span><br><span class="line"><span class="keyword">map</span>[address:北京长安街 name:tom sex:男]</span><br><span class="line"><span class="keyword">map</span>[address:上海黄浦江 name:mary sex:女]</span><br></pre></td></tr></table></figure>

<h2 id="9-3-map的增删改查操作"><a href="#9-3-map的增删改查操作" class="headerlink" title="9.3 map的增删改查操作"></a>9.3 map的增删改查操作</h2><h3 id="9-3-1-map增加和更新"><a href="#9-3-1-map增加和更新" class="headerlink" title="9.3.1 map增加和更新"></a>9.3.1 map增加和更新</h3><p><code>map[&quot;key&quot;]=value</code>：如果key还没有，就是增加。如果key存在就是修改。</p>
<h3 id="9-3-2-map的删除"><a href="#9-3-2-map的删除" class="headerlink" title="9.3.2 map的删除"></a>9.3.2 map的删除</h3><p><code>delete(map, &quot;key&quot;)</code>：delete是一个内置函数，若果key存在，就删除该key-value，如果key不存在，不操作，但是也不会报错。<br>细节说明：</p>
<ol>
<li><p>遍历key，逐个删除</p>
</li>
<li><p>使用<code>map = make(map[key]type)</code>申请一个新的空间，让gc来回收原来的空间。</p>
</li>
</ol>
<h3 id="9-3-3-map的查找"><a href="#9-3-3-map的查找" class="headerlink" title="9.3.3 map的查找"></a>9.3.3 map的查找</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">"fmt"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	cities := <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">string</span>)</span><br><span class="line">	cities[<span class="string">"no1"</span>] = <span class="string">"北京"</span></span><br><span class="line">	cities[<span class="string">"no2"</span>] = <span class="string">"天津"</span></span><br><span class="line">	cities[<span class="string">"no3"</span>] = <span class="string">"上海"</span></span><br><span class="line">	fmt.Println(cities)</span><br><span class="line"></span><br><span class="line">	val, ok := cities[<span class="string">"no1"</span>]</span><br><span class="line">	<span class="keyword">if</span> ok &#123;</span><br><span class="line">		fmt.Printf(<span class="string">"有no1 key 值为%v\n"</span>, val)</span><br><span class="line">	&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">		fmt.Printf(<span class="string">"没有no1 key 值\n"</span>)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>说明：如果cities这个map中有“no1”，那么ok就会返回true，否则返回false</p>
<h3 id="9-3-4-map的遍历"><a href="#9-3-4-map的遍历" class="headerlink" title="9.3.4 map的遍历"></a>9.3.4 map的遍历</h3><p>map的遍历使用for-range的结构遍历</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">"fmt"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">// 使用for-range遍历map</span></span><br><span class="line">	cities := <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">string</span>)</span><br><span class="line">	cities[<span class="string">"no1"</span>] = <span class="string">"北京"</span></span><br><span class="line">	cities[<span class="string">"no2"</span>] = <span class="string">"天津"</span></span><br><span class="line">	cities[<span class="string">"no3"</span>] = <span class="string">"上海"</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> k, v := <span class="keyword">range</span> cities &#123;</span><br><span class="line">		fmt.Printf(<span class="string">"k=%v v=%v\n"</span>, k, v)</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 使用for-range遍历一个较复杂的map</span></span><br><span class="line">	studentMap := <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">string</span>)</span><br><span class="line">	studentMap[<span class="string">"stu01"</span>] = <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">string</span>, <span class="number">3</span>)</span><br><span class="line">	studentMap[<span class="string">"stu01"</span>][<span class="string">"name"</span>] = <span class="string">"tom"</span></span><br><span class="line">	studentMap[<span class="string">"stu01"</span>][<span class="string">"sex"</span>] = <span class="string">"男"</span></span><br><span class="line">	studentMap[<span class="string">"stu01"</span>][<span class="string">"address"</span>] = <span class="string">"北京长安街"</span></span><br><span class="line"></span><br><span class="line">	studentMap[<span class="string">"stu02"</span>] = <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">string</span>, <span class="number">3</span>)</span><br><span class="line">	studentMap[<span class="string">"stu02"</span>][<span class="string">"name"</span>] = <span class="string">"mary"</span></span><br><span class="line">	studentMap[<span class="string">"stu02"</span>][<span class="string">"sex"</span>] = <span class="string">"女"</span></span><br><span class="line">	studentMap[<span class="string">"stu02"</span>][<span class="string">"address"</span>] = <span class="string">"上海黄浦江"</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> k1, v1 := <span class="keyword">range</span> studentMap &#123;</span><br><span class="line">		fmt.Println(<span class="string">"k1="</span>, k1)</span><br><span class="line">		<span class="keyword">for</span> k2, v2 := <span class="keyword">range</span> v1 &#123;</span><br><span class="line">			fmt.Printf(<span class="string">"\t k2=%v v2=%v\n"</span>, k2, v2)</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 输出</span></span><br><span class="line">k=no1 v=北京</span><br><span class="line">k=no2 v=天津</span><br><span class="line">k=no3 v=上海</span><br><span class="line">k1= stu01</span><br><span class="line">         k2=name v2=tom</span><br><span class="line">         k2=sex v2=男</span><br><span class="line">         k2=address v2=北京长安街</span><br><span class="line">k1= stu02</span><br><span class="line">         k2=address v2=上海黄浦江</span><br><span class="line">         k2=name v2=mary</span><br><span class="line">         k2=sex v2=女</span><br></pre></td></tr></table></figure>

<h3 id="9-3-5-map的长度"><a href="#9-3-5-map的长度" class="headerlink" title="9.3.5 map的长度"></a>9.3.5 map的长度</h3><p><code>func len()</code>通过内建函数来返回map的长度（键值对个数）</p>
<h3 id="9-3-6-map切片"><a href="#9-3-6-map切片" class="headerlink" title="9.3.6 map切片"></a>9.3.6 map切片</h3><p>切片类型如果是map的话，我们则称这个切片为map切片，这样使用map个数就可以动态的变化了</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">"fmt"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">/*</span></span><br><span class="line"><span class="comment">		要求：使用一个map来记录monster的信息 name 和 age，也就是说</span></span><br><span class="line"><span class="comment">		一个monster对应一个map，并且妖怪的个数可以动态的增加=》map切片</span></span><br><span class="line"><span class="comment">	*/</span></span><br><span class="line">	<span class="keyword">var</span> monsters []<span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">string</span></span><br><span class="line">	<span class="comment">// 准备放入两个妖怪</span></span><br><span class="line">	monsters = <span class="built_in">make</span>([]<span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">string</span>, <span class="number">2</span>)</span><br><span class="line">	<span class="comment">// 增加一个妖怪的信息</span></span><br><span class="line">	<span class="keyword">if</span> monsters[<span class="number">0</span>] == <span class="literal">nil</span> &#123;</span><br><span class="line">		monsters[<span class="number">0</span>] = <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">string</span>, <span class="number">2</span>)</span><br><span class="line">		monsters[<span class="number">0</span>][<span class="string">"name"</span>] = <span class="string">"牛魔王"</span></span><br><span class="line">		monsters[<span class="number">0</span>][<span class="string">"age"</span>] = <span class="string">"500"</span></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> monsters[<span class="number">1</span>] == <span class="literal">nil</span> &#123;</span><br><span class="line">		monsters[<span class="number">1</span>] = <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">string</span>, <span class="number">2</span>)</span><br><span class="line">		monsters[<span class="number">1</span>][<span class="string">"name"</span>] = <span class="string">"红孩儿"</span></span><br><span class="line">		monsters[<span class="number">1</span>][<span class="string">"age"</span>] = <span class="string">"400"</span></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// if monsters[2] == nil &#123;</span></span><br><span class="line">	<span class="comment">// 	monsters[2] = make(map[string]string, 2)</span></span><br><span class="line">	<span class="comment">// 	monsters[2]["name"] = "狐狸精"</span></span><br><span class="line">	<span class="comment">// 	monsters[2]["age"] = "300"</span></span><br><span class="line">	<span class="comment">// &#125;</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">// 需要使用appen函数动态增长map</span></span><br><span class="line">	<span class="comment">// 1. 先定义一个monster信息</span></span><br><span class="line">	newMonster := <span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">string</span>&#123;</span><br><span class="line">		<span class="string">"name"</span>: <span class="string">"火云邪神"</span>,</span><br><span class="line">		<span class="string">"age"</span>:  <span class="string">"200"</span>,</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	monsters = <span class="built_in">append</span>(monsters, newMonster)</span><br><span class="line"></span><br><span class="line">	fmt.Println(monsters)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 输出</span></span><br><span class="line">[<span class="keyword">map</span>[age:<span class="number">500</span> name:牛魔王] <span class="keyword">map</span>[age:<span class="number">400</span> name:红孩儿] <span class="keyword">map</span>[age:<span class="number">200</span> name:火云邪神]]</span><br></pre></td></tr></table></figure>

<h3 id="9-3-7-map排序"><a href="#9-3-7-map排序" class="headerlink" title="9.3.7 map排序"></a>9.3.7 map排序</h3><ol>
<li><p>golang中没有一个专门的方法针对map的key进行排序</p>
</li>
<li><p>golang中的map默认是无序的，注意也不是按照添加顺序进行存放的，你每次遍历，得到的输出可能会不一样</p>
</li>
<li><p>golang中map的排序，是先将key进行排序，然后根据key值遍历输出即可</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">"fmt"</span></span><br><span class="line">	<span class="string">"sort"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	map1 := <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="keyword">int</span>]<span class="keyword">int</span>, <span class="number">10</span>)</span><br><span class="line">	map1[<span class="number">10</span>] = <span class="number">100</span></span><br><span class="line">	map1[<span class="number">1</span>] = <span class="number">13</span></span><br><span class="line">	map1[<span class="number">4</span>] = <span class="number">56</span></span><br><span class="line">	map1[<span class="number">8</span>] = <span class="number">90</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">// 如果按照map的key的顺序进行排序输出</span></span><br><span class="line">	<span class="comment">// 1.先将map的key放入到切片中</span></span><br><span class="line">	<span class="comment">// 2.对切片排序</span></span><br><span class="line">	<span class="comment">// 3.遍历切片，然后按照key来输出map的值</span></span><br><span class="line">	<span class="keyword">var</span> keys []<span class="keyword">int</span></span><br><span class="line">	<span class="keyword">for</span> k, _ := <span class="keyword">range</span> map1 &#123;</span><br><span class="line">		keys = <span class="built_in">append</span>(keys, k)</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">// 排序</span></span><br><span class="line">	sort.Ints(keys)</span><br><span class="line">	fmt.Println(keys)</span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> _, k := <span class="keyword">range</span> keys &#123;</span><br><span class="line">		fmt.Printf(<span class="string">"map1[%v]=%v\n"</span>, k, map1[k])</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 输出</span></span><br><span class="line">[<span class="number">1</span> <span class="number">4</span> <span class="number">8</span> <span class="number">10</span>]</span><br><span class="line">map1[<span class="number">1</span>]=<span class="number">13</span></span><br><span class="line">map1[<span class="number">4</span>]=<span class="number">56</span></span><br><span class="line">map1[<span class="number">8</span>]=<span class="number">90</span></span><br><span class="line">map1[<span class="number">10</span>]=<span class="number">100</span></span><br></pre></td></tr></table></figure>

</li>
</ol>
<h3 id="9-3-8-map的使用细节"><a href="#9-3-8-map的使用细节" class="headerlink" title="9.3.8 map的使用细节"></a>9.3.8 map的使用细节</h3><ol>
<li><p>map是引用类型，遵守引用类型传递的机制</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">"fmt"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">modify</span><span class="params">(map1 <span class="keyword">map</span>[<span class="keyword">int</span>]<span class="keyword">int</span>)</span></span> &#123;</span><br><span class="line">	map1[<span class="number">10</span>] = <span class="number">900</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">// map是引用类型，遵守引用类型传递的机制，在一个函数接收map</span></span><br><span class="line">	<span class="comment">// 修改后，会直接修改原来的map</span></span><br><span class="line">	map1 := <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="keyword">int</span>]<span class="keyword">int</span>)</span><br><span class="line">	map1[<span class="number">1</span>] = <span class="number">90</span></span><br><span class="line">	map1[<span class="number">2</span>] = <span class="number">88</span></span><br><span class="line">	map1[<span class="number">10</span>] = <span class="number">1</span></span><br><span class="line">	map1[<span class="number">20</span>] = <span class="number">2</span></span><br><span class="line">	modify(map1)</span><br><span class="line">	fmt.Println(map1)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 输出</span></span><br><span class="line"><span class="keyword">map</span>[<span class="number">1</span>:<span class="number">90</span> <span class="number">2</span>:<span class="number">88</span> <span class="number">10</span>:<span class="number">900</span> <span class="number">20</span>:<span class="number">2</span>]</span><br></pre></td></tr></table></figure>
</li>
<li><p>map的容量达到后，再向map添加元素，会自动扩容，并不会发生panic，也就说map能动态的增长 键值对（key-value）</p>
</li>
<li><p>map的value也经常使用struct类型，更适合管理复杂的数据</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> Stu <span class="keyword">struct</span> &#123;</span><br><span class="line">	Name    <span class="keyword">string</span></span><br><span class="line">	Age     <span class="keyword">int</span></span><br><span class="line">	Address <span class="keyword">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 1.map的key为学生的学号，是唯一的</span></span><br><span class="line"><span class="comment">// 2.map的value为结构体，包含学生的 名字、年龄、地址</span></span><br><span class="line">students := <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="keyword">string</span>]Stu, <span class="number">10</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建2个学生</span></span><br><span class="line">stu1 := Stu&#123;Name: <span class="string">"tom"</span>, Age: <span class="number">18</span>, Address: <span class="string">"北京"</span>&#125;</span><br><span class="line">stu2 := Stu&#123;<span class="string">"mary"</span>, <span class="number">28</span>, <span class="string">"上海"</span>&#125;</span><br><span class="line">students[<span class="string">"no1"</span>] = stu1</span><br><span class="line">students[<span class="string">"no2"</span>] = stu2</span><br><span class="line">fmt.Println(students)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 遍历各个学生的信息</span></span><br><span class="line"><span class="keyword">for</span> k, v := <span class="keyword">range</span> students &#123;</span><br><span class="line">	fmt.Printf(<span class="string">"%v,name %v,age %v,address %v\n"</span>,</span><br><span class="line">	k, v.Name, v.Age, v.Address)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 输出</span></span><br><span class="line">no2,name mary,age <span class="number">28</span>,address 上海</span><br><span class="line">no1,name tom,age <span class="number">18</span>,address 北京</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h1 id="10-面向对象编程（上）"><a href="#10-面向对象编程（上）" class="headerlink" title="10 面向对象编程（上）"></a>10 面向对象编程（上）</h1><ol>
<li><p>Golang并不是纯粹的面向对象语言，<code>Golang支持面向对象编程特性</code>更准确</p>
</li>
<li><p>Golang仍然有面向对象编程的继承、封装、多态的特性，只是实现的方式和其他OOP语言不一样。</p>
</li>
<li><p>Golang通过接口关联，耦合性低。Golang中面向<code>接口编程</code>是非常重要的特性。</p>
</li>
</ol>
<h2 id="10-1-结构体"><a href="#10-1-结构体" class="headerlink" title="10.1 结构体"></a>10.1 结构体</h2><h3 id="10-1-1-如何声明结构体"><a href="#10-1-1-如何声明结构体" class="headerlink" title="10.1.1 如何声明结构体"></a>10.1.1 如何声明结构体</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> 结构体名称 <span class="keyword">struct</span> &#123;</span><br><span class="line">	field1 <span class="keyword">type</span></span><br><span class="line">	field2 <span class="keyword">type</span></span><br><span class="line">	...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol>
<li><p>map、slice作为结构体字段时，需要手动分配空间<code>make()</code></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">"fmt"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Person <span class="keyword">struct</span> &#123;</span><br><span class="line">	Name   <span class="keyword">string</span></span><br><span class="line">	Age    <span class="keyword">int</span></span><br><span class="line">	Scores [<span class="number">5</span>]<span class="keyword">float64</span></span><br><span class="line">	ptr    *<span class="keyword">int</span></span><br><span class="line">	slice  []<span class="keyword">int</span></span><br><span class="line">	map1   <span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> p1 Person</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 使用slice、map时</span></span><br><span class="line">	p1.slice = <span class="built_in">make</span>([]<span class="keyword">int</span>, <span class="number">10</span>)</span><br><span class="line">	p1.slice[<span class="number">0</span>] = <span class="number">100</span></span><br><span class="line"></span><br><span class="line">	p1.map1 = <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">string</span>)</span><br><span class="line">	p1.map1[<span class="string">"key"</span>] = <span class="string">"value"</span></span><br><span class="line"></span><br><span class="line">	fmt.Println(p1)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 输出</span></span><br><span class="line">&#123; <span class="number">0</span> [<span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span>] &lt;<span class="literal">nil</span>&gt; [<span class="number">100</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span>] <span class="keyword">map</span>[key:value]&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>相同结构体之间赋值默认是值拷贝</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> Monster <span class="keyword">struct</span> &#123;</span><br><span class="line">	Name <span class="keyword">string</span></span><br><span class="line">	Age  <span class="keyword">int</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> monster1 Monster</span><br><span class="line">monster1.Name = <span class="string">"牛魔王"</span></span><br><span class="line">monster1.Age = <span class="number">500</span></span><br><span class="line"></span><br><span class="line">monster2 := monster1</span><br><span class="line">monster2.Name = <span class="string">"狐狸精"</span></span><br><span class="line"></span><br><span class="line">fmt.Println(<span class="string">"monster1="</span>, monster1)</span><br><span class="line">fmt.Println(<span class="string">"monster2="</span>, monster2)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 输出</span></span><br><span class="line">monster1= &#123;牛魔王 <span class="number">500</span>&#125;</span><br><span class="line">monster2= &#123;狐狸精 <span class="number">500</span>&#125;</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h3 id="10-1-2-创建结构体的四种方法"><a href="#10-1-2-创建结构体的四种方法" class="headerlink" title="10.1.2 创建结构体的四种方法"></a>10.1.2 创建结构体的四种方法</h3><ol start="3">
<li><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> Person <span class="keyword">struct</span> &#123;</span><br><span class="line">	Name <span class="keyword">string</span></span><br><span class="line">	Age  <span class="keyword">int</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> p3 *Person = <span class="built_in">new</span>(Person)</span><br><span class="line"><span class="comment">// 因为p3是一个指针，因此标准的给字段赋值方式</span></span><br><span class="line"><span class="comment">// (p3*).Name = "smith" 也可以这样写 p3.Name = "smith"</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 原因：go的是记者为了程序员使用方便，底层会对p3.Name="smith"进行处理</span></span><br><span class="line"><span class="comment">// 会给p3加上取值运算(*p3).Name = "smith"</span></span><br><span class="line">(*p3).Name = <span class="string">"smith"</span></span><br><span class="line">p3.Nam3 = <span class="string">"john"</span></span><br><span class="line"></span><br><span class="line">(*p3).Age = <span class="number">30</span></span><br><span class="line">fmt.Println(*p3)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 输出</span></span><br><span class="line">&#123;john <span class="number">30</span>&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>var person *Person = &amp;Person{}</code></p>
</li>
</ol>
<h3 id="10-1-3-结构体内存分配机制"><a href="#10-1-3-结构体内存分配机制" class="headerlink" title="10.1.3 结构体内存分配机制"></a>10.1.3 结构体内存分配机制</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> p1 Person</span><br><span class="line">p1.Age = <span class="number">10</span></span><br><span class="line">p1.Name = <span class="string">"小明"</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> p2 *Person = &amp;p1</span><br><span class="line"></span><br><span class="line">fmt.Println(*p2.Age)</span><br><span class="line"><span class="comment">// 不能这样写，会报错</span></span><br><span class="line"><span class="comment">// 原因是“.”的运算级比“*”高，这样相当于对Age进行取值操作</span></span><br></pre></td></tr></table></figure>

<h3 id="10-1-4-结构体使用注意事项和细节操作"><a href="#10-1-4-结构体使用注意事项和细节操作" class="headerlink" title="10.1.4 结构体使用注意事项和细节操作"></a>10.1.4 结构体使用注意事项和细节操作</h3><ol>
<li><p>结构体内存分配是连续的</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Point <span class="keyword">struct</span> &#123;</span><br><span class="line">	x <span class="keyword">int</span></span><br><span class="line">	y <span class="keyword">int</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Rect <span class="keyword">struct</span> &#123;</span><br><span class="line">	leftUp, rightDown Point</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Rect2 <span class="keyword">struct</span> &#123;</span><br><span class="line">	leftUp, rightDown *Point</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	r1 := Rect&#123;Point&#123;<span class="number">1</span>, <span class="number">2</span>&#125;, Point&#123;<span class="number">3</span>, <span class="number">4</span>&#125;&#125;</span><br><span class="line">	fmt.Printf(<span class="string">"r1.leftup.x\t地址=%p r1.leftup.y\t 地址=%p\n"</span>, &amp;r1.leftUp.x, &amp;r1.leftUp.y)</span><br><span class="line">	fmt.Printf(<span class="string">"r1.rightDown.x\t地址=%p r1.rightDown.y 地址=%p\n"</span>, &amp;r1.rightDown.x, &amp;r1.rightDown.y)</span><br><span class="line"></span><br><span class="line">	r2 := Rect2&#123;&amp;Point&#123;<span class="number">1</span>, <span class="number">2</span>&#125;, &amp;Point&#123;<span class="number">3</span>, <span class="number">4</span>&#125;&#125;</span><br><span class="line">	<span class="comment">// 他们本身的地址时连续的，指向的地址可能是连续的</span></span><br><span class="line">	fmt.Printf(<span class="string">"r2.leftup本身的地址=%p\tr2.leftup.x\t地址=%p r2.leftup.y\t 地址=%p\n"</span>,</span><br><span class="line">		r2.leftUp, &amp;r2.leftUp.x, &amp;r2.leftUp.y)</span><br><span class="line">	fmt.Printf(<span class="string">"r2.rightDown本身的地址=%p\tr2.rightDown.x\t地址=%p r2.rightDown.y 地址=%p"</span>,</span><br><span class="line">		r2.rightDown, &amp;r2.rightDown.x, &amp;r2.rightDown.y)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 输出</span></span><br><span class="line">r1.leftup.x     地址=<span class="number">0xc000012380</span> r1.leftup.y    地址=<span class="number">0xc000012388</span></span><br><span class="line">r1.rightDown.x  地址=<span class="number">0xc000012390</span> r1.rightDown.y 地址=<span class="number">0xc000012398</span></span><br><span class="line">r2.leftup本身的地址=<span class="number">0xc0000140b0</span>        r2.leftup.x     地址=<span class="number">0xc0000140b0</span> r2.leftup.y    地址=<span class="number">0xc0000140b8</span></span><br><span class="line">r2.rightDown本身的地址=<span class="number">0xc0000140c0</span>     r2.rightDown.x  地址=<span class="number">0xc0000140c0</span> r2.rightDown.y 地址=<span class="number">0xc0000140c8</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>结构体是用户单独定义的类型，和其他类型进行转换时需要有完全相同的字段（名字、个数、类型）</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Point <span class="keyword">struct</span> &#123;</span><br><span class="line">	x <span class="keyword">int</span></span><br><span class="line">	y <span class="keyword">int</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> A <span class="keyword">struct</span> &#123;</span><br><span class="line">	Num <span class="keyword">int</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> B <span class="keyword">struct</span> &#123;</span><br><span class="line">	Num <span class="keyword">int</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> a A</span><br><span class="line">	<span class="keyword">var</span> b B</span><br><span class="line">	a = A(b)</span><br><span class="line">	<span class="comment">// 可以转换</span></span><br><span class="line">	<span class="comment">// 但要求结构体字段要完全一致（名字、个数、类型）</span></span><br><span class="line">	fmt.Println(a, b)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>结构体进行type重新定义（相当于别名），Golang认为是新的数据类型，但是相互间可以强转</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> Student <span class="keyword">struct</span> &#123;</span><br><span class="line">	Name <span class="keyword">string</span></span><br><span class="line">	Age  <span class="keyword">int</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Stu Student</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> stu1 Student</span><br><span class="line">	<span class="keyword">var</span> stu2 Stu</span><br><span class="line">	stu2 = sut1</span><br><span class="line">	<span class="comment">// 无法相互赋值，但可通过强制转换赋值</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

 <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> ingeger <span class="keyword">int</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> i integer = <span class="number">10</span></span><br><span class="line">	<span class="keyword">var</span> j <span class="keyword">int</span> = <span class="number">20</span></span><br><span class="line">	j = <span class="keyword">int</span>(i)	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>struct的每个字段上，可以写上一个tag，该tag可以通过<strong>反射机制</strong>获取，常见的使用场景就是序列化和反序列化。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">"encoding/json"</span></span><br><span class="line">	<span class="string">"fmt"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Monster <span class="keyword">struct</span> &#123;</span><br><span class="line">	Name  <span class="keyword">string</span> <span class="string">`json:"name"`</span> <span class="comment">// 结构体的标签（struct tag）</span></span><br><span class="line">	Age   <span class="keyword">int</span>    <span class="string">`json:"age"`</span></span><br><span class="line">	Skill <span class="keyword">string</span> <span class="string">`json:"skill"`</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	monster := Monster&#123;<span class="string">"牛魔王"</span>, <span class="number">500</span>, <span class="string">"芭蕉扇"</span>&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 2. 将monster变量序列化为json格式字串</span></span><br><span class="line">	jsonStr, err := json.Marshal(monster)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		fmt.Println(err)</span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Println(<span class="string">"jsonStr"</span>, <span class="keyword">string</span>(jsonStr))</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 输出</span></span><br><span class="line">jsonStr &#123;<span class="string">"name"</span>:<span class="string">"牛魔王"</span>,<span class="string">"age"</span>:<span class="number">500</span>,<span class="string">"skill"</span>:<span class="string">"芭蕉扇"</span>&#125;</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h2 id="10-2-方法"><a href="#10-2-方法" class="headerlink" title="10.2 方法"></a>10.2 方法</h2><p>Golang中的<strong>方法是作用在指定数据类型上的</strong>（即：和指定的数据类型绑定），因此<strong>自定义类型，都可以有方法</strong>，而不仅仅是struct</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> A <span class="keyword">struct</span> &#123;</span><br><span class="line">	Num <span class="keyword">int</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(a A)</span><span class="title">test</span><span class="params">()</span></span> &#123;</span><br><span class="line">	fmt.Println(a.Num)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">"fmt"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Person <span class="keyword">struct</span> &#123;</span><br><span class="line">	Name <span class="keyword">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(p Person)</span> <span class="title">test</span><span class="params">()</span></span> &#123;</span><br><span class="line">	fmt.Println(<span class="string">"test()"</span>, p.Name)</span><br><span class="line">	p.Name = <span class="string">"jack"</span> <span class="comment">// 对main()中的p.Name没有影响</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> p Person</span><br><span class="line">	p.Name = <span class="string">"tom"</span></span><br><span class="line">	p.test()</span><br><span class="line">	fmt.Println(p.Name) <span class="comment">// 输出tom</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 输出</span></span><br><span class="line"><span class="keyword">go</span></span><br><span class="line">test() tom</span><br><span class="line">tom</span><br></pre></td></tr></table></figure>

<p><code>func() (p Person) test() {...}</code>中p表示哪个Person变量调用，这个p就是它的副本，与函数传参类似。<br>p由程序员指定，不固定</p>
<h3 id="10-2-1-方法使用细节"><a href="#10-2-1-方法使用细节" class="headerlink" title="10.2.1 方法使用细节"></a>10.2.1 方法使用细节</h3><ol>
<li><p>为了提高效率，通常我们是将方法和结构体的指针类型绑定</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">"fmt"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Circle <span class="keyword">struct</span> &#123;</span><br><span class="line">	radius <span class="keyword">float64</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(c *Circle)</span> <span class="title">area2</span><span class="params">()</span> <span class="title">float64</span></span> &#123;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">3.14</span> * c.radius * c.radius</span><br><span class="line">	<span class="comment">// return 3.14 * (*c).radius * (*c).radius</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> c Circle</span><br><span class="line">	c.radius = <span class="number">5.0</span></span><br><span class="line">	res := c.area2() <span class="comment">// 编译器优化写法</span></span><br><span class="line">	<span class="comment">// res := (&amp;c).area2()原始写法</span></span><br><span class="line">	fmt.Println(<span class="string">"面积是:"</span>, res)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 输出</span></span><br><span class="line">面积是: <span class="number">314</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>Golang中的方法作用是指定的数据类型上的（即：和指定的数据类型绑定），因此自定义类型，都可以有方法，而不仅仅是struct，比如int、float32等都可以有方法。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">"fmt"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> integer <span class="keyword">int</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(i integer)</span> <span class="title">print</span><span class="params">()</span></span> &#123;</span><br><span class="line">	fmt.Println(<span class="string">"i="</span>, i)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(i *integer)</span> <span class="title">change</span><span class="params">()</span></span> &#123;</span><br><span class="line">	*i = *i + <span class="number">1</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> i integer = <span class="number">10</span></span><br><span class="line">	i.<span class="built_in">print</span>()</span><br><span class="line">	i.change()</span><br><span class="line">	fmt.Println(<span class="string">"i="</span>, i)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 输出</span></span><br><span class="line">i= <span class="number">10</span></span><br><span class="line">i= <span class="number">11</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>如果一个类型实现了String()这个方法，那么fmt.Println()默认会调用这个变量的String()进行输出。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> Student <span class="keyword">struct</span> &#123;</span><br><span class="line">	Name <span class="keyword">string</span></span><br><span class="line">	Age  <span class="keyword">int</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(stu *Student)</span> <span class="title">String</span><span class="params">()</span> <span class="title">string</span></span> &#123;</span><br><span class="line">	str := fmt.Sprintf(<span class="string">"Name=[%v] Age=[%v]"</span>, stu.Name, stu.Age)</span><br><span class="line">	<span class="keyword">return</span> str</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">stu := Student&#123;</span><br><span class="line">	Name: <span class="string">"tom"</span>,</span><br><span class="line">	Age:  <span class="number">20</span>,</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 如果你实现了*Student类型的String方法，就会自动调用</span></span><br><span class="line">fmt.Println(&amp;stu)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 输出</span></span><br><span class="line">Name=[tom] Age=[<span class="number">20</span>]</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h3 id="10-2-2-方法与函数的区别"><a href="#10-2-2-方法与函数的区别" class="headerlink" title="10.2.2 方法与函数的区别"></a>10.2.2 方法与函数的区别</h3><ol start="3">
<li>对于方法（如struct的方法），接收者为值类型时，可以直接用指针类型的变量调用方法，反过来同样可以<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">"fmt"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Person <span class="keyword">struct</span> &#123;</span><br><span class="line">	Name <span class="keyword">string</span></span><br><span class="line">	Age  <span class="keyword">int</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 值传递还是引用传递只由方法定义所决定</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(p Person)</span> <span class="title">test03</span><span class="params">()</span></span> &#123;</span><br><span class="line">	p.Name = <span class="string">"jack"</span></span><br><span class="line">	fmt.Println(<span class="string">"test03() ="</span>, p.Name)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	p := Person&#123;Name: <span class="string">"tom"</span>&#125;</span><br><span class="line">	p.test03()</span><br><span class="line">	(&amp;p).test03() <span class="comment">// 任然是值拷贝</span></span><br><span class="line">	fmt.Println(p.Name)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 输出</span></span><br><span class="line">test03() = jack</span><br><span class="line">test03() = jack</span><br><span class="line">tom</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h3 id="10-2-3-创建结构体变量时指定字段值"><a href="#10-2-3-创建结构体变量时指定字段值" class="headerlink" title="10.2.3 创建结构体变量时指定字段值 **"></a>10.2.3 创建结构体变量时指定字段值 **</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> stu1 *Student = &amp;Student&#123;<span class="string">"小王"</span>, <span class="number">29</span>&#125;</span><br><span class="line">stu2 := &amp;Student&#123;<span class="string">"小王·"</span>, <span class="number">30</span>&#125;</span><br><span class="line"><span class="keyword">var</span> stu3 = &amp;Student&#123;</span><br><span class="line">	Name : <span class="string">"小李"</span></span><br><span class="line">	Age : <span class="number">56</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">fmt.Println(stu1, stu2, stu3)</span><br><span class="line">fmt.Println(*stu1, *stu2, *stu3)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 输出</span></span><br><span class="line">&amp;&#123;小王 <span class="number">29</span>&#125; &amp;&#123;小王· <span class="number">30</span>&#125; &amp;&#123;小李 <span class="number">56</span>&#125;</span><br><span class="line">&#123;小王 <span class="number">29</span>&#125; &#123;小王· <span class="number">30</span>&#125; &#123;小李 <span class="number">56</span>&#125;</span><br></pre></td></tr></table></figure>

<h3 id="10-2-4-工厂模式"><a href="#10-2-4-工厂模式" class="headerlink" title="10.2.4 工厂模式"></a>10.2.4 工厂模式</h3><p>Golang中的结构体没有<code>构造函数</code>，通常可以使用<code>工厂模式</code>来解决这个问题</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">文件结构</span><br><span class="line">factory</span><br><span class="line">├─main</span><br><span class="line">│   main.go</span><br><span class="line">└─model</span><br><span class="line">    student.go</span><br></pre></td></tr></table></figure>

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> model</span><br><span class="line"></span><br><span class="line"><span class="comment">// 定义一个结构体</span></span><br><span class="line"><span class="keyword">type</span> student <span class="keyword">struct</span> &#123;</span><br><span class="line">	Name  <span class="keyword">string</span></span><br><span class="line">	Score <span class="keyword">float64</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 因为student结构体首字母是小写，因此是只能在model使用</span></span><br><span class="line"><span class="comment">// 我们通过工厂模式来解决</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">NewStudent</span><span class="params">(n <span class="keyword">string</span>, s <span class="keyword">float64</span>)</span> *<span class="title">student</span></span> &#123;</span><br><span class="line">	<span class="keyword">return</span> &amp;student&#123;</span><br><span class="line">		Name:  n,</span><br><span class="line">		Score: s,</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(s *student)</span> <span class="title">GetScore</span><span class="params">()</span> <span class="title">float64</span></span> &#123;</span><br><span class="line">	<span class="keyword">return</span> s.score</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">"fmt"</span></span><br><span class="line">	<span class="string">"gocode/project10/factory/model"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">// var stu = model.Student&#123;</span></span><br><span class="line">	<span class="comment">// 	Name:  "tom",</span></span><br><span class="line">	<span class="comment">// 	Score: 78.9,</span></span><br><span class="line">	<span class="comment">// &#125;</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">// 当student结构体首字母是小写的时候，我们可以通过工厂模式解决</span></span><br><span class="line">	<span class="keyword">var</span> stu = model.NewStudent(<span class="string">"tom~"</span>, <span class="number">88.8</span>)</span><br><span class="line">	fmt.Println(stu) <span class="comment">// &amp;&#123;...&#125;</span></span><br><span class="line">	fmt.Println(*stu)</span><br><span class="line">	fmt.Println(<span class="string">"name = "</span>, stu.Name, <span class="string">"score = "</span>, stu.GetScore())</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 输出</span></span><br><span class="line">&amp;&#123;tom~ <span class="number">88.8</span>&#125;</span><br><span class="line">&#123;tom~ <span class="number">88.8</span>&#125;</span><br><span class="line">name =  tom~ score =  <span class="number">88.8</span></span><br></pre></td></tr></table></figure>

<h1 id="11-面向对象编程（下）"><a href="#11-面向对象编程（下）" class="headerlink" title="11 面向对象编程（下）"></a>11 面向对象编程（下）</h1><h2 id="11-3-面向对象编程三大特性"><a href="#11-3-面向对象编程三大特性" class="headerlink" title="11.3 面向对象编程三大特性"></a>11.3 面向对象编程三大特性</h2><h3 id="11-3-1-基本介绍"><a href="#11-3-1-基本介绍" class="headerlink" title="11.3.1 基本介绍"></a>11.3.1 基本介绍</h3><p>Golang任然有面向对象编程的继承、封装和多态的特性，只是实现的方式和其他OOP语言不一样。</p>
<h3 id="11-3-2-封装介绍"><a href="#11-3-2-封装介绍" class="headerlink" title="11.3.2 封装介绍"></a>11.3.2 封装介绍</h3><p>封装就是把抽象出的<code>字段和对字段的操作封装在一起</code>，数据被保护在内部，程序的其他包只有通过被授权的操作（方法），才能对字段进行操作。</p>
<h3 id="11-3-3-封装的理解和好处"><a href="#11-3-3-封装的理解和好处" class="headerlink" title="11.3.3 封装的理解和好处"></a>11.3.3 封装的理解和好处</h3><ol>
<li><p>隐藏实现细节</p>
</li>
<li><p>可以对数据进行验证，保证安全合理（Age）</p>
</li>
</ol>
<h3 id="11-3-4-如何体现封装"><a href="#11-3-4-如何体现封装" class="headerlink" title="11.3.4 如何体现封装"></a>11.3.4 如何体现封装</h3><ol>
<li><p>对结构体中的属性进行封装</p>
</li>
<li><p>通过方法、包实现封装</p>
</li>
</ol>
<h3 id="11-3-5-封装的实现步骤"><a href="#11-3-5-封装的实现步骤" class="headerlink" title="11.3.5 封装的实现步骤"></a>11.3.5 封装的实现步骤</h3><ol start="2">
<li>给结构体所在包提供几个工厂模式的函数，首字母大写。类似一个构造函数。</li>
</ol>
<h3 id="11-3-6-嵌套匿名结构体的基本语法"><a href="#11-3-6-嵌套匿名结构体的基本语法" class="headerlink" title="11.3.6 嵌套匿名结构体的基本语法"></a>11.3.6 嵌套匿名结构体的基本语法</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> Goods <span class="keyword">struct</span> &#123;</span><br><span class="line">	Name  <span class="keyword">string</span></span><br><span class="line">	Price <span class="keyword">int</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Book <span class="keyword">struct</span> &#123;</span><br><span class="line">	Goods <span class="comment">// 这里就是嵌套匿名结构体Goods</span></span><br><span class="line">	Writer <span class="keyword">string</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">"fmt"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Student <span class="keyword">struct</span> &#123;</span><br><span class="line">	Name  <span class="keyword">string</span></span><br><span class="line">	Age   <span class="keyword">int</span></span><br><span class="line">	Score <span class="keyword">int</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 将Pupil和Graduate共有的方法绑定到*Student</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(stu *Student)</span> <span class="title">ShowInfo</span><span class="params">()</span></span> &#123;</span><br><span class="line">	fmt.Printf(<span class="string">"学生名=%v 年龄=%v 成绩=%v\n"</span>,</span><br><span class="line">		stu.Name, stu.Age, stu.Score)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(stu *Student)</span> <span class="title">SetScore</span><span class="params">(score <span class="keyword">int</span>)</span></span> &#123;</span><br><span class="line">	stu.Score = score</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 小学生结构体</span></span><br><span class="line"><span class="keyword">type</span> Pupil <span class="keyword">struct</span> &#123;</span><br><span class="line">	Student <span class="comment">// 嵌入了Student匿名结构体</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 这是Pupil特有的方法，保留</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(p *Pupil)</span> <span class="title">testing</span><span class="params">()</span></span> &#123;</span><br><span class="line">	fmt.Println(<span class="string">"小学生正在考试中..."</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 大学生结构体</span></span><br><span class="line"><span class="keyword">type</span> Graduate <span class="keyword">struct</span> &#123;</span><br><span class="line">	Student</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 这是Graduate特有的方法，保留</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(g *Graduate)</span> <span class="title">testing</span><span class="params">()</span></span> &#123;</span><br><span class="line">	fmt.Println(<span class="string">"大学生正在考试中..."</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">// 当我们对结构体嵌入了匿名结构体后，使用方法会发生变化</span></span><br><span class="line">	pupil := &amp;Pupil&#123;&#125;</span><br><span class="line">	pupil.Student.Name = <span class="string">"tom"</span></span><br><span class="line">	pupil.Student.Age = <span class="number">8</span></span><br><span class="line"></span><br><span class="line">	pupil.testing()</span><br><span class="line">	pupil.Student.SetScore(<span class="number">90</span>)</span><br><span class="line">	pupil.Student.ShowInfo()</span><br><span class="line"></span><br><span class="line">	graduate := &amp;Graduate&#123;&#125;</span><br><span class="line">	graduate.Student.Name = <span class="string">"mary"</span></span><br><span class="line">	graduate.Student.Age = <span class="number">28</span></span><br><span class="line"></span><br><span class="line">	graduate.testing()</span><br><span class="line">	graduate.Student.SetScore(<span class="number">70</span>)</span><br><span class="line">	graduate.Student.ShowInfo()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 输出</span></span><br><span class="line">小学生正在考试中...</span><br><span class="line">学生名=tom 年龄=<span class="number">8</span> 成绩=<span class="number">90</span></span><br><span class="line">大学生正在考试中...</span><br><span class="line">学生名=mary 年龄=<span class="number">28</span> 成绩=<span class="number">70</span></span><br></pre></td></tr></table></figure>

<h3 id="11-3-7-继承的深入讨论"><a href="#11-3-7-继承的深入讨论" class="headerlink" title="11.3.7 继承的深入讨论"></a>11.3.7 继承的深入讨论</h3><ol>
<li><p>结构体可以使用<code>嵌套匿名结构体所有的字段和方法</code>，即首字母大小或小写的字段、方法都可以使用</p>
</li>
<li><p>匿名结构体字段访问可以简化<br><code>a.b.Name</code>-&gt;<code>a.Name</code>其中a继承自b<br>（1）编译器会先看a对应的类型有没有Name，如果有则直接调用a类型的Name字段<br>（2）如果没有就去看a中嵌入的结构体b中有没有，如果有叫调用，如果没有继续查找。若都无法找到，则报错。</p>
</li>
<li><p>当结构体和匿名结构体有相同的字段或方法时，编译器采用就近原则访问，如果希望访问匿名结构体的字段和方法，可以通过匿名结构体来区分</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> A <span class="keyword">struct</span> &#123;</span><br><span class="line">	Name <span class="keyword">string</span></span><br><span class="line">	Age  <span class="keyword">int</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(a *A)</span> <span class="title">SayOk</span><span class="params">()</span></span> &#123;</span><br><span class="line">	fmt.Println(<span class="string">"A Sayok"</span>, a.Name)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(a *A)</span><span class="title">hello</span><span class="params">()</span></span> &#123;</span><br><span class="line">	fmt.Println(<span class="string">"A hello"</span>, a.Name)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> B <span class="keyword">struct</span> &#123;</span><br><span class="line">	A</span><br><span class="line">	Name <span class="keyword">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> (b *B) SayOk() &#123;</span><br><span class="line">	fmt.Println(<span class="string">"B SayOk"</span>, b.Name)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> b B</span><br><span class="line">	b.Name = <span class="string">"jack"</span></span><br><span class="line">	b.A.Name = <span class="string">"scot"</span></span><br><span class="line">	b.age = <span class="number">100</span></span><br><span class="line">	b.SayOk()</span><br><span class="line">	b.hello()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 输出</span></span><br><span class="line">B SayOk jack</span><br><span class="line">A hello scot</span><br></pre></td></tr></table></figure>
</li>
<li><p>结构体嵌入两个（或多个）匿名结构体，如两个匿名结构体有相同的字段和方法（同时结构体本身没有同名的字段和方法），在访问时，就必须明确指出匿名结构体名字否则编译报错。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">"fmt"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> A <span class="keyword">struct</span> &#123;</span><br><span class="line">	Name <span class="keyword">string</span></span><br><span class="line">	age  <span class="keyword">int</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> B <span class="keyword">struct</span> &#123;</span><br><span class="line">	Name  <span class="keyword">string</span></span><br><span class="line">	Score <span class="keyword">float64</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> C <span class="keyword">struct</span> &#123;</span><br><span class="line">	A</span><br><span class="line">	B</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> c C</span><br><span class="line">	<span class="comment">// 如果c没有Name字段，而A和B有Name，这是就必须通过指定匿名结构体名字来区分</span></span><br><span class="line">	<span class="comment">// 所以c.Name就会报编译错误，这个规则对方法也一样。</span></span><br><span class="line">	c.A.Name = <span class="string">"tom"</span></span><br><span class="line">	c.B.Name = <span class="string">"jack"</span></span><br><span class="line">	<span class="comment">// c.Name = "tom" // error</span></span><br><span class="line">	fmt.Println(c)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 输出</span></span><br><span class="line">&#123;&#123;tom <span class="number">0</span>&#125; &#123;jack <span class="number">0</span>&#125;&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>如果一个struct嵌套了一个有名结构体，这种模式就是<code>组合</code>，如果是组合关系，那么在访问组合的结构体的字段或方法是，必须带上结构体的名字</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> A <span class="keyword">struct</span> &#123;</span><br><span class="line">	Name <span class="keyword">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> D <span class="keyword">struct</span> &#123;</span><br><span class="line">	a A</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> d D</span><br><span class="line">d.a.Name = <span class="string">"jack"</span></span><br><span class="line"><span class="comment">// d.Name // error</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>嵌套匿名结构体后，也可以在创建结构体变量（实例）时，直接指定各个匿名结构体字段的值</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> Goods <span class="keyword">struct</span> &#123;</span><br><span class="line">	Name  <span class="keyword">string</span></span><br><span class="line">	Price <span class="keyword">float64</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Brand <span class="keyword">struct</span> &#123;</span><br><span class="line">	Name    <span class="keyword">string</span></span><br><span class="line">	Address <span class="keyword">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> TV <span class="keyword">struct</span> &#123;</span><br><span class="line">	Goods</span><br><span class="line">	Brand</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 第一种定义方式</span></span><br><span class="line">tv := TV&#123;Goods&#123;<span class="string">"电视机"</span>, <span class="number">5000.99</span>&#125;, Brand&#123;<span class="string">"海尔"</span>, <span class="string">"山东"</span>&#125;&#125;</span><br><span class="line"><span class="comment">// 第二种定义方式</span></span><br><span class="line">tv2 := TV&#123;</span><br><span class="line">	Goods&#123;</span><br><span class="line">		Name:  <span class="string">"电视机2"</span>,</span><br><span class="line">		Price: <span class="number">5000.88</span>,</span><br><span class="line">	&#125;,</span><br><span class="line">	Brand&#123;</span><br><span class="line">		Name:    <span class="string">"海尔2"</span>,</span><br><span class="line">		Address: <span class="string">"山东2"</span>,</span><br><span class="line">	&#125;,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">fmt.Println(tv)</span><br><span class="line">fmt.Println(tv2)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 输出</span></span><br><span class="line">&#123;&#123;电视机 <span class="number">5000.99</span>&#125; &#123;海尔 山东&#125;&#125;</span><br><span class="line">&#123;&#123;电视机<span class="number">2</span> <span class="number">5000.88</span>&#125; &#123;海尔<span class="number">2</span> 山东<span class="number">2</span>&#125;&#125;</span><br></pre></td></tr></table></figure>

<p> 可以在结构体中嵌入结构体指针，提高运算效率</p>
 <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> Goods <span class="keyword">struct</span> &#123;</span><br><span class="line">	Name  <span class="keyword">string</span></span><br><span class="line">	Price <span class="keyword">float64</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Brand <span class="keyword">struct</span> &#123;</span><br><span class="line">	Name    <span class="keyword">string</span></span><br><span class="line">	Address <span class="keyword">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> TV <span class="keyword">struct</span> &#123;</span><br><span class="line">	*Goods</span><br><span class="line">	*Brand</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">tv3 := TV&#123;&amp;Goods&#123;<span class="string">"电视机3"</span>, <span class="number">5000.99</span>&#125;, &amp;Brand&#123;<span class="string">"海尔3"</span>, <span class="string">"山东"</span>&#125;&#125;</span><br><span class="line">fmt.Println(tv3)</span><br><span class="line">fmt.Println(*tv3.Goods, *tv3.Brand)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 输出</span></span><br><span class="line">&#123;<span class="number">0xc00005c420</span> <span class="number">0xc00005c440</span>&#125;</span><br><span class="line">&#123;电视机<span class="number">3</span> <span class="number">5000.99</span>&#125; &#123;海尔<span class="number">3</span> 山东&#125;</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h3 id="11-3-8-多重继承"><a href="#11-3-8-多重继承" class="headerlink" title="11.3.8 多重继承"></a>11.3.8 多重继承</h3><ol>
<li><p>如嵌入的匿名结构体有相同的字段名或者方法名，则在访问时需要通过匿名结构体类型来区分</p>
</li>
<li><p>为了保证代码的简洁性，建议尽量不使用多重继承</p>
</li>
</ol>
<h2 id="11-5-接口"><a href="#11-5-接口" class="headerlink" title="11.5 接口"></a>11.5 接口</h2><h3 id="11-5-1-为什么要有接口？"><a href="#11-5-1-为什么要有接口？" class="headerlink" title="11.5.1 为什么要有接口？"></a>11.5.1 为什么要有接口？</h3><p>降低代码耦合性，提高代码通用性。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">"fmt"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 声明一个接口</span></span><br><span class="line"><span class="keyword">type</span> Usb <span class="keyword">interface</span> &#123;</span><br><span class="line">	<span class="comment">// 声明了两个没有实现的方法</span></span><br><span class="line">	Start()</span><br><span class="line">	Stop()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Phone <span class="keyword">struct</span> &#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 让Phone实现Usb接口的方法</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(p Phone)</span> <span class="title">Start</span><span class="params">()</span></span> &#123;</span><br><span class="line">	fmt.Println(<span class="string">"手机开始工作。。。"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(p Phone)</span> <span class="title">Stop</span><span class="params">()</span></span> &#123;</span><br><span class="line">	fmt.Println(<span class="string">"手机停止工作。。。"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Camera <span class="keyword">struct</span> &#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 让Camera实现Usb接口的方法</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(c Camera)</span> <span class="title">Start</span><span class="params">()</span></span> &#123;</span><br><span class="line">	fmt.Println(<span class="string">"相机开始工作。。。"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(c Camera)</span> <span class="title">Stop</span><span class="params">()</span></span> &#123;</span><br><span class="line">	fmt.Println(<span class="string">"相机停止工作。。。"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 计算机</span></span><br><span class="line"><span class="keyword">type</span> Computer <span class="keyword">struct</span> &#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 编写一个方法Working，接收一个Usb接口类型变量</span></span><br><span class="line"><span class="comment">// 只要实现了Usb接口</span></span><br><span class="line"><span class="comment">// 所谓实现Usb接口，就是指实现了Usb接口声明的所有方法</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(c Computer)</span> <span class="title">Working</span><span class="params">(usb Usb)</span></span> &#123;</span><br><span class="line">	usb.Start()</span><br><span class="line">	usb.Stop()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">// 测试</span></span><br><span class="line">	<span class="comment">// 先创建结构体变量</span></span><br><span class="line">	computer := Computer&#123;&#125;</span><br><span class="line">	phone := Phone&#123;&#125;</span><br><span class="line">	camera := Camera&#123;&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 关键点</span></span><br><span class="line">	computer.Working(phone)</span><br><span class="line">	computer.Working(camera)</span><br><span class="line">	fmt.Println()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 输出</span></span><br><span class="line">手机开始工作。。。</span><br><span class="line">手机停止工作。。。</span><br><span class="line">相机开始工作。。。</span><br><span class="line">相机停止工作。。。</span><br></pre></td></tr></table></figure>

<h3 id="11-5-2-基本介绍"><a href="#11-5-2-基本介绍" class="headerlink" title="11.5.2 基本介绍"></a>11.5.2 基本介绍</h3><p><code>interface</code>类型可以定义一组方法，但这些不需要事先，并且interface不能包含任何变量。</p>
<h3 id="11-5-3-基本语法"><a href="#11-5-3-基本语法" class="headerlink" title="11.5.3 基本语法"></a>11.5.3 基本语法</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> 接口名 <span class="keyword">interface</span> &#123;</span><br><span class="line">	method1(参数列表) 返回值列表</span><br><span class="line">	method2(参数列表) 返回值列表</span><br><span class="line">	...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>小结：</p>
<ol>
<li><p>接口里的所有方法都没有方法体，即接口的方法都是没有实现的发方法。接口体现了程序设计的<code>多态和高内聚低耦合</code>的思想。</p>
</li>
<li><p>Golang中的接口，不需要显示的实现。只要一个变量，含有接口类型的所有方法，那么这个变量就实现了这个接口。因此，<code>Golang中没有implement这样的关键字。</code></p>
</li>
</ol>
<h3 id="11-5-4-接口使用的注意事项和细节"><a href="#11-5-4-接口使用的注意事项和细节" class="headerlink" title="11.5.4 接口使用的注意事项和细节"></a>11.5.4 接口使用的注意事项和细节</h3><ol>
<li><p>接口本身不能创建实例，但是可以执行一个实现了该接口的自定义类型的变量（实例）</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">"fmt"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> AInterface <span class="keyword">interface</span> &#123;</span><br><span class="line">	Say()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Stu <span class="keyword">struct</span> &#123;</span><br><span class="line">	Name <span class="keyword">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(stu Stu)</span> <span class="title">Say</span><span class="params">()</span></span> &#123;</span><br><span class="line">	fmt.Println(<span class="string">"Stu Say()"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> stu Stu <span class="comment">// 结构体变量，实现了Say()，实现了AInterface</span></span><br><span class="line">	<span class="keyword">var</span> a AInterface = stu</span><br><span class="line">	a.Say()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 输出</span></span><br><span class="line">Stu Say()</span><br></pre></td></tr></table></figure>
</li>
<li><p>接口所有的方法都没有方法体，即都没有实现的方法</p>
</li>
<li><p>在Golang中，一个自定义类型需要将某个接口的所有方法都实现，我们说这个自定义类型实现了该接口</p>
</li>
<li><p>一个自定义类型只有实现了某个接口，才能将该自定义类型的实例（变量）赋给接口类型</p>
</li>
<li><p>只要是自定义数据类型，就可以实现接口，不仅仅是结构体类型。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> AInterface <span class="keyword">interface</span> &#123;</span><br><span class="line">	Say()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Integer <span class="keyword">int</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(i Integer)</span> <span class="title">Say</span><span class="params">()</span></span> &#123;</span><br><span class="line">	fmt.Println(<span class="string">"Integer i = "</span>, i)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> integer Integer = <span class="number">100</span></span><br><span class="line"><span class="keyword">var</span> b AInterface = integer</span><br><span class="line">b.Say()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 输出</span></span><br><span class="line">Integer i =  <span class="number">100</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>一个自定义类型可以实现多个接口</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> AInterface <span class="keyword">interface</span> &#123;</span><br><span class="line">	Say()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> BInterface <span class="keyword">interface</span> &#123;</span><br><span class="line">	Hello()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Monster <span class="keyword">struct</span> &#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(m Monster)</span> <span class="title">Hello</span><span class="params">()</span></span> &#123;</span><br><span class="line">	fmt.Println(<span class="string">"Monster Hello()"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(m Monster)</span> <span class="title">Say</span><span class="params">()</span></span> &#123;</span><br><span class="line">	fmt.Println(<span class="string">"Monster Say()"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> monster Monster</span><br><span class="line"><span class="keyword">var</span> a2 AInterface = monster</span><br><span class="line"><span class="keyword">var</span> b2 BInterface = monster</span><br><span class="line">a2.Say()</span><br><span class="line">b2.Hello()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 输出</span></span><br><span class="line">Monster Say()</span><br><span class="line">Monster Hello()</span><br></pre></td></tr></table></figure>
</li>
<li><p>Golang接口中不能有任何变量</p>
</li>
<li><p>一个接口（比如A接口）可以继承多个接口</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">"fmt"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> BInterface <span class="keyword">interface</span> &#123;</span><br><span class="line">	test01()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> CInterface <span class="keyword">interface</span> &#123;</span><br><span class="line">	test02()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> AInterface <span class="keyword">interface</span> &#123;</span><br><span class="line">	BInterface</span><br><span class="line">	CInterface</span><br><span class="line">	test03()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 如果要实现AInterface，就需要将BInterface CInterface的方法都实现</span></span><br><span class="line"><span class="keyword">type</span> Stu <span class="keyword">struct</span> &#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(stu Stu)</span> <span class="title">test01</span><span class="params">()</span></span> &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(stu Stu)</span> <span class="title">test02</span><span class="params">()</span></span> &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(stu Stu)</span> <span class="title">test03</span><span class="params">()</span></span> &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> stu Stu</span><br><span class="line">	<span class="keyword">var</span> a AInterface = stu</span><br><span class="line">	fmt.Println(a)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 输出</span></span><br><span class="line">&#123;&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>interface类型默认是一个指针（引用类型），如果没有对interface初始化就是用，那么会输出nil</p>
</li>
<li><p>空接口<code>interface{}</code>没有任何方法，所以<code>所有类型都实现了空接口</code>，即<code>我们可以把任何变量赋给空接口</code>。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> T <span class="keyword">interface</span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> t T = stu</span><br><span class="line">fmt.Println(t)</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> t2 <span class="keyword">interface</span>&#123;&#125; = stu</span><br><span class="line"><span class="keyword">var</span> num1 <span class="keyword">float64</span> = <span class="number">8.8</span></span><br><span class="line">t2 = num1</span><br><span class="line">fmt.Println(t2)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 输出</span></span><br><span class="line">&#123;&#125;</span><br><span class="line"><span class="number">8.8</span></span><br></pre></td></tr></table></figure>

</li>
</ol>
<h3 id="11-5-5-接口使用示例"><a href="#11-5-5-接口使用示例" class="headerlink" title="11.5.5 接口使用示例"></a>11.5.5 接口使用示例</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// sort包中的Sort函数介绍</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Sort</span><span class="params">(data Interface)</span></span></span><br><span class="line"><span class="function"><span class="title">Sort</span> 对 <span class="title">data</span> 进行排序。 它调用一次 <span class="title">data</span>.<span class="title">Len</span> 来决定排序的长度 <span class="title">n</span>，调用 <span class="title">data</span>.<span class="title">Less</span> 和 <span class="title">data</span>.<span class="title">Swap</span> 的开销为 <span class="title">O</span><span class="params">(n*log(n)</span>)。此排序为不稳定排序。</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">type</span> <span class="title">Interface</span> <span class="title">interface</span></span> &#123;</span><br><span class="line">	<span class="comment">// Len 为集合内元素的总数</span></span><br><span class="line">	Len() <span class="keyword">int</span></span><br><span class="line">	<span class="comment">// Less 返回索引为 i 的元素是否应排在索引为 j 的元素之前。</span></span><br><span class="line">	Less(i, j <span class="keyword">int</span>) <span class="keyword">bool</span></span><br><span class="line">	<span class="comment">// Swap 交换索引为 i 和 j 的元素</span></span><br><span class="line">	Swap(i, j <span class="keyword">int</span>)</span><br><span class="line">&#125;</span><br><span class="line">任何实现了 sort.Interface 的类型（一般为集合），均可使用该包中的方法进行排序。 这些方法要求集合内列出元素的索引为整数。</span><br></pre></td></tr></table></figure>

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">"fmt"</span></span><br><span class="line">	<span class="string">"math/rand"</span></span><br><span class="line">	<span class="string">"sort"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 1.声明一个Hero结构体</span></span><br><span class="line"><span class="keyword">type</span> Hero <span class="keyword">struct</span> &#123;</span><br><span class="line">	Name <span class="keyword">string</span></span><br><span class="line">	Age  <span class="keyword">int</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2.声明一个Hero结构体切片类型</span></span><br><span class="line"><span class="keyword">type</span> HeroSlice []Hero</span><br><span class="line"></span><br><span class="line"><span class="comment">// 3.实现Interface接口</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(hs HeroSlice)</span> <span class="title">Len</span><span class="params">()</span> <span class="title">int</span></span> &#123;</span><br><span class="line">	<span class="keyword">return</span> <span class="built_in">len</span>(hs)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Less方法就是决定什么标准进行排序</span></span><br><span class="line"><span class="comment">// 1.按Hero年龄从小到大排序</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(hs HeroSlice)</span> <span class="title">Less</span><span class="params">(i, j <span class="keyword">int</span>)</span> <span class="title">bool</span></span> &#123;</span><br><span class="line">	<span class="comment">// return hs[i].Age &lt; hs[j].Age</span></span><br><span class="line">	<span class="comment">// 修改成对姓名排序</span></span><br><span class="line">	<span class="keyword">return</span> hs[i].Name &lt; hs[j].Name</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(hs HeroSlice)</span> <span class="title">Swap</span><span class="params">(i, j <span class="keyword">int</span>)</span></span> &#123;</span><br><span class="line">	<span class="comment">// temp := hs[i]</span></span><br><span class="line">	<span class="comment">// hs[i] = hs[j]</span></span><br><span class="line">	<span class="comment">// hs[j] = temp</span></span><br><span class="line">	hs[i], hs[j] = hs[j], hs[i]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 新增student结构体，同样可以简单替换。</span></span><br><span class="line"><span class="keyword">type</span> student <span class="keyword">struct</span> &#123;</span><br><span class="line">	Name  <span class="keyword">string</span></span><br><span class="line">	Age   <span class="keyword">int</span></span><br><span class="line">	Score <span class="keyword">float64</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">// 先定义一个数组/切片</span></span><br><span class="line">	<span class="keyword">var</span> intSlice = []<span class="keyword">int</span>&#123;<span class="number">0</span>, <span class="number">-1</span>, <span class="number">10</span>, <span class="number">7</span>, <span class="number">90</span>&#125;</span><br><span class="line">	<span class="comment">// 要求对intSclie进行排序</span></span><br><span class="line">	<span class="comment">// 1. 冒泡排序</span></span><br><span class="line">	<span class="comment">// 2. 也可以使用系统提供的方法</span></span><br><span class="line">	sort.Ints(intSlice)</span><br><span class="line">	fmt.Println(intSlice)</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 对一个结构体切片进行排序</span></span><br><span class="line">	<span class="comment">// 1. 冒泡排序。。。</span></span><br><span class="line">	<span class="comment">// 2. 也可以使用系统提供的方法</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">// 测试看看我们是否可以对结构体切片进行排序</span></span><br><span class="line">	<span class="keyword">var</span> heros HeroSlice</span><br><span class="line">	<span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="number">10</span>; i++ &#123;</span><br><span class="line">		hero := Hero&#123;</span><br><span class="line">			Name: fmt.Sprintf(<span class="string">"英雄No.%d"</span>, rand.Intn(<span class="number">100</span>)),</span><br><span class="line">			Age:  rand.Intn(<span class="number">100</span>),</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="comment">// 将hero append到切片中</span></span><br><span class="line">		heros = <span class="built_in">append</span>(heros, hero)</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 看看排序前的顺序</span></span><br><span class="line">	<span class="keyword">for</span> _, v := <span class="keyword">range</span> heros &#123;</span><br><span class="line">		fmt.Println(v)</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	fmt.Println(<span class="string">"------排序后------"</span>)</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 调用sort.Sort()</span></span><br><span class="line">	sort.Sort(heros)</span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> _, v := <span class="keyword">range</span> heros &#123;</span><br><span class="line">		fmt.Println(v)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 输出</span></span><br><span class="line">[<span class="number">-1</span> <span class="number">0</span> <span class="number">7</span> <span class="number">10</span> <span class="number">90</span>]</span><br><span class="line">&#123;英雄No<span class="number">.81</span> <span class="number">87</span>&#125;</span><br><span class="line">&#123;英雄No<span class="number">.47</span> <span class="number">59</span>&#125;</span><br><span class="line">&#123;英雄No<span class="number">.81</span> <span class="number">18</span>&#125;</span><br><span class="line">&#123;英雄No<span class="number">.25</span> <span class="number">40</span>&#125;</span><br><span class="line">&#123;英雄No<span class="number">.56</span> <span class="number">0</span>&#125;</span><br><span class="line">&#123;英雄No<span class="number">.94</span> <span class="number">11</span>&#125;</span><br><span class="line">&#123;英雄No<span class="number">.62</span> <span class="number">89</span>&#125;</span><br><span class="line">&#123;英雄No<span class="number">.28</span> <span class="number">74</span>&#125;</span><br><span class="line">&#123;英雄No<span class="number">.11</span> <span class="number">45</span>&#125;</span><br><span class="line">&#123;英雄No<span class="number">.37</span> <span class="number">6</span>&#125;</span><br><span class="line">------排序后------</span><br><span class="line">&#123;英雄No<span class="number">.11</span> <span class="number">45</span>&#125;</span><br><span class="line">&#123;英雄No<span class="number">.25</span> <span class="number">40</span>&#125;</span><br><span class="line">&#123;英雄No<span class="number">.28</span> <span class="number">74</span>&#125;</span><br><span class="line">&#123;英雄No<span class="number">.37</span> <span class="number">6</span>&#125;</span><br><span class="line">&#123;英雄No<span class="number">.47</span> <span class="number">59</span>&#125;</span><br><span class="line">&#123;英雄No<span class="number">.56</span> <span class="number">0</span>&#125;</span><br><span class="line">&#123;英雄No<span class="number">.62</span> <span class="number">89</span>&#125;</span><br><span class="line">&#123;英雄No<span class="number">.81</span> <span class="number">87</span>&#125;</span><br><span class="line">&#123;英雄No<span class="number">.81</span> <span class="number">18</span>&#125;</span><br><span class="line">&#123;英雄No<span class="number">.94</span> <span class="number">11</span>&#125;</span><br></pre></td></tr></table></figure>

<h3 id="11-5-6-接口和继承"><a href="#11-5-6-接口和继承" class="headerlink" title="11.5.6 接口和继承"></a>11.5.6 接口和继承</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">"fmt"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">// Monkey结构体</span></span><br><span class="line"><span class="keyword">type</span> Monkey <span class="keyword">struct</span> &#123;</span><br><span class="line">	Name <span class="keyword">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(this *Monkey)</span> <span class="title">climbing</span><span class="params">()</span></span> &#123;</span><br><span class="line">	fmt.Println(this.Name, <span class="string">"生来会爬树"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 声明接口</span></span><br><span class="line"><span class="keyword">type</span> BirdAble <span class="keyword">interface</span> &#123;</span><br><span class="line">	Flying()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> FishAble <span class="keyword">interface</span> &#123;</span><br><span class="line">	Swimming()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// LittleMonkey结构体</span></span><br><span class="line"><span class="keyword">type</span> LittleMonkey <span class="keyword">struct</span> &#123;</span><br><span class="line">	Monkey <span class="comment">// 继承</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 让LittleMonkey实现Flying()接口</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(this *LittleMonkey)</span> <span class="title">Flying</span><span class="params">()</span></span> &#123;</span><br><span class="line">	fmt.Println(this.Name, <span class="string">"通过学习，会飞翔了。"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(this *LittleMonkey)</span> <span class="title">Swimming</span><span class="params">()</span></span> &#123;</span><br><span class="line">	fmt.Println(this.Name, <span class="string">"通过学习，会游泳了。"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">// 创建一个LittleMonkey示例</span></span><br><span class="line">	monkey := LittleMonkey&#123;</span><br><span class="line">		Monkey&#123;</span><br><span class="line">			Name: <span class="string">"悟空"</span>,</span><br><span class="line">		&#125;,</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	monkey.climbing()</span><br><span class="line">	monkey.Flying()</span><br><span class="line">	monkey.Swimming()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 输出</span></span><br><span class="line">悟空 生来会爬树</span><br><span class="line">悟空 通过学习，会飞翔了。</span><br><span class="line">悟空 通过学习，会游泳了。</span><br></pre></td></tr></table></figure>

<p>小结：</p>
<ol>
<li><p>当A结构体继承了B结构体，那么就会自动的继承了B结构体的字段和方法，并且可以直接使用。</p>
</li>
<li><p>当A结构体需要扩展功能，同时不希望去破坏这个继承关系，则可以去实现某个接口即可，因此实现接口是对继承机制的一种补充。</p>
</li>
<li><p>继承了A结构体的C结构体无法使用接口的特殊功能。</p>
</li>
<li><p>接口可以看作继承的一种补充<br>既不会破坏结构体的完整性，又能起到补充的规范性</p>
</li>
<li><p>接口和继承的解决的问题不同<br> <strong>继承的价值</strong>主要在于：解决代码的复用性和可维护性。<br> <strong>接口的价值</strong>主要在于：设计，设计好各种规范（方法），让其他自定义类型去实现这些方法。</p>
</li>
<li><p>接口比继承更加灵活<br>接口比继承更加灵活，继承是满足is-a的关系，而接口只需要满足like-a的关系</p>
</li>
<li><p>接口在一定程度上可以实现代码解耦</p>
</li>
</ol>
<h2 id="11-6-多态"><a href="#11-6-多态" class="headerlink" title="11.6 多态"></a>11.6 多态</h2><h3 id="11-6-1-基本介绍"><a href="#11-6-1-基本介绍" class="headerlink" title="11.6.1 基本介绍"></a>11.6.1 基本介绍</h3><p>在Go语言中，多态特征是通过接口实现的。可以按照统一的接口来调用不同的实现。这时接口变量就呈现不同的形态。</p>
<h3 id="11-6-2-接口体现多态特征"><a href="#11-6-2-接口体现多态特征" class="headerlink" title="11.6.2 接口体现多态特征"></a>11.6.2 接口体现多态特征</h3><ol>
<li><p>多态参数<br>在前面的Usb接口案例，Usb usb，既可以接收手机变量，又可以接收接口多态。</p>
</li>
<li><p>多态数组<br>给Usb数组中，存放Phone结构体和Camera结构体变量</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">"fmt"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 声明一个接口</span></span><br><span class="line"><span class="keyword">type</span> Usb <span class="keyword">interface</span> &#123;</span><br><span class="line">	<span class="comment">// 声明了两个没有实现的方法</span></span><br><span class="line">	Start()</span><br><span class="line">	Stop()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Phone <span class="keyword">struct</span> &#123;</span><br><span class="line">	name <span class="keyword">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 让Phone实现Usb接口的方法</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(p Phone)</span> <span class="title">Start</span><span class="params">()</span></span> &#123;</span><br><span class="line">	fmt.Println(<span class="string">"手机开始工作。。。"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(p Phone)</span> <span class="title">Stop</span><span class="params">()</span></span> &#123;</span><br><span class="line">	fmt.Println(<span class="string">"手机停止工作。。。"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Camera <span class="keyword">struct</span> &#123;</span><br><span class="line">	name <span class="keyword">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 让Camera实现Usb接口的方法</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(c Camera)</span> <span class="title">Start</span><span class="params">()</span></span> &#123;</span><br><span class="line">	fmt.Println(<span class="string">"相机开始工作。。。"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(c Camera)</span> <span class="title">Stop</span><span class="params">()</span></span> &#123;</span><br><span class="line">	fmt.Println(<span class="string">"相机停止工作。。。"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 计算机</span></span><br><span class="line"><span class="keyword">type</span> Computer <span class="keyword">struct</span> &#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 编写一个方法Working，接收一个Usb接口类型变量</span></span><br><span class="line"><span class="comment">// 只要实现了Usb接口</span></span><br><span class="line"><span class="comment">// 所谓实现Usb接口，就是指实现了Usb接口声明的所有方法</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(c Computer)</span> <span class="title">Working</span><span class="params">(usb Usb)</span></span> &#123;</span><br><span class="line">	usb.Start()</span><br><span class="line">	usb.Stop()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">// 定义一个接口数组，可以存放Phone和Camear的结构体变量</span></span><br><span class="line">	<span class="comment">// 这里就体现出多态数组</span></span><br><span class="line">	<span class="keyword">var</span> usbArr [<span class="number">3</span>]Usb</span><br><span class="line">	usbArr[<span class="number">0</span>] = Phone&#123;<span class="string">"vivo"</span>&#125;</span><br><span class="line">	usbArr[<span class="number">1</span>] = Phone&#123;<span class="string">"小米"</span>&#125;</span><br><span class="line">	usbArr[<span class="number">2</span>] = Camera&#123;<span class="string">"尼康"</span>&#125;</span><br><span class="line"></span><br><span class="line">	fmt.Println(usbArr)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 输出</span></span><br><span class="line">[&#123;vivo&#125; &#123;小米&#125; &#123;尼康&#125;]</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h2 id="11-7-类型断言"><a href="#11-7-类型断言" class="headerlink" title="11.7 类型断言"></a>11.7 类型断言</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">"fmt"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Point <span class="keyword">struct</span> &#123;</span><br><span class="line">	x <span class="keyword">int</span></span><br><span class="line">	y <span class="keyword">int</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> a <span class="keyword">interface</span>&#123;&#125;</span><br><span class="line">	<span class="keyword">var</span> point Point = Point&#123;<span class="number">1</span>, <span class="number">2</span>&#125;</span><br><span class="line">	a = point</span><br><span class="line"></span><br><span class="line">	<span class="keyword">var</span> b Point</span><br><span class="line">	<span class="comment">// b = a 不可以</span></span><br><span class="line">	<span class="comment">// b = a.(Point) // 可以</span></span><br><span class="line">	b = a.(Point)</span><br><span class="line">	fmt.Println(b)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 输出</span></span><br><span class="line">&#123;<span class="number">1</span> <span class="number">2</span>&#125;</span><br></pre></td></tr></table></figure>

<p>a.(Point)就是类型断言，表示判断a是否指向Point类型的变量，如果是就转成Point类型并赋给b变量，否则报错</p>
<h3 id="11-7-1-基本介绍"><a href="#11-7-1-基本介绍" class="headerlink" title="11.7.1 基本介绍"></a>11.7.1 基本介绍</h3><p>类型断言，由于接口是一般类型，不知道具体类型，如果要转成具体类型，就需要使用类型断言。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 类型断言的其他案例</span></span><br><span class="line"><span class="keyword">var</span> x <span class="keyword">interface</span>&#123;&#125;</span><br><span class="line"><span class="keyword">var</span> c <span class="keyword">float32</span> = <span class="number">1.1</span></span><br><span class="line">x = c <span class="comment">// 空接口，可以接收任意类型</span></span><br><span class="line"><span class="comment">// x-&gt;float32[使用类型断言]</span></span><br><span class="line">y := x.(<span class="keyword">float32</span>)</span><br><span class="line">fmt.Printf(<span class="string">"y的类型是%T，值是%v"</span>, y, y)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// </span></span><br><span class="line">y的类型是<span class="keyword">float32</span>，值是<span class="number">1.1</span></span><br></pre></td></tr></table></figure>

<p>如果类型不匹配，就会报panic，因此进行类型断言时，要确保远原来空接口指向的就是要断言的类型</p>
<p>如何在进行断言时，带上检测机制。如果成功ok，否则也不报panic？</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 类型断言的其他案例（带检测）</span></span><br><span class="line"><span class="keyword">var</span> x <span class="keyword">interface</span>&#123;&#125;</span><br><span class="line"><span class="keyword">var</span> c <span class="keyword">float32</span> = <span class="number">2.1</span></span><br><span class="line">x = c <span class="comment">// 空接口，可以接收任意类型</span></span><br><span class="line"><span class="comment">// x-&gt;float32[使用类型断言]</span></span><br><span class="line"><span class="comment">// 下面的类型断言是对上面的缩写</span></span><br><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment">y, err := x.(float32)</span></span><br><span class="line"><span class="comment">if err&#123;</span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">if</span> y, err := x.(<span class="keyword">float32</span>); err &#123;</span><br><span class="line">	fmt.Println(<span class="string">"convert success"</span>)</span><br><span class="line">	fmt.Printf(<span class="string">"y的类型是%T，值是%v\n"</span>, y, y)</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">	fmt.Println(<span class="string">"convert fail"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">fmt.Println(<span class="string">"okokook~~~"</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 输出</span></span><br><span class="line">convert success</span><br><span class="line">y的类型是<span class="keyword">float32</span>，值是<span class="number">2.1</span></span><br><span class="line">okokook~~~</span><br></pre></td></tr></table></figure>

<h3 id="11-7-2-类型断言的最佳实践"><a href="#11-7-2-类型断言的最佳实践" class="headerlink" title="11.7.2 类型断言的最佳实践"></a>11.7.2 类型断言的最佳实践</h3><p>对前面的Usb示例进行更改，Phone还有一个特有的方法call()，遍历Usb数组，如果是Phone变量，除了调用Usb接口声明的方法外，还需要调用Phone特有方法call</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">"fmt"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 声明一个接口</span></span><br><span class="line"><span class="keyword">type</span> Usb <span class="keyword">interface</span> &#123;</span><br><span class="line">	<span class="comment">// 声明了两个没有实现的方法</span></span><br><span class="line">	Start()</span><br><span class="line">	Stop()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Phone <span class="keyword">struct</span> &#123;</span><br><span class="line">	name <span class="keyword">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 让Phone实现Usb接口的方法</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(p Phone)</span> <span class="title">Start</span><span class="params">()</span></span> &#123;</span><br><span class="line">	fmt.Println(<span class="string">"手机开始工作。。。"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(p Phone)</span> <span class="title">Stop</span><span class="params">()</span></span> &#123;</span><br><span class="line">	fmt.Println(<span class="string">"手机停止工作。。。"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(p Phone)</span> <span class="title">Call</span><span class="params">()</span></span> &#123;</span><br><span class="line">	fmt.Println(p.name, <span class="string">"手机 开始打电话"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Camera <span class="keyword">struct</span> &#123;</span><br><span class="line">	name <span class="keyword">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 让Camera实现Usb接口的方法</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(c Camera)</span> <span class="title">Start</span><span class="params">()</span></span> &#123;</span><br><span class="line">	fmt.Println(<span class="string">"相机开始工作。。。"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(c Camera)</span> <span class="title">Stop</span><span class="params">()</span></span> &#123;</span><br><span class="line">	fmt.Println(<span class="string">"相机停止工作。。。"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 计算机</span></span><br><span class="line"><span class="keyword">type</span> Computer <span class="keyword">struct</span> &#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 编写一个方法Working，接收一个Usb接口类型变量</span></span><br><span class="line"><span class="comment">// 只要实现了Usb接口</span></span><br><span class="line"><span class="comment">// 所谓实现Usb接口，就是指实现了Usb接口声明的所有方法</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(c Computer)</span> <span class="title">Working</span><span class="params">(usb Usb)</span></span> &#123;</span><br><span class="line">	usb.Start()</span><br><span class="line">	<span class="comment">// 如果usb是指向Phone结构体的，则还需要调用Call方法</span></span><br><span class="line">	<span class="comment">// 类型断言</span></span><br><span class="line">	<span class="keyword">if</span> phone, ok := usb.(Phone); ok &#123;</span><br><span class="line">		phone.Call()</span><br><span class="line">	&#125;</span><br><span class="line">	usb.Stop()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">// 定义一个接口数组，可以存放Phone和Camear的结构体变量</span></span><br><span class="line">	<span class="comment">// 这里就体现出多态数组</span></span><br><span class="line">	<span class="keyword">var</span> usbArr [<span class="number">3</span>]Usb</span><br><span class="line">	usbArr[<span class="number">0</span>] = Phone&#123;<span class="string">"vivo"</span>&#125;</span><br><span class="line">	usbArr[<span class="number">1</span>] = Phone&#123;<span class="string">"小米"</span>&#125;</span><br><span class="line">	usbArr[<span class="number">2</span>] = Camera&#123;<span class="string">"尼康"</span>&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 遍历</span></span><br><span class="line">	<span class="comment">// Phone还有一个特有的方法call()，遍历Usb数组，如果是Phone变量</span></span><br><span class="line">	<span class="comment">// 除了调用Usb接口声明的方法外，还需要调用Phone特有方法call</span></span><br><span class="line">	<span class="keyword">var</span> computer Computer</span><br><span class="line">	<span class="keyword">for</span> _, v := <span class="keyword">range</span> usbArr &#123;</span><br><span class="line">		computer.Working(v)</span><br><span class="line">		fmt.Println()</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 输出</span></span><br><span class="line">手机开始工作。。。</span><br><span class="line">vivo 手机 开始打电话</span><br><span class="line">手机停止工作。。。</span><br><span class="line"></span><br><span class="line">手机开始工作。。。</span><br><span class="line">小米 手机 开始打电话</span><br><span class="line">手机停止工作。。。</span><br><span class="line"></span><br><span class="line">相机开始工作。。。</span><br><span class="line">相机停止工作。。。</span><br></pre></td></tr></table></figure>

<h3 id="最佳实践2"><a href="#最佳实践2" class="headerlink" title="最佳实践2"></a>最佳实践2</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">"fmt"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 编写一个函数，可以判断输入的参数数十秒类型</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TypeJude</span><span class="params">(item ...<span class="keyword">interface</span>&#123;&#125;)</span></span> &#123;</span><br><span class="line">	<span class="keyword">for</span> index, x := <span class="keyword">range</span> item &#123;</span><br><span class="line">		indexPrint := index + <span class="number">1</span></span><br><span class="line">		<span class="keyword">switch</span> x.(<span class="keyword">type</span>) &#123;</span><br><span class="line">		<span class="keyword">case</span> <span class="keyword">bool</span>:</span><br><span class="line">			fmt.Printf(<span class="string">"第%v个参数是bool类型，值是%v\n"</span>, indexPrint, x)</span><br><span class="line">		<span class="keyword">case</span> <span class="keyword">float32</span>:</span><br><span class="line">			fmt.Printf(<span class="string">"第%v个参数是float32类型，值是%v\n"</span>, indexPrint, x)</span><br><span class="line">		<span class="keyword">case</span> <span class="keyword">float64</span>:</span><br><span class="line">			fmt.Printf(<span class="string">"第%v个参数是float64类型，值是%v\n"</span>, indexPrint, x)</span><br><span class="line">		<span class="keyword">case</span> <span class="keyword">int</span>, <span class="keyword">int32</span>, <span class="keyword">int64</span>:</span><br><span class="line">			fmt.Printf(<span class="string">"第%v个参数是整型，值是%v\n"</span>, indexPrint, x)</span><br><span class="line">		<span class="keyword">case</span> <span class="keyword">string</span>:</span><br><span class="line">			fmt.Printf(<span class="string">"第%v个参数是string类型，值是%v\n"</span>, indexPrint, x)</span><br><span class="line">		<span class="keyword">default</span>:</span><br><span class="line">			fmt.Printf(<span class="string">"第%v个参数不确定，值是%v\n"</span>, indexPrint, x)</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> n1 <span class="keyword">float32</span> = <span class="number">1.1</span></span><br><span class="line">	<span class="keyword">var</span> n2 <span class="keyword">float64</span> = <span class="number">2.3</span></span><br><span class="line">	<span class="keyword">var</span> n3 <span class="keyword">int32</span> = <span class="number">30</span></span><br><span class="line">	<span class="keyword">var</span> name <span class="keyword">string</span> = <span class="string">"tom"</span></span><br><span class="line">	address := <span class="string">"北京"</span></span><br><span class="line">	n4 := <span class="number">300</span></span><br><span class="line">	TypeJude(n1, n2, n3, name, address, n4)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 输出</span></span><br><span class="line">第<span class="number">1</span>个参数是<span class="keyword">float32</span>类型，值是<span class="number">1.1</span></span><br><span class="line">第<span class="number">2</span>个参数是<span class="keyword">float64</span>类型，值是<span class="number">2.3</span></span><br><span class="line">第<span class="number">3</span>个参数是整型，值是<span class="number">30</span></span><br><span class="line">第<span class="number">4</span>个参数是<span class="keyword">string</span>类型，值是tom</span><br><span class="line">第<span class="number">5</span>个参数是<span class="keyword">string</span>类型，值是北京</span><br><span class="line">第<span class="number">6</span>个参数是整型，值是<span class="number">300</span></span><br></pre></td></tr></table></figure>

<h1 id="12-项目1-家庭收支记账软件项目"><a href="#12-项目1-家庭收支记账软件项目" class="headerlink" title="12 项目1-家庭收支记账软件项目"></a>12 项目1-家庭收支记账软件项目</h1><h2 id="12-1-项目开发流程说明"><a href="#12-1-项目开发流程说明" class="headerlink" title="12.1 项目开发流程说明"></a>12.1 项目开发流程说明</h2><ol>
<li>需求分析<br>30%时间比<br>需求分析师：<ol>
<li>懂技术</li>
<li>懂业务<br>结果：需求分析报告</li>
</ol>
</li>
</ol>
<ol start="2">
<li>设计阶段<br>20%时间比<br>项目经理、架构师<ol>
<li>架构【开发语言、框架、数据库、操作系统…】</li>
<li>选人【】<br>结果：设计文档【类图、示例图、流程图、数据库(核心)、界面原型（核心）…】</li>
</ol>
</li>
</ol>
<ol start="3">
<li>实现阶段（代码）<br>20%时间比<br>软件工程师：<ol>
<li>实现各个模块</li>
</ol>
</li>
</ol>
<ol start="4">
<li>测试阶段<br>与实现螺旋递增，分为单元测试与整体测试<br>软件测试工程师：<ol>
<li>黑盒测试</li>
<li>白盒测试（懂代码）</li>
<li>灰盒测试</li>
</ol>
</li>
</ol>
<ol start="5">
<li><p>实施阶段<br>实施工程师</p>
</li>
<li><p>维护阶段<br>用户发现问题-&gt;返回给对接的人-&gt;对接进行调试和修改</p>
</li>
</ol>
<h2 id="12-2-项目需求说明"><a href="#12-2-项目需求说明" class="headerlink" title="12.2 项目需求说明"></a>12.2 项目需求说明</h2><ol>
<li>模拟实现基于文本界面的《家庭记账软件》</li>
<li>该软件能够记录家庭的收入、支出，并能够打印出收支项目</li>
</ol>
<h2 id="12-3-项目的界面"><a href="#12-3-项目的界面" class="headerlink" title="12.3 项目的界面"></a>12.3 项目的界面</h2><h2 id="12-4-项目代码实现1"><a href="#12-4-项目代码实现1" class="headerlink" title="12.4 项目代码实现1"></a>12.4 项目代码实现1</h2><p>实现基本功能（先使用面向过程，后面改成面向对象）</p>
<p>编写文件 TestMyAccount.go 完成基本功能</p>
<ol>
<li>先完成可以显示主菜单，并且可以退出</li>
<li>完成可以显示明细的功能</li>
<li>完成登记收入的功能</li>
<li>完成登记支出的功能</li>
</ol>
<h3 id="12-4-1-功能1"><a href="#12-4-1-功能1" class="headerlink" title="12.4.1 功能1"></a>12.4.1 功能1</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">"fmt"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">// 声明一个变量，保存接收用户输入的选项</span></span><br><span class="line">	key := <span class="string">""</span></span><br><span class="line">	<span class="comment">// 声明一个变量，控制是否退出for循环</span></span><br><span class="line">	loop := <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">// 显示主菜单</span></span><br><span class="line">	<span class="keyword">for</span> &#123;</span><br><span class="line">		fmt.Println(<span class="string">"----------------家庭收支记账软件-----------------"</span>)</span><br><span class="line">		fmt.Println(<span class="string">"                 1 收入明细"</span>)</span><br><span class="line">		fmt.Println(<span class="string">"                 2 登记收入"</span>)</span><br><span class="line">		fmt.Println(<span class="string">"                 3 登记支出"</span>)</span><br><span class="line">		fmt.Println(<span class="string">"                 4 退出软件"</span>)</span><br><span class="line">		fmt.Println(<span class="string">"请选择（1-4）："</span>)</span><br><span class="line"></span><br><span class="line">		fmt.Scanln(&amp;key)</span><br><span class="line"></span><br><span class="line">		<span class="keyword">switch</span> key &#123;</span><br><span class="line">		<span class="keyword">case</span> <span class="string">"1"</span>:</span><br><span class="line">			fmt.Println(<span class="string">"----------------当前收支明细-----------------"</span>)</span><br><span class="line">		<span class="keyword">case</span> <span class="string">"2"</span>:</span><br><span class="line">		<span class="keyword">case</span> <span class="string">"3"</span>:</span><br><span class="line">			fmt.Println(<span class="string">"登记支出。。"</span>)</span><br><span class="line">		<span class="keyword">case</span> <span class="string">"4"</span>:</span><br><span class="line">			loop = <span class="literal">false</span></span><br><span class="line">		<span class="keyword">default</span>:</span><br><span class="line">			fmt.Println(<span class="string">"请输入正确的选项。。"</span>)</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">if</span> !loop &#123;</span><br><span class="line">			<span class="keyword">break</span></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Println(<span class="string">"你退出了家庭记账软件的使用"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>输出</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">----------------家庭收支记账软件-----------------</span><br><span class="line">                 1 收入明细</span><br><span class="line">                 2 登记收入</span><br><span class="line">                 3 登记支出</span><br><span class="line">                 4 退出软件</span><br><span class="line">请选择（1-4）：</span><br><span class="line">1</span><br><span class="line">----------------当前收支明细-----------------</span><br><span class="line">----------------家庭收支记账软件-----------------</span><br><span class="line">                 1 收入明细</span><br><span class="line">                 2 登记收入</span><br><span class="line">                 3 登记支出</span><br><span class="line">                 4 退出软件</span><br><span class="line">请选择（1-4）：</span><br><span class="line">2</span><br><span class="line">----------------家庭收支记账软件-----------------</span><br><span class="line">                 1 收入明细</span><br><span class="line">                 2 登记收入</span><br><span class="line">                 3 登记支出</span><br><span class="line">                 4 退出软件</span><br><span class="line">请选择（1-4）：</span><br><span class="line">4</span><br><span class="line">你退出了家庭记账软件的使用</span><br></pre></td></tr></table></figure>

<h3 id="12-4-2-功能2-完成可以显示明细和登记收入的功能"><a href="#12-4-2-功能2-完成可以显示明细和登记收入的功能" class="headerlink" title="12.4.2 功能2 完成可以显示明细和登记收入的功能"></a>12.4.2 功能2 完成可以显示明细和登记收入的功能</h3><p>思路分析：</p>
<ol>
<li><p>因为需要显示明细，我们定义一个变量details string来记录</p>
</li>
<li><p>还需要定义变量来记录余额(balance)、每次收支的金额(money)、每次收支的说明(note)</p>
</li>
</ol>
<p>新增代码</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 定义账户余额</span></span><br><span class="line"><span class="keyword">var</span> balance <span class="keyword">float64</span> = <span class="number">10000.0</span></span><br><span class="line"><span class="comment">// 每次收支的金额</span></span><br><span class="line"><span class="keyword">var</span> money <span class="keyword">float64</span> = <span class="number">0.0</span></span><br><span class="line"><span class="comment">// 每次收支的说明</span></span><br><span class="line"><span class="keyword">var</span> note <span class="keyword">string</span> = <span class="string">""</span></span><br><span class="line"><span class="comment">// 收支的一个详情，字符串来记录</span></span><br><span class="line"><span class="comment">// 当有收支是，只需要对details进行拼接处理即可</span></span><br><span class="line"><span class="keyword">var</span> details <span class="keyword">string</span> = <span class="string">"收支\t账户金额\t收支金额\t说    明"</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">case</span> <span class="string">"2"</span>:</span><br><span class="line">	fmt.Println(<span class="string">"本次收入金额："</span>)</span><br><span class="line">	fmt.Scanln(&amp;money)</span><br><span class="line">	balance += money</span><br><span class="line">	fmt.Println(<span class="string">"本次收入说明："</span>)</span><br><span class="line">	fmt.Scanln(&amp;note)</span><br><span class="line">	<span class="comment">// 将这个收入情况拼接到details变量</span></span><br><span class="line">	details += fmt.Sprintf(<span class="string">"\n收入\t%v\t\t%v\t\t%v"</span>, balance, money, note)</span><br></pre></td></tr></table></figure>

<h3 id="12-4-2-功能3-完成可以登记支出的功能"><a href="#12-4-2-功能3-完成可以登记支出的功能" class="headerlink" title="12.4.2 功能3 完成可以登记支出的功能"></a>12.4.2 功能3 完成可以登记支出的功能</h3><p>思路分析：<br>登记支出的功能和登记收入的功能类型，做些修改即可</p>
<p>新增代码</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">fmt.Println(<span class="string">"本次支出金额："</span>)</span><br><span class="line">			fmt.Scanln(&amp;money)</span><br><span class="line"></span><br><span class="line">			<span class="comment">// 这里需要做一个必要的判断</span></span><br><span class="line">			<span class="keyword">if</span> money &gt; balance &#123;</span><br><span class="line">				fmt.Println(<span class="string">"余额不足"</span>)</span><br><span class="line">				<span class="keyword">break</span></span><br><span class="line">			&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">				balance -= money</span><br><span class="line">			&#125;</span><br><span class="line">			fmt.Println(<span class="string">"本次支出说明："</span>)</span><br><span class="line">			fmt.Scanln(&amp;note)</span><br><span class="line">			<span class="comment">// 将这个收入情况拼接到details变量</span></span><br><span class="line">			details += fmt.Sprintf(<span class="string">"\n支出\t%v\t\t%v\t\t%v"</span>, balance, money, note)</span><br></pre></td></tr></table></figure>

<h3 id="12-4-2-项目代码实现改进"><a href="#12-4-2-项目代码实现改进" class="headerlink" title="12.4.2 项目代码实现改进"></a>12.4.2 项目代码实现改进</h3><ol>
<li><p>用户输入4退出时，给出提示“你确定要退出吗？y/n”，必须输入正确y/n，否则循环输入指令，知道输入y或者n。<br>新增代码</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">case</span> <span class="string">"4"</span>:</span><br><span class="line">	fmt.Println(<span class="string">"你确定要退出吗？y/n"</span>)</span><br><span class="line">	chioce := <span class="string">""</span></span><br><span class="line">	<span class="keyword">for</span> &#123;</span><br><span class="line">		fmt.Scanln(&amp;chioce)</span><br><span class="line">		<span class="keyword">if</span> chioce == <span class="string">"y"</span> || chioce == <span class="string">"n"</span> &#123;</span><br><span class="line">			<span class="keyword">break</span></span><br><span class="line">		&#125;</span><br><span class="line">		fmt.Println(<span class="string">"你的输入有误，请重新输入"</span>)</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span> chioce == <span class="string">"y"</span> &#123;</span><br><span class="line">		loop = <span class="literal">false</span></span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>当没有任何收支明细是，提示“当前没有收支明细…来一笔吧！”<br>新增代码：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 定义一个变量，记录是否有收支的行为</span></span><br><span class="line">flag := <span class="literal">false</span></span><br><span class="line"><span class="keyword">case</span> <span class="string">"1"</span>:</span><br><span class="line">	<span class="keyword">if</span> flag == <span class="literal">true</span> &#123;</span><br><span class="line">		fmt.Println(<span class="string">"----------------当前收支明细-----------------"</span>)</span><br><span class="line">		fmt.Println(details)</span><br><span class="line">	&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">		fmt.Println(<span class="string">"----------------当前收支明细-----------------"</span>)</span><br><span class="line">		fmt.Println(<span class="string">"当前没有收支明细...来一笔吧！"</span>)</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>将面向过程的代码修改成面向对象的方法<br>思路分析：<br>把记账软件的功能，封装到一个结构体中，然后调用该结构体的方法，来实现记账、显示明细。结构体的名字FamilyAccount。</p>
<p> 再通过在main方法中，创建一个结构体FamilyAccount示例，实现记账即可</p>
<p> 代码实现：<br> 代码并不需要重写，只需要重写组织一下即可</p>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">文件结构</span><br><span class="line">familyaccount</span><br><span class="line">├─main</span><br><span class="line">│   main.go</span><br><span class="line">└─utils</span><br><span class="line">    familyaccount.go</span><br></pre></td></tr></table></figure>

 <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// main.go</span></span><br><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">"fmt"</span></span><br><span class="line">	<span class="string">"gocode/project12/familyaccount/utils"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	fmt.Println(<span class="string">"这个是面向对象的方式完成~"</span>)</span><br><span class="line">	utils.NewFamilyAccount().MainMenu()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

 <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// familyaccount.go</span></span><br><span class="line"><span class="keyword">package</span> utils</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> FamilyAccount <span class="keyword">struct</span> &#123;</span><br><span class="line">	<span class="comment">// 声明必要的字段</span></span><br><span class="line">	<span class="comment">// 声明一个字段，保存接收用户输入的选项</span></span><br><span class="line">	key <span class="keyword">string</span></span><br><span class="line">	<span class="comment">// 声明一个字段，控制是否退出for循环</span></span><br><span class="line">	loop <span class="keyword">bool</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">// 定义账户余额</span></span><br><span class="line">	balance <span class="keyword">float64</span></span><br><span class="line">	<span class="comment">// 每次收支的金额</span></span><br><span class="line">	money <span class="keyword">float64</span></span><br><span class="line">	<span class="comment">// 每次收支的说明</span></span><br><span class="line">	note <span class="keyword">string</span></span><br><span class="line">	<span class="comment">// 定义一个字段，记录是否有收支的行为</span></span><br><span class="line">	flag <span class="keyword">bool</span></span><br><span class="line">	<span class="comment">// 收支的一个详情，字符串来记录</span></span><br><span class="line">	<span class="comment">// 当有收支是，只需要对details进行拼接处理即可</span></span><br><span class="line">	details <span class="keyword">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 编写一个工厂模式的构造方法，返回一个*FamilyAccout实例</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">NewFamilyAccount</span><span class="params">()</span> *<span class="title">FamilyAccount</span></span> &#123;</span><br><span class="line">	<span class="keyword">return</span> &amp;FamilyAccount&#123;</span><br><span class="line">		key:     <span class="string">""</span>,</span><br><span class="line">		loop:    <span class="literal">true</span>,</span><br><span class="line">		balance: <span class="number">10000.0</span>,</span><br><span class="line">		money:   <span class="number">0.0</span>,</span><br><span class="line">		note:    <span class="string">""</span>,</span><br><span class="line">		flag:    <span class="literal">false</span>,</span><br><span class="line">		details: <span class="string">"收支\t账户金额\t收支金额\t说    明"</span>,</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 将显示明细写成一个方法</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(this *FamilyAccount)</span> <span class="title">showDetails</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">if</span> this.flag == <span class="literal">true</span> &#123;</span><br><span class="line">		fmt.Println(<span class="string">"----------------当前收支明细-----------------"</span>)</span><br><span class="line">		fmt.Println(this.details)</span><br><span class="line">	&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">		fmt.Println(<span class="string">"----------------当前收支明细-----------------"</span>)</span><br><span class="line">		fmt.Println(<span class="string">"当前没有收支明细...来一笔吧！"</span>)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 将登记收入写成一个方法，和*FamilyAccout绑定</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(this *FamilyAccount)</span> <span class="title">income</span><span class="params">()</span></span> &#123;</span><br><span class="line">	fmt.Printf(<span class="string">"本次收入金额："</span>)</span><br><span class="line">	fmt.Scanln(&amp;this.money)</span><br><span class="line">	this.balance += this.money</span><br><span class="line">	fmt.Printf(<span class="string">"本次收入说明："</span>)</span><br><span class="line">	fmt.Scanln(&amp;this.note)</span><br><span class="line">	<span class="comment">// 将这个收入情况拼接到details变量</span></span><br><span class="line">	this.details += fmt.Sprintf(<span class="string">"\n收入\t%v\t\t%v\t\t%v"</span>, this.balance, this.money, this.note)</span><br><span class="line">	this.flag = <span class="literal">true</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 将登记支出也写成一个方法，和*FamilyAccount绑定</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(this *FamilyAccount)</span> <span class="title">pay</span><span class="params">()</span></span> &#123;</span><br><span class="line">	fmt.Println(<span class="string">"本次支出金额："</span>)</span><br><span class="line">	fmt.Scanln(&amp;this.money)</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 这里需要做一个必要的判断</span></span><br><span class="line">	<span class="keyword">if</span> this.money &gt; this.balance &#123;</span><br><span class="line">		fmt.Println(<span class="string">"余额不足"</span>)</span><br><span class="line">	&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">		this.balance -= this.money</span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Println(<span class="string">"本次支出说明："</span>)</span><br><span class="line">	fmt.Scanln(&amp;this.note)</span><br><span class="line">	<span class="comment">// 将这个收入情况拼接到details变量</span></span><br><span class="line">	this.details += fmt.Sprintf(<span class="string">"\n支出\t%v\t\t%v\t\t%v"</span>, this.balance, this.money, this.note)</span><br><span class="line">	this.flag = <span class="literal">true</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 将退出系统也写成一个方法，和*FamilyAccount绑定</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(this *FamilyAccount)</span> <span class="title">exit</span><span class="params">()</span></span> &#123;</span><br><span class="line">	fmt.Println(<span class="string">"你确定要退出吗？y/n"</span>)</span><br><span class="line">	chioce := <span class="string">""</span></span><br><span class="line">	<span class="keyword">for</span> &#123;</span><br><span class="line">		fmt.Scanln(&amp;chioce)</span><br><span class="line">		<span class="keyword">if</span> chioce == <span class="string">"y"</span> || chioce == <span class="string">"n"</span> &#123;</span><br><span class="line">			<span class="keyword">break</span></span><br><span class="line">		&#125;</span><br><span class="line">		fmt.Println(<span class="string">"你的输入有误，请重新输入"</span>)</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span> chioce == <span class="string">"y"</span> &#123;</span><br><span class="line">		this.loop = <span class="literal">false</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 给该结构体绑定相应的方法</span></span><br><span class="line"><span class="comment">// 显示主菜单</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(this *FamilyAccount)</span> <span class="title">MainMenu</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">for</span> &#123;</span><br><span class="line">		fmt.Println(<span class="string">"\n----------------家庭收支记账软件-----------------"</span>)</span><br><span class="line">		fmt.Println(<span class="string">"                 1 收入明细"</span>)</span><br><span class="line">		fmt.Println(<span class="string">"                 2 登记收入"</span>)</span><br><span class="line">		fmt.Println(<span class="string">"                 3 登记支出"</span>)</span><br><span class="line">		fmt.Println(<span class="string">"                 4 退出软件"</span>)</span><br><span class="line">		fmt.Println(<span class="string">"请选择（1-4）："</span>)</span><br><span class="line"></span><br><span class="line">		fmt.Scanln(&amp;this.key)</span><br><span class="line"></span><br><span class="line">		<span class="keyword">switch</span> this.key &#123;</span><br><span class="line">		<span class="keyword">case</span> <span class="string">"1"</span>:</span><br><span class="line">			this.showDetails()</span><br><span class="line">		<span class="keyword">case</span> <span class="string">"2"</span>:</span><br><span class="line">			this.income()</span><br><span class="line">		<span class="keyword">case</span> <span class="string">"3"</span>:</span><br><span class="line">			this.pay()</span><br><span class="line">		<span class="keyword">case</span> <span class="string">"4"</span>:</span><br><span class="line">			this.exit()</span><br><span class="line">		<span class="keyword">default</span>:</span><br><span class="line">			fmt.Println(<span class="string">"请输入正确的选项。。"</span>)</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">if</span> !this.loop &#123;</span><br><span class="line">			<span class="keyword">break</span></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Println(<span class="string">"你退出了家庭记账软件的使用"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h1 id="13-项目2-客户信息管理系统"><a href="#13-项目2-客户信息管理系统" class="headerlink" title="13 项目2-客户信息管理系统"></a>13 项目2-客户信息管理系统</h1><h2 id="13-1-项目需求分析"><a href="#13-1-项目需求分析" class="headerlink" title="13.1 项目需求分析"></a>13.1 项目需求分析</h2><ol>
<li>模拟实现一个基于文本界面的《客户信息管理软件》</li>
<li>该软件能够实现对客户对象的插入、修改和删除（用切片实现），并能够打印客户明细表</li>
</ol>
<h2 id="13-2-项目的界面设计"><a href="#13-2-项目的界面设计" class="headerlink" title="13.2 项目的界面设计"></a>13.2 项目的界面设计</h2><h2 id="13-3-程序框架图的设计"><a href="#13-3-程序框架图的设计" class="headerlink" title="13.3 程序框架图的设计"></a>13.3 程序框架图的设计</h2><p>客户关系管理的程序框架图</p>
<p><code>第三个实现</code><br>customerView.go【界面】v</p>
<ol>
<li>可以显示界面</li>
<li>可以接收用户的输入</li>
<li>根据用户的输入完成客户的管理【修改、删除、显示等等】，它是调用customerService.go来实现的</li>
<li>含customerService字段</li>
</ol>
<p><code>第二个实现</code><br>customerService.go【处理业务逻辑】</p>
<ol>
<li>完成对客户的各种操作</li>
<li>对客户的增、删除、修改、显示</li>
<li>会声明customer的切片</li>
</ol>
<p><code>第一个实现</code><br>customer.go【表示数据】model层</p>
<ol>
<li>表示一个客户</li>
<li>客户各种字段<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> Customerstruct&#123;</span><br><span class="line">	Id     <span class="keyword">int</span></span><br><span class="line">	Name   <span class="keyword">string</span></span><br><span class="line">	Gender <span class="keyword">string</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h2 id="13-4-项目功能实现-显示主菜单和完成退出软件功能"><a href="#13-4-项目功能实现-显示主菜单和完成退出软件功能" class="headerlink" title="13.4 项目功能实现-显示主菜单和完成退出软件功能"></a>13.4 项目功能实现-显示主菜单和完成退出软件功能</h2><ul>
<li><p>功能说明<br>当用户运行程序时，可以看到主菜单，当输入5是，可以退出该软件</p>
</li>
<li><p>思路分析<br>编写customerView.go，另外可以吧customer.go和customerService.go写上</p>
</li>
<li><p>代码实现</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">文件结构：</span><br><span class="line">customerManager</span><br><span class="line">├─model</span><br><span class="line">│   customer.go</span><br><span class="line">├─service</span><br><span class="line">│   customerService.go</span><br><span class="line">└─view</span><br><span class="line">    customerView.go</span><br></pre></td></tr></table></figure>

  <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// customer.go</span></span><br><span class="line"><span class="keyword">package</span> model</span><br><span class="line"></span><br><span class="line"><span class="comment">// 声明一个customer结构体，表示一个客户信息</span></span><br><span class="line"><span class="keyword">type</span> Customer <span class="keyword">struct</span> &#123;</span><br><span class="line">	Id     <span class="keyword">int</span></span><br><span class="line">	Name   <span class="keyword">string</span></span><br><span class="line">	Gender <span class="keyword">string</span></span><br><span class="line">	Age    <span class="keyword">int</span></span><br><span class="line">	Phone  <span class="keyword">string</span></span><br><span class="line">	Email  <span class="keyword">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 编写一个工厂模式，返回一个customer的实力</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">NewCustomer</span><span class="params">(id <span class="keyword">int</span>, name <span class="keyword">string</span>, gender <span class="keyword">string</span>,</span></span></span><br><span class="line"><span class="function"><span class="params">	age <span class="keyword">int</span>, phone <span class="keyword">string</span>, email <span class="keyword">string</span>)</span> <span class="title">Customer</span></span> &#123;</span><br><span class="line">	<span class="keyword">return</span> Customer&#123;</span><br><span class="line">		Id:     id,</span><br><span class="line">		Name:   name,</span><br><span class="line">		Gender: gender,</span><br><span class="line">		Age:    age,</span><br><span class="line">		Phone:  phone,</span><br><span class="line">		Email:  email,</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

  <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// customerService.go</span></span><br><span class="line"><span class="keyword">package</span> service</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">"gocode/project12/customerManager/model"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 该CustomerService，完成对Customer的操作，包括</span></span><br><span class="line"><span class="comment">// 增删改查</span></span><br><span class="line"><span class="keyword">type</span> CustomerService <span class="keyword">struct</span> &#123;</span><br><span class="line">	customers []model.Customer</span><br><span class="line">	<span class="comment">// 声明一个字段，表示当前切片含有多少个客户</span></span><br><span class="line">	<span class="comment">// 该字段后面，还可以作为新字段的编号id+1</span></span><br><span class="line">	customerNum <span class="keyword">int</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

  <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// customerView.go</span></span><br><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">"fmt"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> customerView <span class="keyword">struct</span> &#123;</span><br><span class="line">	<span class="comment">// 定义必要的字段</span></span><br><span class="line">	key  <span class="keyword">string</span> <span class="comment">// 接收用户的输入</span></span><br><span class="line">	loop <span class="keyword">bool</span>   <span class="comment">// 表示是否循环显示菜单</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 显示主菜单</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(this *customerView)</span> <span class="title">mainMenu</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">for</span> &#123;</span><br><span class="line">		fmt.Println(<span class="string">"\n----------------客户信息管理软件-----------------"</span>)</span><br><span class="line">		fmt.Println(<span class="string">"                 1 添加客户"</span>)</span><br><span class="line">		fmt.Println(<span class="string">"                 2 修改客户"</span>)</span><br><span class="line">		fmt.Println(<span class="string">"                 3 删除客户"</span>)</span><br><span class="line">		fmt.Println(<span class="string">"                 4 客户列表"</span>)</span><br><span class="line">		fmt.Println(<span class="string">"                 5 退    出"</span>)</span><br><span class="line">		fmt.Println(<span class="string">"请选择（1-5）："</span>)</span><br><span class="line"></span><br><span class="line">		fmt.Scanln(&amp;this.key)</span><br><span class="line"></span><br><span class="line">		<span class="keyword">switch</span> this.key &#123;</span><br><span class="line">		<span class="keyword">case</span> <span class="string">"1"</span>:</span><br><span class="line">			fmt.Println(<span class="string">"添 加 客 户"</span>)</span><br><span class="line">		<span class="keyword">case</span> <span class="string">"2"</span>:</span><br><span class="line">			fmt.Println(<span class="string">"修 改 客 户"</span>)</span><br><span class="line">		<span class="keyword">case</span> <span class="string">"3"</span>:</span><br><span class="line">			fmt.Println(<span class="string">"删 除 客 户"</span>)</span><br><span class="line">		<span class="keyword">case</span> <span class="string">"4"</span>:</span><br><span class="line">			fmt.Println(<span class="string">"客 户 列 表"</span>)</span><br><span class="line">		<span class="keyword">case</span> <span class="string">"5"</span>:</span><br><span class="line">			this.loop = <span class="literal">false</span></span><br><span class="line">		<span class="keyword">default</span>:</span><br><span class="line">			fmt.Println(<span class="string">"你的输入有误，请重新输入..."</span>)</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">if</span> !this.loop &#123;</span><br><span class="line">			<span class="keyword">break</span></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	fmt.Println(<span class="string">"你退出了客户关系管理系统"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">// 在主函数中，创建一个customer实例，并运行显示主菜单</span></span><br><span class="line">	customerView := customerView&#123;</span><br><span class="line">		key:  <span class="string">""</span>,</span><br><span class="line">		loop: <span class="literal">true</span>,</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	customerView.mainMenu()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>

    </div>

    

    

    <!-- Comments -->
    

</div>
        </section>

    </div>
</div>


</div>

<!-- Footer -->
<div class="push"></div>

<footer class="footer-content">
    <div class="container">
        <div class="row">
            <div class="col-xs-12 col-sm-12 col-md-6 col-lg-6 footer-about">
                <h2>About</h2>
                <p>
                    这个主题由<a href="https://github.com/klugjo">Jonathan Klughertz</a>开发.源代码也发布在了Github上.
                </p>
            </div>
            
    <div class="col-xs-6 col-sm-6 col-md-3 col-lg-3 recent-posts">
        <h2>Recent Posts</h2>
        <ul>
            
            <li>
                <a class="footer-post" href="/2019/09/28/算法分析/">算法分析</a>
            </li>
            
            <li>
                <a class="footer-post" href="/2019/07/01/编程风格-好代码的逻辑/">编程风格-好代码的逻辑</a>
            </li>
            
            <li>
                <a class="footer-post" href="/2019/05/30/Go语言笔记/">go语言笔记</a>
            </li>
            
            <li>
                <a class="footer-post" href="/2019/05/06/导航栏使用测试/">导航栏使用测试</a>
            </li>
            
        </ul>
    </div>



            
<div class="col-xs-6 col-sm-6 col-md-3 col-lg-3 footer-categories">
    <h2>Categories</h2>
    <ul>
        
        <li>
            <a class="footer-post" href="/categories/博客简介/">博客简介</a>
        </li>
        
        <li>
            <a class="footer-post" href="/categories/语言学习/">语言学习</a>
        </li>
        
    </ul>
</div>

        </div>
        <div class="row">
            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                <ul class="list-inline footer-social-icons">
                    
                    <li class="list-inline-item">
                        <a href="https://github.com/klugjo/hexo-theme-alpha-dust">
                            <span class="footer-icon-container">
                                <i class="fa fa-github"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li class="list-inline-item">
                        <a href="https://twitter.com/?lang=en">
                            <span class="footer-icon-container">
                                <i class="fa fa-twitter"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    
                    
                    
                    
                    
                    
                    <li class="list-inline-item">
                        <a href="mailto:test@example.com">
                            <span class="footer-icon-container">
                                <i class="fa fa-envelope-o"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li class="list-inline-item">
                        <a href="\#">
                            <span class="footer-icon-container">
                                <i class="fa fa-rss"></i>
                            </span>
                        </a>
                    </li>
                    
                </ul>
            </div>
        </div>
        <div class="row">
            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                <div class="footer-copyright">
                    
                </div>
            </div>
        </div>
    </div>
</footer>

<!-- After footer scripts -->

<!-- jQuery -->
<script src="//code.jquery.com/jquery-2.1.4.min.js"></script>

<!-- Tween Max -->
<script src="//cdnjs.cloudflare.com/ajax/libs/gsap/1.18.5/TweenMax.min.js"></script>

<!-- Gallery -->
<script src="//cdnjs.cloudflare.com/ajax/libs/featherlight/1.3.5/featherlight.min.js" type="text/javascript" charset="utf-8"></script>

<!-- Custom JavaScript -->
<script src="/js/main.js"></script>

<!-- Disqus Comments -->



</body>

</html>